id,title,section_id,template_id,type_id,priority_id,milestone_id,refs,created_by,created_on,updated_by,updated_on,estimate,estimate_forecast,suite_id,custom_automation_type,custom_description,custom_preconds,custom_steps,custom_expected,custom_steps_separated,custom_mission,custom_goals,section_hierarchy,section_parent_id,section_description
3065340,Gateways cannot be created through SSM web,7472,1,9,2,"","IRIS-1268,IRIS-1283",9,1495497685,23,1524680807,"","",2059,0,Gateways cannot be created through SSM web. They can only be created when an AAT registers with SSM.,Needs access to AAT as super admin,"1. Log in as a super admin in AAT
2. Create a new GW, and don't register it.
3. Login to SSM as Super Admin, verify the GW was not created.
4. Check if you can create it manually, there should be no create button.
5. In AAT register the GW.
6. Go back to SSM and refresh the GW page.
","* A gateway is created when an AAT registers with SSM. 
* Super admins cannot create Gateways","","","",Gateway,"",""
3038534,As a super administrator I should be able to check the setup and connectivity of a gateway remotely via the SSM browser interface,7472,1,9,2,"","IRIS-108,IRIS-590",9,1492787798,24,1521129962,"","",2059,0,As a super administrator I should be able to check the setup and connectivity of a gateway remotely via the SSM browser interface,"- Log in as a super admin
- Have two gateways: one that is accessible and one that is not

(To make a Gateway Not accessible click 'Edit' > turn off 'Enabled' switch > click 'Update')","1. Go to the Gateway page
2. Click the **Check connectivity** (orange box with a cloud) button","You get one of these messages according to the gateway's connectivity:
- *Gateway #{@gateway.name} is accessible.*
- *Gateway #{@gateway.name} is not accessible.*","","","",Gateway,"",""
3110757,REST API accepts updates posted by AATs,7472,1,9,2,"","IRIS-309,IRIS-1113",9,1499720026,23,1526056997,"","",2059,0,"AAT makes a REST request to SSM to refresh its auth-key, every 30 days.","","1. ssh into AAT Stg
2. Do `cd AAT`
3. Do `vi config/schedule.rb`

Change the following

    every 30.days do
      rake 'reset_auth_keys:reset_keys'
    end

to 

    every 1.minutes do
      rake 'reset_auth_keys:reset_keys'
    end


4. Then do `whenever --update-crontab`
4. Login as super user to SSM, go to the Gateway tab.
5. View the above configured Gateway.
","SSM Gateway's auth key is refreshed as AAT posts the new auth key every 1 minutes.

","","","",Gateway,"",""
3113704,The SSM is a 'service' frontend web application that runs on EC2 instances in the AWS cloud infrastructure,7472,1,9,2,"","IRIS-1162, IRIS-1161",14,1499978279,23,1525729033,"","",2059,0,"","","1. Login to AWS stg
2. Go to the Oregon tenant
3. Open EC2 service and filter for SSM",There should be two instances running.,"","","",Gateway,"",""
3113705,HIPAA compliant EC2 instances for SSM in AWS,7472,1,9,2,"","IRIS-1163, IRIS-1164",14,1499978863,23,1524681541,"","",2059,0,"","","1. Login to AWS staging, and go to Oregon tenant.
2. Filter for 'SSM'","All SSM instances are 'EC2 med' or larger HIPAA compliant EC2 instances from AWS.
","","","",Gateway,"",""
3113706,DS-20050 IRIS REST Interface Design Specification defines the application program interface (API) to enable access to SSM functions used by the IRIS iOS App and the IRIS Web application.,7472,1,9,2,"","IRIS-1165, IRIS-1166",14,1499979076,9,1531952784,"","",2059,0,"","",Go to https://intouchhealth.atlassian.net/wiki/spaces/IRIS/pages/49381580/DS-20050-001+IRIS+REST+Interface+Design+Specification,DS-20050 reflects the latest IRIS system needs,"","","",Gateway,"",""
3113707,The SSM includes a front end virtual machine running an application server with a static IP on Amazon EC2 and F5s for load balancing,7472,1,9,2,"","IRIS-1168, IRIS-1167",14,1499979454,23,1525729288,"","",2059,0,The SSM includes a front end virtual machine running an application server with a static IP on Amazon EC2 and F5s for load balancing,"","1. Log into the InTouch VPC and verify that there are two AMI based SSM instances.
2. Run “dig ssmstaging.intouchiris.com”:
    * Verify that the IP in the output matches F5’s IP
3. Run `curl -k https://<IP>/login > /dev/null; echo $?`  where IP is the SSM instance external IP
    * Verify that the previous command returns “0”
","* Dig command should return:

;; ANSWER SECTION:
ssmstaging.intouchiris.com. 60 IN A 216.58.164.xxx
ssmstaging.intouchiris.com. 60 IN A 64.64.204.xxx

* curl command should return '0'","","","",Gateway,"",""
3113708,The SSM service front-end enables the Super Administrator to register gateways,7472,1,9,2,"","IRIS-1197, IRIS-1169",14,1499979980,23,1525805157,"","",2059,0,"","","1. Login as Super admin.
2. Go to the **Gateways** tab.
3. Click the edit button in 404.
4. Disable it using the slider at the bottom and click **Udpate**
5. Edit it again and enable it back.
",The GW **Enabled** status should read *False* when disabled and *True* when enabled.,"","","",Gateway,"",""
3131006,Minimum password requirements for all IRIS system users,7472,1,9,2,"",IRIS-1189,14,1501623685,9,1505758688,"","",2059,0,"The minimum password requirements for all IRIS system users shall include:

* A user password shall include at least 8 characters. (1603396)
* A user password shall include at least three of the following four groups: (1) uppercase letters, (2) lowercase letters, (3) symbols, and (4) numbers. (1603392)
* A user password shall not be identical to the username. (1603394)
* A user password shall be different from the last three passwords. (1603398)","","Verify that the password requirements are enforced when changing a user's password.

","* A user password includes at least 8 characters. (1603396)
* A user password includes at least three of the following four groups: (1) uppercase letters, (2) lowercase letters, (3) symbols, and (4) numbers. (1603392)
* A user password can not be identical to the username. (1603394)
* A user password is different from the last three passwords. (1603398)","","","",Gateway,"",""
3156724,"As a super admin, AAT public key should be sent to all SPs when I enable a gateway",7472,1,9,2,"","IRIS-1268,IRIS-960",9,1503686824,23,1528145719,"","",2059,0,"","","1. Enable a gateway in SSM
2. SSH into the SP servers
3. Run `ls /home/`","After enabling a gateway in SSM, a new user is added to the SP with the gateway's name as the username.","","","",Gateway,"",""
3164161,"When disabling/deleting a gateway in SSM, SP removes that gateway's public key from authorized_keys file",7472,1,9,2,"","IRIS-1269,IRIS-1318",9,1504120378,23,1528145295,"","",2059,0,"","","1. Disable or delete a gateway in SSM
2. SSH into the SP servers
3. Run `ls /home/`","When disabling/deleting a gateway in SSM, the gateway's user is removed from all SP","","","",Gateway,"",""
3268967,As a super admin I want to be warned that deleting a gateway is not reversible,7472,1,9,2,"","IRIS-1548,IRIS-1570",9,1509534106,9,1516191111,"","",2059,0,"","",1. As a super admin go to `Gateways` page,"* There is no buttons to delete gateways
* Super admins can only disable gateways","","","",Gateway,"",""
3296235,SSM should disseminate gateway configuration information to AATs,7472,1,7,2,"","IRIS-1247,IRIS-1418",9,1510866955,9,1510867092,"","",2059,0,"1. When any of the following fields are updated for a gateway in SSM, the changes should be reflected in the configured AAT.
    * name
    * ae_title
    * pacs_viewer_ip
    * pacs_viewer_dns
    * pacs_viewer_username
    * pacs_viewer_password
    * pacs_viewer_port
2. On update, a message informs the user whether the local update and AAT update were successful.
3. If the AAT update fails, the SSM update can still succeed but the user is informed.","","1. Update one or more of the above fields for a gateway in SSM.
2. Cause the AAT update to fail (e.g. kill the AAT server).","1. Log into the configured AAT and verify that those fields were updated.
2. The SSM user sees appropriate error messages.","","","",Gateway,"",""
3423245,As tech support I want to be notified when SSM is unable to communicate with a gateway,7472,1,7,2,"","IRIS-1558,IRIS-1568",9,1517267154,9,1517267319,"","",2059,0,"","","1. Login as a super user
2. Configure a gateway with bad info.
3. Perform a connection test.
4. As a physician, perform a dicom query from website
5. As a physician, perform a dicom query from REST API


Verify that you don't see an error.
Verify that tech support received an email.","* The user does not see an error
* Tech support receives an email (irissupport@intouchhealth.com)","","","",Gateway,"",""
3113710,The SSM processes the accepted work order and support 'PHY' access to view the accepted '3DP' work order data package without expiration in AWS's S3.,7472,1,9,2,"","IRIS-1174, IRIS-1173",14,1499985008,23,1528410355,"","",2059,0,"","","1. Login to AWS, open S3 and go to the `ith-iris-staging` folder.
2. Go to the *Management* tab.
",Verify it has a *30 day garbage collection* lifecycle rule.,"","","",Gateway,"",""
3678317,Splunk logging services for SSM logs,7472,1,7,2,"","IRIS-1496,IRIS-1747",14,1529641497,9,1529671481,"","",2059,0,"A logging service shall be used to ensure that the appropriate logs on the correct IRIS machines are being aggregated so that all logs files on the productions servers and their corresponding logs appear in the Splunk search and the appropriate directories.

* `index=gateway_main`
* `host=production_ssm1-52.8.252.200` (This is ssm1 on our production assets page)
* `hostproduction_ssm2-52.8.199.86` (This is ssm2 on our production assets page)

* Splunk Queries should look like the following:
  * `index='gateway_main' host='<hostname>' <search - see below>`

* Any text entered will be searched for in all logs
  * `source=<asbolute filepath for configuration file>`","","1. Login into Splunk: https://gyppo.intouchreports.com:8000/ using your domain credentials.
2. Go to the search App
3. We will be verifying that the appropriate logs on the correct machines are being aggregated.
4. Enter the queries for each hosdt and verify their log results:
5. Search for logs in:
  * `/var/log/`
  * `/home/ubuntu/<ssm/aat/>/log/`",Verify that all logs file on the productions severs and their corresponding logs appear in the Splunk search and the appropriate directories.,"","","",Gateway,"",""
3046017,The work order 'Order Number' is prepended with 'SEG' so all WOs are identified in the format 'SEG0000XXXX',8177,1,9,2,"","IRIS-538,IRIS-705",9,1493657444,9,1505759025,"","",2059,0,"","",Submit a new work order,The new work order is identified as *SEG0000XXXX*,"","","",Work Order,"",""
3046036,As an admin I can see the ORDER NUMBER in the show user page,8177,1,9,2,"","IRIS-505,IRIS-692",9,1493665974,23,1521142439,"","",2059,0,As an admin I can see the ORDER NUMBER in the show user page,"","1. Go to the users's index page.
2. Click on the eye icon of a user to access the show page. (Use a user with assigned WOs )",There is a **Order Number** column which has the WOs' ID numbers.,"","","",Work Order,"",""
3048149,A technician should not be allowed to upload to a work order they do not own,8177,1,9,2,"","IRIS-585,IRIS-878",9,1493931885,23,1521210304,"","",2059,0,A technician should not be allowed to upload to a work order they do not own,Use a Tech user,"As a Tech user try to upload a segmented study to:

- a. WO owned by the user
- b. WO not owned by the user (Use a WO URL not owned by the tech)","- a. You are allowed to upload the segmented study
- b. Upload is denied","","","",Work Order,"",""
3054639,As a SSM super admin I can delete a Work Order,8177,1,9,2,"","IRIS-800,IRIS-945",9,1494871330,23,1521161392,"","",2059,0,As a SSM super admin I can delete a Work Order,Log in as a super admin user.,"1. Go to the WO page.
2. Click the *Delete* button next to the WO.
3. Confirm the warning.",The WO is deleted,"","","",Work Order,"",""
3055170,Capture all assignments of QCs and Techs. Along with who did the assignment with timestamps,8177,1,9,2,"","IRIS-485,IRIS-668",9,1494891191,9,1505759163,"","",2059,0,As a QC or Tech I have audit information (who did what and when) and revision information in the review JSON,"","1. As an Admin assign a Tech to a WO
2. As an Admin assign a QC to a WO","The review JSON should contain the following attributes:

|||:Name|:Description
||  Timestamp | The time the assignment was made. 
|| Actor | The username of the user who assigned the Tech/QC.
|| Metadata | The username of the user who has been assigned to the work order.
|| Event_Type | 'STUDY_ASSIGNED_TECH' or 'STUDY_ASSIGNED_QC'","","","",Work Order,"",""
3055171,"Each time a new revision is done, the previous revision information is copied over to a new revision",8177,1,9,2,"","IRIS-485,IRIS-669",9,1494891199,9,1505759183,"","",2059,0,"Each time a new revision is done, the previous revision information is copied over to a new revision","",As a Tech upload a new segmented study,The review JSON **Current_Revision** is increased by 1.,"","","",Work Order,"",""
3055172,The current state of the work order is updated in the review json,8177,1,9,2,"","IRIS-485,IRIS-670",9,1494891206,23,1521162067,"","",2059,0,The current state of the work order is updated in the review json,"","1. Create a WO with a Physician account
2. Login with a Super admin and Wait until it is Original Ready.
3. Check the json by clicking the _download JSON_ button, check the current state.
4. Assing a tech.
5. Download the JSON again.",The new state is updated in the review JSON *State*,"","","",Work Order,"",""
3055180,As a seg admin I can edit the CT slice thickness of a work order on the 'View Work Order' page,8177,1,9,2,"","IRIS-466,IRIS-663",9,1494892115,9,1505759207,"","",2059,0,As a seg admin I can edit the CT slice thickness of a work order on the 'View Work Order' page,"","1. Modify the **Slice thickness**
2. Click the **Update** button that appears",The new **Slice thickness** value is saved if the **Update** button is clicked,"","","",Work Order,"",""
3055181,As a super admin I can edit the CT slice thickness of a work order on the 'View Work Order' page,8177,1,9,2,"","IRIS-466,IRIS-664",9,1494892131,23,1521162837,"","",2059,0,As a super admin I can edit the CT slice thickness of a work order on the 'View Work Order' page,"","1. login as a Seg Admin.
2. Go to the WO page, and click the view button on a WO.
3. Modify the **Slice thickness**
4. Click the **Update** button that appears",The new **Slice thickness** value is saved if the **Update** button is clicked,"","","",Work Order,"",""
3055182,"When logged into the web application as a Super Admin, I can edit the delivery date of the work order",8177,1,9,2,"","IRIS-465,IRIS-661",9,1494892256,23,1521163141,"","",2059,0,"When logged into the web application as a Super Admin, I can edit the delivery date of the work order",Login as a Super Admin.,"
1. Go to the WO show page.
2. Add a new **Delivery date**
3. A *date picker* and **Update** button appear",If the **Update** button is clicked the new **Delivery date** is saved.,"","","",Work Order,"",""
3055183,"When logged into the web application as a Segmentation Admin, I can edit the delivery date of the work order",8177,1,9,2,"","IRIS-465,IRIS-662",9,1494892265,23,1521163354,"","",2059,0,"When logged into the web application as an Admin, I can edit the delivery date of the work order",Login as a Seg Admin.,"1. Go to the WO show page.
2. Add a new **Delivery date**
3. A *date picker* and **Update** button appear",If the **Update** button is clicked the new **Delivery date** is saved.,"","","",Work Order,"",""
3055190,"As a Segmentation Admin, I should not see the download link for the 'Final 3D model package' with PHI (for Physicians)",8177,1,9,2,"","IRIS-453,IRIS-612",9,1494892823,9,1511627108,"","",2059,0,"","",As a Segmentation Admin view a work order.,User do not see the download link for the 'Final 3D model package' with PHI (for Physicians) ,"","","",Work Order,"",""
3055191,"As a Segmentation Tech, I should not see the download link for the either the 'Final 3D model package' with PHI (for Physicians)",8177,1,9,2,"","IRIS-453,IRIS-613",9,1494892831,9,1511627106,"","",2059,0,"","",As a Segmentation Tech view a work order.,User do not see the download link for the 'Final 3D model package' with PHI (for Physicians) ,"","","",Work Order,"",""
3055192,"As a Billing Admin, I should not see the download link for the either the 3D package with PHI (for Physicians) or the anonymized 3D package without PHI (for QCs)",8177,1,9,2,"","IRIS-453,IRIS-614",9,1494892837,23,1521213867,"","",2059,0,"As a Billing Admin, I should not see the download link for the either the 3D package with PHI (for Physicians) or the anonymized 3D package without PHI (for QCs)","",As a Billing Admin try to view a work order.,Billing admin Users can't see WO. You'll get an access denied error when trying to access one.,"","","",Work Order,"",""
3055193,See the page for a work order in a responsive manner,8177,1,9,2,"","IRIS-451,IRIS-609",9,1494892959,9,1505759356,"","",2059,0,Any user sees the page for a work order in a responsive manner.,"","1. View a work order
2. Resize the window",The work order's page is displayed in a responsive manner.,"","","",Work Order,"",""
3055194,Fields are grouped by type and easy to read,8177,1,9,2,"","IRIS-451,IRIS-610",9,1494892965,9,1505759391,"","",2059,0,The show work order page displays fields grouped by type and are easy to read,"",View a work order.,"The show work order page should look like the following image:

!(index.php?/attachments/get/83)
","","","",Work Order,"",""
3055195,Fields with too much information are presented in a collapsible panel,8177,1,9,2,"","IRIS-451,IRIS-611",9,1494892972,23,1521214082,"","",2059,0,Fields with too much information in the show work order page are presented in a collapsible panel,"",View a WO as a Tech or Admin.,"The following fields are displayed in collapsible panels:

* Conformance JSON
* Related work orders (only for Tech users)","","","",Work Order,"",""
3061731,Work Order's 'Order Date' is in YYYY-MM-DD format,8177,1,9,2,"","IRIS-399,IRIS-654",9,1494976657,9,1505759443,"","",2059,0,Work Order's 'Order Date' is in YYYY-MM-DD format,"",View a Work Order.,**Order Date** is in **YYYY-MM-DD** format,"","","",Work Order,"",""
3061732,"On the work order page, users sees the study's 'Slice Thickness' in column study with its value extracted from the conformance checker",8177,1,9,2,"","IRIS-398,IRIS-653",9,1494976711,9,1505759517,"","",2059,0,"On the work order page, users sees the study's 'Slice Thickness' in column study with its value extracted from the conformance checker","",Go to the Work Order index page and verify that there is a **Slice Thickness** column.,"There is a **Slice Thickness** column. For each work order, its value is extracted from the conformance checker","","","",Work Order,"",""
3061735,"Logged as a physician user I see Verify, Track and Ready lists in the WO page",8177,1,9,2,"","IRIS-393,IRIS-649",9,1494976990,9,1505759628,"","",2059,0,"Logged as a physician user I see Verify, Track and Ready lists in the WO page","","Go to the WO Index page and verify that physician users see Verify, Track and Ready lists.","The user sees three lists:

1. Verify
2. Track
3. Ready","","","",Work Order,"",""
3061736,"Logged in as a Seg Admin I see Verify, Track and Ready lists in the WO page",8177,1,9,2,"","IRIS-393,IRIS-650",9,1494977003,9,1505759651,"","",2059,0,"Logged in as a Seg Admin I see Verify, Track and Ready lists in the WO page","","Go to the WO Index page and verify that Seg. Admin users see Verify, Track and Ready lists.","The user sees three lists:

1. Verify
2. Track
3. Ready","","","",Work Order,"",""
3062581,"Logged in as a physician user, I cannot see UUID, Study Instance UUID and Segmentation type columns in the WO index page",8177,1,9,2,"","IRIS-390,IRIS-647",9,1495028774,9,1505760143,"","",2059,0,"Logged in as a physician user, I cannot see UUID, Study Instance UUID and Segmentation type columns in the WO index page","",As a physician go to the WO index page,"The following columns are not shown:

- UUID
- Study Instance UUID
- Segmentation type","","","",Work Order,"",""
3062583,"When creating a new work order, a field for notes to the segmentation team called 'Instructions' is on the new work order page",8177,1,9,2,"","IRIS-1220, IRIS-1131",9,1495028898,9,1505760175,"","",2059,0,"When creating a new work order, a field for notes to the segmentation team called 'Instructions' is on the new work order page","","1. As a physician go to the new work order page
2. Verify that there is an **Instruction** text field",The user sees an **Instruction** field in the new work order page.,"","","",Work Order,"",""
3062584,'Anatomy toggles' are named 'Select Segmentation Types' in the Create Work Order page,8177,1,9,2,"","IRIS-385,IRIS-645",9,1495028973,9,1505760215,"","",2059,0,'Anatomy toggles' are named 'Select Segmentation Types' in the Create Work Order page,"","1. As a physician go to the new work order page
2. Verify that the list of toggles is named **Select Segmentation Types**",*Anatomy toggles* are named **Select Segmentation Types**,"","","",Work Order,"",""
3062585,"Patient name and DOB does not look, nor is it editable",8177,1,9,2,"","IRIS-387,IRIS-646",9,1495029046,9,1505760236,"","",2059,0,"Patient name and DOB does not look, nor is it editable","","1. Go to the New Work Order page
2. Verify that Patient Name and DOB fields do not look nor are editable.",Patient Name and DOB fields do not look nor are editable.,"","","",Work Order,"",""
3062593,Dates on all WOs are now displayed in yyyy-mm-dd format,8177,1,9,2,"","IRIS-367,IRIS-637",9,1495029252,9,1505760246,"","",2059,0,Dates on all WOs are now displayed in yyyy-mm-dd format,"","1. Go to Work Order Index page
2. Go to Show Work Order page",Both pages show dates in **YYYY-MM-DD** format.,"","","",Work Order,"",""
3062612,All data in the AWS S3 buckets is encrypted at rest,8177,1,9,2,"","IRIS-357,IRIS-633",9,1495029943,23,1521214397,"","",2059,0,"","","1. Login to Amazon, select US-West Oregon tenant.
2. Go to S3.
3. Go to the IRIS-Staging bucket.
4. Navigate the preporcess, postporcess, qc and package folders, clicking over the packets inside them.
5. A description menu should pop-up, you can check the encryption info there.","Verify that files in preprocess, postprocess, qc and package buckets are encrypted to **AES-256**","","","",Work Order,"",""
3062622,"As an SSM work order, If the gateway through which I will send the information is disabled, then no information will be sent to AAT",8177,1,9,2,"","IRIS-342,IRIS-597",9,1495030494,9,1505760286,"","",2059,0,The SSM shall only communicate with AATs that are enabled. No information shall be sent from the SSM to the AAT until communication is allowed. WO creation is only allowed for enabled gateways,"","1. Disable Gateway A
2. Attempt to submit a Work Order through Gateway A ",Work order creation is only allowed if Gateway A is enabled.,"","","",Work Order,"",""
3062714,QC users shall see 'No action required.' when there is no WO that requires their review/action in their Worklist,8177,1,9,2,"","IRIS-337,IRIS-897",9,1495047077,23,1528233744,"","",2059,0,QC users shall see 'No action required.' when there is no WO that requires their review/action in their Worklist,Have no work orders that require QC action.,"0. Login as a QC
1. Go to the Index Work Orders page
2. Verify that empty lists display **No action required**",QC users see **No action required** when there are no WO that require their action.,"","","",Work Order,"",""
3062715,Seg admins shall see 'No action required.' when there is no WO that requires their review/action in their Worklist,8177,1,9,2,"","IRIS-337,IRIS-898",9,1495047084,9,1505760343,"","",2059,0,Seg admins shall see 'No action required.' when there is no WO that requires their review/action in their Worklist,Have no work orders that require admin action.,"1. Go to the Index Work Orders page
2. Verify that empty lists display No action required",Admin users see **No action required** when there are no WO that require their action.,"","","",Work Order,"",""
3062945,Super admins can assign a Tech when ORIGINAL_READY or SEGMENTED_QC_REJECTED,8177,1,9,2,"",IRIS-939,9,1495133932,9,1505760381,"","",2059,0,Super admins can assign a Tech when ORIGINAL\_READY or SEGMENTED\_QC\_REJECTED,"","As super admin:

1. Assign a Tech user when the WO state is **ORIGINAL\_READY**
2. Assign a Tech user when the WO state is **SEGMENTED\_QC\_REJECTED**
3. Try to assign a Tech user in another WO state","Super admins can only assign Tech users when the WO state is

* ORIGINAL\_READY
* SEGMENTED\_QC\_REJECTED","","","",Work Order,"",""
3062946,Super admins can unassign a Tech when STUDY_ASSIGNED_TECH,8177,1,9,2,"",IRIS-939,9,1495133937,9,1505760381,"","",2059,0,Super admins can unassign a Tech when STUDY\_ASSIGNED\_TECH,"","As super admin:

1. Un-assign a Tech user when the WO state is **STUDY\_ASSIGNED\_TECH**
2. Try to un-assign a Tech user in another WO state",Super admins can unassign a Tech only when the WO state is **STUDY\_ASSIGNED\_TECH**.,"","","",Work Order,"",""
3062947,Super admins can assign a QC when QC_PACKAGE_READY,8177,1,9,2,"",IRIS-939,9,1495133942,9,1505760382,"","",2059,0,Super admins can assign a QC when QC\_PACKAGE\_READY,"","As super admin:

1. Assign a QC user when the WO state is **QC\_PACKAGE\_READY**
2. Try to assign a QC user in another WO state",Super admins can only assign QC users when the WO state is **QC\_PACKAGE\_READY**,"","","",Work Order,"",""
3062948,Super admins can unassign a QC when STUDY_ASSIGNED_QC,8177,1,9,2,"",IRIS-939,9,1495133947,9,1505760382,"","",2059,0,Super admins can unassign a QC when STUDY_ASSIGNED_QC,"","As super admin:

1. Un-assign a QC user when the WO state is **STUDY\_ASSIGNED\_QC**
2. Try to un-assign a QC user in another WO state",Super admins can unassign a QC only when the WO state is **STUDY\_ASSIGNED\_QC**.,"","","",Work Order,"",""
3062950,Segmentation Admins can fail a WO at any time except when the WO is in special state,8177,1,9,2,"","IRIS-328,IRIS-890",9,1495202388,9,1505760405,"","",2059,0,"Segmentation Admins can fail a WO at any time except when the WO is in one of these states: CANCELLED, FAILED, PHYSICIAN_ACCEPTED or PHYSICIAN_REJECTED.","","1. As a segmentation admin try to fail a work when its state is: 

    * CANCELLED
    * FAILED
    * PHYSICIAN\_ACCEPTED
    * PHYSICIAN\_REJECTED.

2. As a segmentation admin try to fail a work when its state is not equal to the ones defined in **(1)**","Segmentation admins can only fail a work when its state is not: 

* CANCELLED
* FAILED
* PHYSICIAN\_ACCEPTED
* PHYSICIAN\_REJECTED.","","","",Work Order,"",""
3062951,Super Admins can fail a WO at any time except when the WO is in a special state,8177,1,9,2,"","IRIS-328,IRIS-891",9,1495202394,9,1505760420,"","",2059,0,"Super Admins can fail a WO at any time except when the WO is in one of these states: CANCELLED, FAILED, PHYSICIAN_ACCEPTED or PHYSICIAN_REJECTED.","","1. As a super admin try to fail a work when its state is: 

    * CANCELLED
    * FAILED
    * PHYSICIAN\_ACCEPTED
    * PHYSICIAN\_REJECTED.

2. As a super admin try to fail a work when its state is not equal to the ones defined in **(1)**","Super admins can only fail a work when its state is not: 

* CANCELLED
* FAILED
* PHYSICIAN\_ACCEPTED
* PHYSICIAN\_REJECTED.","","","",Work Order,"",""
3062960,Clicking the 'View Original Study' button on the work order show page shall launch the PACS Viewer and query/retrieve the patient's original CT from the PACS and display it to the user,8177,1,9,2,"","IRIS-329,IRIS-892",9,1495202885,9,1505760466,"","",2059,0,Clicking the 'View Original Study' button on the work order show page shall launch the PACS Viewer and query/retrieve the patient's original CT from the PACS and display it to the user,"","1. Submit a work order for patient John Doe
2. Go to the Show page for that work order
3. Click the **View Original Study** button",The **View Original Study** button launches PACS Viewer and displays the patient's original CT.,"","","",Work Order,"",""
3062970,WOs in the PHYSICIAN_REJECTED state shall appear on the 'Work Orders' list,8177,1,9,2,"","IRIS-323,IRIS-887",9,1495203055,9,1505760460,"","",2059,0,WOs in the PHYSICIAN\_REJECTED state shall appear on the 'Work Orders' list,Log in as a segmentation admin,"1. Go to the WO Index page
2. Verofy that WOs in the **PHYSICIAN\_REJECTED** state appear on the **Ready** list",WOs in the **PHYSICIAN\_REJECTED** state appear on the **Ready** list,"","","",Work Order,"",""
3062971,WOs in the PHYSICIAN_ACCEPTED state shall appear on the 'Track' list,8177,1,9,2,"","IRIS-323,IRIS-888",9,1495203073,9,1511543482,"","",2059,0,WOs in the PHYSICIAN\_ACCEPTED state shall appear on the 'Track' list,Log in as a segmentation admin,"1. Go to the WO Index page
2. Verify that WOs in the **PHYSICIAN\_ACCEPTED** state appear on the **Track** list",WOs in the **PHYSICIAN\_ACCEPTED** state appear on the **Track** list,"","","",Work Order,"",""
3062984,User rejects a work order and Tech and QC users get removed from the assigned field so that the segmentation admin can assign new users to Tech and QC roles,8177,1,9,2,"","IRIS-326,IRIS-596",9,1495203633,9,1505761463,"","",2059,0,"","","1. Reject a work order 
2. Verify that Tech and QC users get removed from the assigned field
3. Verify that a segmentation admin can assign new users to Tech and QC roles","When a user rejects a work order, Tech and QC users get removed from the assigned field so that the segmentation admin can assign new users to Tech and QC roles","","","",Work Order,"",""
3063029,STUDY_ASSIGNED_QC work orders shall be shown in 'Track' list for Seg Admins,8177,1,9,2,"","IRIS-321,IRIS-886",9,1495207195,9,1511545743,"","",2059,0,"","",Verify that **STUDY\_ASSIGNED\_QC** work orders are shown in *Track* list for Seg Admins,**STUDY\_ASSIGNED\_QC** work orders are shown in *Track* list for Seg Admins,"","","",Work Order,"",""
3063030,As a user I can see time and date when the work order was created in the show WOs page,8177,1,9,2,"","IRIS-297,IRIS-880",9,1495207267,9,1505761515,"","",2059,0,"","",Verify that as a user I can see time and date when the work order was created in the show WOs page,As a user I can see time and date when the work order was created in the show WOs page,"","","",Work Order,"",""
3063031,When an Admin re-assigns a tech the WO state should be set to 'STUDY_ASSIGNED_TECH',8177,1,9,2,"","IRIS-304,IRIS-881",9,1495207310,9,1505761517,"","",2059,0,"","",Verify that when an Admin re-assigns a tech the WO state should be set to **STUDY\_ASSIGNED\_TECH**,When an Admin re-assigns a tech the WO state should be set to **STUDY\_ASSIGNED\_TECH**,"","","",Work Order,"",""
3063032,If a QC rejects a WO the admin can re-assign the WO to a new or same Tech,8177,1,9,2,"","IRIS-304,IRIS-882",9,1495207315,23,1528309099,"","",2059,0,"","","1. As a QC reject a WO
2. As an admin re-assign the WO to a new or same Tech.",If a QC rejects a WO the admin can re-assign the WO to a new or same Tech,"","","",Work Order,"",""
3063136,As a super admin I am able to download the review json of a work order,8177,1,9,2,"","IRIS-291,IRIS-871",9,1495222120,23,1524768203,"","",2059,0,"","","1. Login as Super admin.
2. Open a WO.
3. Click the **Download JSON** yellow button.",As a super admin I am able to download the review json of a work order,"","","",Work Order,"",""
3064344,As a QC I have the ability to download a 3D anonymized package for review,8177,1,9,2,"","IRIS-249,IRIS-841",9,1495224161,23,1524695516,"","",2059,0,"The packages contains the following files (without PHI):
    * Original DICOM (without PHI).
    * Segmented DICOM (without PHI).
    * 3D models (meshes).
 The packages are stored in S3","","1. Login as QC
2. Go to an assigned to you WO.
3. Click the 'QC package link' download button.","The QC user has the ability to download a 3D anonymized package for review, package should download.
","","","",Work Order,"",""
3046046,As seg admin or super admin I can unassign QC,8177,1,9,2,"","IRIS-497,IRIS-682",9,1493667286,9,1505761227,"","",2059,0,"On the Super Admin's or Segmentation Admin's view 'Work Order' page, when the button next to the **Assigned QC** is clicked while in the STUDY\_ASSIGNED\_QC state, the currently assigned QC will be removed from the work order and the WO is moved to the QC\_PACKAGE\_READY state. An admin can now re-assign a QC to the work order.","","1. As a Super Admin or Segmentation Admin go to 'Work Order Show' page of a STUDY\_ASSIGNED\_QC WO
2. Verify that there is a the button next to the *Assigned QC* labelled **Unassign qc_username**
3. Click that button while the WO's state is STUDY\_ASSIGNED\_QC
4. Verify that the currently assigned QC is removed from the work order 
5. Verify that the WO is moved to the QC\_PACKAGE\_READY state. 
6. Verify that an admin can re-assign a QC to the work order.",* An admin can re-assign a QC to the work order.,"","","",Work Order,"",""
3046047,As and admin or segment admin I can unassign Tech,8177,1,9,2,"","IRIS-496,IRIS-681",9,1493667823,9,1505761330,"","",2059,0,"On the Super Admin's or Segmentation Admin's view 'Work Order' page, when the button next to the 'Assigned Tech' is clicked while in the STUDY\_ASSIGNED\_TECH state, the currently assigned tech will be removed from the work order and the WO is moved to the ORIGINAL\_READY state. 
An admin can re-assign a segmentation tech to the work order.","","1. As a Super Admin or Segmentation Admin go to 'Work Order Show' page of a STUDY\_ASSIGNED\_TECH
2. Verify that there is a the button next to the *Assigned Tech* labelled **Unassign tech_username**
3. Click that button while the WO's state is STUDY\_ASSIGNED\_TECH
4. Verify that the currently assigned Tech is removed from the work order 
5. Verify that the WO is moved to the ORIGINAL\_READY state. 
6. Verify that an admin can re-assign a Tech to the work order.",An admin can re-assign a segmentation tech to the work order.,"","","",Work Order,"",""
3046731,QC who is not assigned to work order cannot reject the work order,8177,1,9,2,"","IRIS-544,IRIS-616",9,1493755906,23,1524609252,"","",2059,0,"","","1. Login as QC.
2. Try to fail a WO that is not assigned to you by pasting `<base URL>/work_orders/fail/{WO id}` in the browser.
",An 'Access Denied' error should display and you should be redirected to */work_orders*,"","","",Work Order,"",""
3046732,QC who is assigned to work order can reject the work order,8177,1,9,2,"","IRIS-544,IRIS-615",9,1493755914,23,1524609571,"","",2059,0,"","","1. Login as QC
2. Open a WO that is assigned to you.
3. Click the 'Reject Work Order' button.
4. Input a reason and submit.","You should be redirected to */work_orders*
An error message should display saying 'Work order has been rejected.'
WO state should change to SEGMENTED_QC_REJECTED","","","",Work Order,"",""
3046733,QC who is not assigned to work order cannot view reject page,8177,1,9,2,"","IRIS-544,IRIS-867",9,1493755922,23,1524611987,"","",2059,0,"","","1. Login as QC.
2. Try to access the fail page for a WO that is not assigned to you by pasting `<base URL>/work_orders/fail/{WO id}` in the browser.",An 'Access Denied' error should display and you should be redirected to */work_orders*,"","","",Work Order,"",""
3046734,QC who is assigned to work order can view reject page,8177,1,9,2,"","IRIS-544,IRIS-868",9,1493755928,23,1524611681,"","",2059,0,"","","1. Login as QC
2. Open a WO that is assigned to you.
3. Click the 'Reject Work Order' button.
",You should be redirected to the */fail/{WO id}* page.,"","","",Work Order,"",""
3046735,QC who is not assigned to work order cannot approve the work order,8177,1,9,2,"","IRIS-544,IRIS-869",9,1493755945,23,1524611427,"","",2059,0,"","","1. Login as QC.
2. Try to fail a WO that is not assigned to you by pasting `<base URL>/work_orders/approve/{WO id}` in the browser.",An 'Access Denied' error should display and you should be redirected to */work_orders*,"","","",Work Order,"",""
3046736,QC who is assigned to work order can approve the work order,8177,1,9,2,"","IRIS-544,IRIS-870",9,1493755955,23,1524611562,"","",2059,0,"","","1. Login as QC
2. Open a WO that is assigned to you.
3. Click the 'Approve Work Order' button.
4. Input a reason and submit.
",WO state should change to SEGMENTED_QC_APPROVED,"","","",Work Order,"",""
3046737,QC who is not assigned to work order cannot view approve page,8177,1,9,2,"","IRIS-544,IRIS-872",9,1493755963,23,1524611971,"","",2059,0,"","","1. Login as QC.
2. Try to access the approve page for a WO that is not assigned to you by pasting `<base URL>/work_orders/approve/{WO id}` in the browser.",An 'Access Denied' error should display and you should be redirected to */work_orders*,"","","",Work Order,"",""
3046738,QC who is assigned to work order can view approve page,8177,1,9,2,"","IRIS-544,IRIS-873",9,1493755971,23,1524611685,"","",2059,0,"","","1. Login as QC
2. Open a WO that is assigned to you.
3. Click the 'Approve Work Order' button.
",You should be redirected to the */approve/{WO id}* page.,"","","",Work Order,"",""
3064351,As a physician I can toggle on and off anatomical structures,8177,1,9,2,"","IRIS-260,IRIS-850",9,1495228154,23,1524612944,"","",2059,0,"","","1. Login as physician.
2. Search for patient *Juan Perez*, and click on *create order*.
3. In the new work order page, toggle some of the **Segmentation Types** sliders off.
4. Click *create*.
",WO should be created.,"","","",Work Order,"",""
3064355,As a physician I can cancel a work order at any time and comment as to why the order was cancelled,8177,1,9,2,"","IRIS-257,IRIS-847",9,1495232438,23,1524692621,"","",2059,0,"","","1. Login as Physician.
2. Start a new WO.
3. Open the newly created WO.
4. press the cancel WO button.
5. Place a comment and submit.",Verify that as a physician I can cancel a work order at any time and comment as to why the order was cancelled.,"","","",Work Order,"",""
3064357,As a Segmentation Tech I can download the review JSON,8177,1,9,2,"","IRIS-254,IRIS-844",9,1495232547,23,1524764177,"","",2059,0,"","","1. Login as a Tech.
2. Open an assigned to you WO.
3. Click the yellow download button next to the **Review JSON** label. ",Verify that as a Segmentation Tech I have a link to download the review JSON,"","","",Work Order,"",""
3064358,As an Seg Admin I can download QC review JSON,8177,1,9,2,"","IRIS-253,IRIS-843",9,1495232601,23,1524772566,"","",2059,0,"","","1. Login as Seg Admin.
2. Open a WO.
3. Click the **Download JSON** yellow button",Verify that as an Seg Admin I see a link to download QC review JSON,"","","",Work Order,"",""
3064362,As a user I have the comment box at the top of all comments so I can see the latest comment if there are over a page's worth already,8177,1,9,2,"","IRIS-242,IRIS-837",9,1495232927,23,1524770892,"","",2059,0,"","","1. Login as Seg Admin.
2. Open a WO that has many comments.
","1. Verify that WorkOrder show page has an add comment button at the top of all comments.
2. Verify that users can see the latest comment at the top.","","","",Work Order,"",""
3064365,Additional states are added to make the seg admin verify Tech and QC work,8177,1,9,2,"","IRIS-250,IRIS-912",9,1495233192,9,1505759931,"","",2059,0,"","","Verify that Admin users can take action in the following states after Tech and QC work:

- QC\_PACKAGE\_READY
- SEGMENTED\_QC\_REJECTED
- SEGMENTED\_QC\_APPROVED","Admin takes action in the following states after Tech and QC work:

- QC\_PACKAGE\_READY
- SEGMENTED\_QC\_REJECTED
- SEGMENTED\_QC\_APPROVED","","","",Work Order,"",""
3064366,As a SSM user I do not see the 'Series instance uuid' column displayed in Work Orders page,8177,1,9,2,"","IRIS-239,IRIS-834",9,1495233407,23,1524766872,"","",2059,0,"","","1. Login with every role.
2. Go to the */work_orders* page.",Verify that users do not see the 'Series instance uuid' column displayed in Work Orders page,"","","",Work Order,"",""
3064367,As an admin I can see that the state of a work order goes to STUDY_ASSIGNED_TECH when assigning a tech.,8177,1,9,2,"","IRIS-240,IRIS-835",9,1495233450,23,1524676552,"","",2059,0,"","","1. Login as an admin.
2. Open an ORIGINAL_READY WO.
3. Assign a tech user using the 'assign tech' button.",Verify that the state of a work order goes to STUDY\_ASSIGNED\_TECH when assigning a tech,"","","",Work Order,"",""
3064379,As a seg admin I should see failed or cancelled work orders separated form the ones that require some action,8177,1,9,2,"","IRIS-228,IRIS-755",9,1495235196,23,1524700908,"","",2059,0,"","","1. Login as Seg Admin.
2. Go to */work_orders*.",Verify that as a seg admin I should see failed or cancelled work orders separated form the ones that require some action,"","","",Work Order,"",""
3064380,QC sees a button labeled as 'Approve' (not Accept),8177,1,9,2,"","IRIS-229,IRIS-756",9,1495235284,23,1524779653,"","",2059,0,"","","1. Login as QC.
2. Open an assigned to you WO.",A QC sees a button labeled as 'Approve' (not Accept),"","","",Work Order,"",""
3064383,As an admin I don't have the option to assign techs or QC if the work order is failed or cancelled,8177,1,9,2,"","IRIS-227,IRIS-754",9,1495235678,23,1524851853,"","",2059,0,"","Cancel a WO.
Fail a WO.","1. Login as a seg admin.
2. Open a cancelled WO.
3. Try to assign QC and/or Tech.
4. Open a failed WO.
5. Try to assign QC and/or Tech.",Verify that as an admin I do not have the option to assign techs or QC if the work order is failed or cancelled,"","","",Work Order,"",""
3064384,As a seg admin I am not able to assign a tech or a QC by URL,8177,1,9,2,"","IRIS-224,IRIS-751",9,1495235724,23,1528320462,"","",2059,0,"","","1. Login as Super admin.
2. Paste `https://ssmstaging.intouchiris.com/render_assign_tech/<wo id>` in the broser URL field and hit enter
* Use a Work Order that is not ready to assign a Tech.
3. Paste `https://ssmstaging.intouchiris.com/render_assign_qc/<wo id>` in the broser URL field and hit enter
* Use a Work Order that is not ready to assign a QA.",You should get an access denied error.,"","","",Work Order,"",""
3064385,Tech users can only upload valid filenames (uuid + '.zip'. Other filenames are not allowed.),8177,1,9,2,"","IRIS-225,IRIS-752",9,1495235820,23,1524778363,"","",2059,0,Tech users can only upload valid filenames (uuid + '.zip'. Other filenames are not allowed.),"","1. Login as a Tech
2. Open an assigned to you WO.
3. Try to upload an invalid file (Tech users can only upload valid filenames, 'uuid' + '.zip'. Other filenames are not allowed).",A browser error should display saying *Invalid file name. Should be <UUID>.zip*,"","","",Work Order,"",""
3064386,As a physician user I am not able to see the segmented study,8177,1,9,2,"","IRIS-223,IRIS-831",9,1495236065,23,1524693542,"","",2059,0,"","","1. Login as Physician.
2. Open a FINAL_DOWNLOAD_READY WO.","Verify that as a physician user I am not able to see the segmented study, there should be no download link available.","","","",Work Order,"",""
3064390,Tech users cannot fail WO,8177,1,9,2,"","IRIS-217,IRIS-827",9,1495240107,9,1513716699,"","",2059,0,"","","1. Login as a Tech user
2. View a Work Order",Tech users do not see the `Fail Work Order` button,"","","",Work Order,"",""
3064393,As an admin I should not be able to see the patient name or date of birth of a work order in the index page,8177,1,9,2,"","IRIS-215,IRIS-826",9,1495475179,9,1511678620,"","",2059,0,"","","1. Login as a segmentation admin
2. Go to `Work Orders` page",Patient's name and DOB are not displayed in the WO index page,"","","",Work Order,"",""
3064394,As a seg admin I should only be able to assign a tech once the original files are ready for download,8177,1,9,2,"","IRIS-208,IRIS-823",9,1495475234,23,1524700228,"","",2059,0,"","","1. Login as Physician and start a new WO.
2. Login as Seg Admin, open that WO and try to assign a Tech before it reaches the ORIGINAL_READY state.",You shouldn't be able to assign a tech before ORIGINAL_READY state.,"","","",Work Order,"",""
3064395,As a seg admin I should only be able to assign a QC once segmentations have been uploaded,8177,1,9,2,"","IRIS-208,IRIS-824",9,1495475242,23,1528391976,"","",2059,0,"","","1. Login as Seg Admin
2. Open any WO which is not in QC_PACKAGE_READY state.
3. Check you cannot assign a QC.
4. Open a QC_PACKAGE_READY WO.
5. Check you now can assign a QC.",Verify that as a seg admin I should only be able to assign a QC once segmentations have been uploaded,"","","",Work Order,"",""
3064484,As a seg admin I can see the results of the conformance checker,8177,1,9,2,"","IRIS-206,IRIS-821",9,1495476538,23,1524699052,"","",2059,0,"",As a Physician start a WO for patient *Musterman Max*,"1. Login as Seg Admin
2. Open the Failed WO from *Musterman Max*
3. Check that the error shows *Study did not pass conformance check.* ","1. Verify that as a seg admin I can see the results of the conformance checker.
2. Verify that there is a collapsible panel labelled **Conformance JSON**","","","",Work Order,"",""
3064500,As a Tech user I can access a work order that is assigned to me,8177,1,9,2,"","IRIS-175,IRIS-805",9,1495481988,23,1524768433,"","",2059,0,"","","1. Login as a Tech.
2. Open an assigned to you WO.",As a Tech user I can access a work order that is assigned to me,"","","",Work Order,"",""
3064502,As a QC user I can not see unassigned work orders by modifying the URL,8177,1,9,2,"","IRIS-180,IRIS-808",9,1495482078,9,1505839770,"","",2059,0,"","",Verify that as a QC user I can not see unassigned work orders by modifying the URL ('/work_orders/X' where X is a WO the QC user does not own).,As a QC user I can not see unassigned work orders by modifying the URL,"","","",Work Order,"",""
3064503,"As a QC and Administrator, once I have failed a work order, that state should get pushed back to the correct AAT",8177,1,9,2,"","IRIS-191,IRIS-809",9,1495482139,23,1524694513,"","",2059,0,"","","1. As a QC and Administrator fail a work order


",Verify that the state gets pushed back to the correct AAT,"","","",Work Order,"",""
3064505,As a tech user I have a Link to past work orders to the same Study Instance UUID,8177,1,9,2,"","IRIS-156,IRIS-749",9,1495482260,23,1524768583,"","",2059,0,"","","1. Login as a Tech.
2. Open an assigned to you WO.
","1. Verify that as a tech user I have links to past work orders to the same Study Instance UUID
2. Verify that there is a collapsible panel labelled **Related Work Orders**","","","",Work Order,"",""
3064507,"As a QC and seg admin, I do not see accept or fail options if the work order has already been accepted or failed",8177,1,9,2,"","IRIS-163,IRIS-802",9,1495482343,23,1524701373,"","",2059,0,"","","1. Login as QC
2. Open an assigned to you WO.
3. Reject it.
4. Open it again and check if you see the reject o approve buttons. Also check it with a Seg Admin account.
5. Open another assigned to you WO.
6. Approve it.
7. Open it again and check if you see the reject o approve buttons. Also check it with a Seg Admin account.","As a QC and seg admin, I do not see accept or fail options if the work order has already been accepted or failed","","","",Work Order,"",""
3065311,As a QC user I am able to log on and see all work orders assigned to me,8177,1,9,2,"","IRIS-124,IRIS-782",9,1495490281,9,1505840085,"","",2059,0,"","",Verify that as a QC user I am able to log on and see all work orders assigned to me,"As a QC user I am able to log on and see all work orders assigned to me
","","","",Work Order,"",""
3065312,As a QC I am able to download the anonymized original,8177,1,9,2,"","IRIS-125,IRIS-783",9,1495490360,23,1524694768,"","",2059,0,"","","1. Login as QC
2. Go to an assigned to you WO.
3. Click the 'Original Dicom' download button.",As a QC I am able to download the anonymized original,"","","",Work Order,"",""
3065313,As a QC I am able to download segmented scans of a work order,8177,1,9,2,"","IRIS-125,IRIS-784",9,1495490377,23,1524694678,"","",2059,0,"","","1. Login as QC
2. Go to an assigned to you WO.
3. Click the 'Segmented study link' download button.",As a QC I am able to download segmented scans of a work order,"","","",Work Order,"",""
3065314,As a QC I am able to accept a segmentation job and comment to describe the decision on a work order,8177,1,9,2,"","IRIS-126,IRIS-785",9,1495493410,23,1528408217,"","",2059,0,"","","1. Login as a QC 
2. Open a WO assigned to you
2. Click the **Approve Work Order** button 
3. In the  */approve* page,  input a comment and submit.",Verify you are able to accept a segmentation job and comment to describe the decision on a work order,"","","",Work Order,"",""
3065315,As a QC I am able to fail a segmentation job and comment to describe the decision on a work order,8177,1,9,2,"","IRIS-126,IRIS-786",9,1495493427,23,1524695147,"","",2059,0,"","","1. Login as QC.
2. Open an assigned to you WO.
3. Click the **Reject Work Order** button.
4. Enter a reason and submit.","1. Verify that as a QC I am able to reject a segmentation job and comment to describe the decision on a work order
2. Verify that the **Reject Work Order** button takes the user to a page where a comment can be submitted","","","",Work Order,"",""
3065316,"As a QC, once I have accepted a work order, that scan is pushed back to the correct AAT",8177,1,9,2,"","IRIS-127,IRIS-787",9,1495493530,9,1505840087,"","",2059,0,"","","1. As a QC accept a work order
2. Verify that the scan is pushed back to the correct AAT","As a QC, once I have accepted a work order, that scan is pushed back to the correct AAT","","","",Work Order,"",""
3065319,As a seg administrator I can see see all work orders that are unassigned,8177,1,9,2,"","IRIS-113,IRIS-772",9,1495493738,23,1524616480,"","",2059,0,"","","1. Login as Seg Admin
2. Check the *Verify* list in the */work_orders* page",Verify that as a seg administrator I can see see all work orders that are unassigned,"","","",Work Order,"",""
3065320,As a seg administrator I can assign a tech to a work order,8177,1,9,2,"","IRIS-114,IRIS-773",9,1495493781,23,1524700781,"","",2059,0,"","","1. Login as Seg Admin.
2. Open an _ORIGINAL\_READY_ WO
3. Click the *Assign Tech* button.
4. Select tech and submit.",Verify that as a seg administrator I can assign a tech to a work order when the state is _ORIGINAL\_READY_,"","","",Work Order,"",""
3065321,As a seg administrator I can see all the work orders assigned to a specific tech,8177,1,9,2,"","IRIS-115,IRIS-774",9,1495493829,23,1524616270,"","",2059,0,"","","1. As a seg administrator go to Users
2. Choose a Tech user and click the Show button
",Verify that all the work orders assigned to a specific tech are listed,"","","",Work Order,"",""
3065322,As an seg administrator I can comment on a work order,8177,1,9,2,"","IRIS-116,IRIS-775",9,1495493875,23,1524772640,"","",2059,0,"","","1. Login as Seg Admin.
2. Open a WO.
3. Click the **Add Comment** button at the bottom of the page.
4. Write comment and submit.",As an seg administrator I can comment on a work order,"","","",Work Order,"",""
3065323,As a seg administrator I can fail a work order and comment on it the reason,8177,1,9,2,"","IRIS-117,IRIS-776",9,1495493917,23,1524763620,"","",2059,0,"","","1. Login as Seg Admin
2. Open an ORIGINAL_READY WO.
3. Click the **Fail Work Order** button.
4. Write a reason and submit.",Verify that as a seg administrator I can fail a work order and comment on it the reason,"","","",Work Order,"",""
3065326,As a Tech I should be able to comment on a work order,8177,1,9,2,"","IRIS-121,IRIS-745",9,1495494216,23,1524700495,"","",2059,0,"","","1. Login as a Tech
2. Open an assigned to you WO.
3. Press the *Add Comment* button at the bottom.
4. Write comment and submit.",As a Tech I should be able to comment on a work order,"","","",Work Order,"",""
3065329,As a user I am able to page through work orders I have created,8177,1,9,2,"","IRIS-97,IRIS-741",9,1495496504,23,1524770653,"","",2059,0,"",There should be more than 12 WOs created.,"1. Login as any user.
2. Go to */work_orders*.
3. Change the page by clicking *next* at the bottom of the page.",As a user I am able to page through work orders I have created,"","","",Work Order,"",""
3065330,As a tech I want to download an original study associated with a work order,8177,1,9,2,"","IRIS-98,IRIS-742",9,1495496601,23,1524700596,"","",2059,0,"","","1. Login as Tech
2. Go to an assigned to you WO.
3. Click the 'Original dicom' download button.",A tech can download an original study associated with a work order,"","","",Work Order,"",""
3065331,As a tech I can upload a segmented study to a work order,8177,1,9,2,"","IRIS-99,IRIS-743",9,1495496641,23,1524700351,"","",2059,0,"","","1. Login as a Tech
2. Open an assigned to you WO.
1. Verify that there is a **Upload segmented study** button that lets you upload a segmented study.
2. Upload a file with an invalid UUID or file format (not zip)","1. As a tech I can upload a segmented study to a work order
2. The file is not uploaded if the filename is not correct (invalid UUID or/and incorrect file extension)","","","",Work Order,"",""
3065332,"As a SSM user after new work order is created in the SSM, I have the work order created in the correct AAT",8177,1,9,2,"","IRIS-95,IRIS-739",9,1495496744,9,1505841138,"","",2059,0,"","","1. Submit a new work order in the SSM
2. Verify that the work order is created in the correct AAT","As a SSM user after new work order is created in the SSM, I have the work order created in the correct AAT","","","",Work Order,"",""
3065333,As a SSM user I know from which gateway a study was selected from in order to start a work order,8177,1,9,2,"","IRIS-96,IRIS-740",9,1495496834,23,1524768140,"","",2059,0,"","","1. Login as any user.
2. Open a WO.
",Verify you can see the GW name from which the WO was ordered next to the **Gateway Name** label.,"","","",Work Order,"",""
3065334,As a Tech user When a segmented study is uploaded the AAT is updated on the status of the work order,8177,1,9,2,"","IRIS-100,IRIS-744",9,1495496890,9,1505841139,"","",2059,0,"","","1. As a Tech user  upload a segmented study
2. Verify that the AAT is updated on the status of the work order",As a Tech user When a segmented study is uploaded the AAT is updated on the status of the work order,"","","",Work Order,"",""
3065337,As a physician user I can to see existing work orders I have submitted and their current status,8177,1,9,2,"","IRIS-54,IRIS-720",9,1495497393,23,1524694160,"","",2059,0,"","","1. Login as Physician.
2. Go to */work_orders* page.",Verify that a list of previous submitted WOs is present.,"","","",Work Order,"",""
3065344,As an SSM user I can encrypt patient name and patient dob that is stored with the work order,8177,1,9,2,"","IRIS-90,IRIS-737",9,1495498695,23,1524865595,"","",2059,0,"","","1. ssh into SSM staging.
2. Open rails console.
3. run *WorkOrder.last*",Verify that patient name and patient dob is stored encrypted,"","","",Work Order,"",""
3069323,Link a program/gateway to a work order upon creation,8177,1,9,2,"","IRIS-87,IRIS-768",9,1495666565,23,1524852052,"","",2059,0,"","","1. As a Phys, create a WO.
2. Login as an Admin.
3. Open the created WO.
4. Check labels *Program Name*, *Gateway Name*","Verify that a program/gateway is linked to a work order upon creation
Verify that the Work Order Show page displays program and gateway name","","","",Work Order,"",""
3069325,As an SSM user I can have a web API that allows an AAT to update the status of a work order,8177,1,9,2,"","IRIS-65,IRIS-729",9,1495666762,23,1524865748,"","",2059,0,"","","1. Start a new WO with a physician user.
2. Login with an admin user and open the above WO.
2. After around 5 minutes check if the state has changed by refreshing the page.",As an SSM user I can have a web API that allows an AAT to update the status of a work order,"","","",Work Order,"",""
3070208,"Show download button for original dicom, if the work order is in the correct state",8177,1,9,2,"","IRIS-137,IRIS-789",9,1495760147,23,1528409242,"","",2059,0,"",Start a new WO as a physician.,"1. Login as Super User
2. Open the above mentioned WO. It should be in INIT state, or ORIGINAL_PROCESSING
3. Wait for it to be in ORIGINAL_READY state.
4. Refresh page and check if the *Original dicom* download button appears.","There is a download button for original dicom, if the work order is in the correct state","","","",Work Order,"",""
3070209,"Show download button for segmented dicom, if the work order is in the correct state",8177,1,9,2,"","IRIS-137,IRIS-790",9,1495760153,23,1524779106,"","",2059,0,"",Start a new WO as a Physician,"1. Login as Super User
2. Open the above mentioned WO. It should be in INIT state, or ORIGINAL_PROCESSING
3. Wait for it to be in ORIGINAL_READY state.
4. Upload the segmented study.
5. Wait for it to be in SEGMENTED_UPLOADED state and refresh the page.","Verify that there is a download button for segmented dicom, if the work order is in the correct state","","","",Work Order,"",""
3070210,"Show download button for QC package, if the work order is in the correct state",8177,1,9,2,"","IRIS-137,IRIS-791",9,1495760159,23,1524779365,"","",2059,0,"",Start a new WO as a Physician.,"1. Login as Super User
2. Open the above mentioned WO. It should be in INIT state, or ORIGINAL_PROCESSING
3. Wait for it to be in ORIGINAL_READY state.
4. Upload the segmented study.
5. Wait for it to be in QC_PACKAGE_READY state and refresh the page.
","There is a download button for QC package, if the work order is in the correct state","","","",Work Order,"",""
3064346,As a QC I can see and add comments from WO I am assigned,8177,1,9,2,"","IRIS-277,IRIS-860",9,1495227259,23,1524695347,"","",2059,0,"","","1. Login as QC
2. Go to an assigned to you WO.
3.  Click the **Add Comment** button at the bottom of the page.
4. Add a comment and submit.
5. Scroll down again and check that the comment is there.
",Verify that as a QC I can see and add comments from WO I am assigned,"","","",Work Order,"",""
3085047,As a Tech user I see a worklist that shows the WOs that requires my action,8177,1,9,2,"","IRIS-338,IRIS-1079",9,1497367481,9,1511680025,"","",2059,0,"As a Tech user I see a worklist that shows the WOs that requires my action.
The WO list shows WOs which state is STUDY_ASSIGNED_TECH. 
When the list is empty it shows 'No action required.'","","1. Login as a Tech user
2. Go to Work Orders page","1. As a Tech user I see a worklist that shows the WOs that requires my action
2. When the list is empty it shows `No action required.`","","","",Work Order,"",""
3099702,Techs should only be allowed to upload from web when state is STUDY_ASSIGNED_TECH,8177,1,9,2,"","IRIS-1128,IRIS-1134",9,1498694470,23,1524776170,"","",2059,0,"","","1. Login as a Tech.
2. Open an WO that is not in STUDY\_ASSIGNED\_TECH state.
3. Try to upload a segmented study.
4. Open a WO  that is in STUDY\_ASSIGNED\_TECH state.
5. Try to upload a segmented study.",Verify that Techs are only allowed to upload from web when state is STUDY\_ASSIGNED\_TECH,"","","",Work Order,"",""
3138691,As a user I see InTouch branding on expired PACS viewer links,8177,1,9,2,"","IRIS-1244,IRIS-1278",9,1502479167,23,1524771326,"","",2059,0,"","","1. Login as Physician.
2. Search for *Juan Perez* patient.
3. Click **View Study**
4. When the PACS page opens edit the **expiry=1524772892** value on the URL in the browser address bar, by erasing the last number. Hit enter after that.",Verify that as a user I see InTouch branding on expired PACS viewer links,"","","",Work Order,"",""
3155128,As a user I see relative time as to when the work order was created in show page,8177,1,9,2,"","IRIS-1290,IRIS-1304",9,1503578963,9,1505841296,"","",2059,0,"","","Verify that as a user I see relative time as to when the work order was created in show page
Verify that the **Created at** field shows the following format for relative time: _2017-09-19 (less than a minute ago)_",As a user I see relative time as to when the work order was created in show page,"","","",Work Order,"",""
3173132,The SSM manages the workflow of Intuitive Surgical's,8177,1,9,2,"",IRIS-1175,9,1504663446,9,1505841320,"","",2059,0,"!(index.php?/attachments/get/84)
","",Verify SSM follows the attached workflow.,SSM follows the attached workflow.,"","","",Work Order,"",""
3335441,As an admin or super admin I can send a work order back to ORIGINAL_READY,8177,1,9,2,"","IRIS-1476,IRIS-1483",9,1513114369,9,1513114887,"","",2059,0,"","","1. Login as a Super or Segmentation admin user
2. View a WO in `QC_PACKAGE_READY` state
3. Click the `Reset Work Order` button
4. View a WO in a different state than `QC_PACKAGE_READY`","* If the WO is in `QC_PACKAGE_READY` state:
    * The user sees the `Reset Work Order` button
    * The WO is updated to `ORIGINAL_READY` state
    * A new event (`ORIGINAL_READY`) is added to the review json
    * Tech user id are removed from the WO
* If the WO is not in `QC_PACKAGE_READY` state:
    * The user do not see the `Reset Work Order` button and cannot perform the `reset` action","","","",Work Order,"",""
3435707,As a super admin I want the ability to cancel a work order,8177,1,7,2,"","IRIS-1598,IRIS-1603",9,1517837379,9,1517837678,"","",2059,0,"","","1. Log in to SSM as a super admin.
2. Visit the show page of work orders in various states.
3. Verify that the cancel button works as expected (same as physicians).","* The cancel button IS present for work orders in these states:
    * _INIT_
    * _ORIGINAL\_PROCESSING_
    * _ORIGINAL\_READY_
    * _STUDY\_ASSIGNED\_TECH_
    * _SEGMENTED\_UPLOADED_
    * _QC\_PACKAGE\_PROCESSING_
    * _QC\_PACKAGE\_READY_
    * _STUDY\_ASSIGNED\_QC_
    * _SEGMENTED\_QC\_REJECTED_
    * _SEGMENTED\_QC\_APPROVED_
    * _ADMIN\_APPROVED_
    * _FINAL\_DOWNLOAD\_PROCESSING_
    * _FINAL\_DOWNLOAD\_READY_
* The cancel button IS NOT present for work orders in these states:
    * _PHYSICIAN\_REJECTED_
    * _PHYSICIAN\_ACCEPTED_
    * _CANCELLED_
    * _FAILED_
    * _COMPLETED_
* The Cancel button moves the WO to _CANCELLED_ state.","","","",Work Order,"",""
3131997,Physician 'PHY' access and execute functions via the Web application,8177,1,9,2,"","IRIS-1241, IRIS-1242",14,1501710268,9,1521143296,"","",2059,0,"The SSM shall allow the 'PHY' to access and execute the following functions via the Web application:

1. Login to the application.
2. Search for 'OP’ DICOM studies by patient. 
3. View a selected 'OP' DICOM study.
4. Submit a work order for an ‘OP’ DICOM study. 
5. Add comments to the work order before submission.","",Verify that Physician users can perform the actions described above.,Physician users can perform the actions described above.,"","","",Work Order,"",""
3131999,Detect connections from unauthorized IPs and return a message to the user saying 'Invalid IP.',8178,1,9,2,"","IRIS-963, IRIS-1657",14,1501711905,23,1520031268,"","",2059,0,"The SSM shall have a mechanism to detect connections from unauthorized IPs and return a message to the user saying 'Invalid IP.'

* Web front-end access for super admin shall only be allowed for connections from within ISI corporate network.
* Web front-end access for segmentation administrator shall only be allowed for connections from within ISI corporate network.
","","1. Access the Web front-end from outside ISI corporate network.
",The SSM returns a message saying **Invalid IP.**,"","","",Users,"",""
3062710,The new password shall be immediately enabled for logging in,10843,1,9,2,"","IRIS-348,IRIS-910",9,1495046821,23,1520288565,"","",2059,0,"","","1. On the login page, click the 'Don't remember your password?' button under the password field.
2. The user shall enter their email into the dialog/page and receive an email with a link to to reset their password.
3. The user shall enter their new password twice and be taken to the login page/dialog after completing the password reset.
4. Login with the new password.",The user should successfully login.,"","","",Users > General,8178,""
3062713,Existing users can log in with username or email address via the portal or REST API,10843,1,9,2,"","IRIS-344,IRIS-903",9,1495047015,23,1520452184,"","",2059,0,"As a user, I want to be able to login with username or email so that I can use whatever means I feel is easier.","","1. Go to the SSM login page, and login with your username.
2. Go to the SSM login page, and login with your Email.
3. Use the REST API to login with your username.
4. Use the REST API to login with your Email.","You should be able to login with username and email, from the web browser and/or REST API","","","",Users > General,8178,""
3063135,Users are redirected from login page when already logged in,10843,1,9,2,"","IRIS-292,IRIS-874",9,1495221973,23,1529616011,"","",2059,0,Implement appropriate redirects from login page for all roles when already logged in.,"Have one account created for each role: physician, admin, super admin, QC and tech","1. Login with each of the roles
","Verify that users are redirected to the correct page from login page when already logged in:

Admin, SuperAdmin, Tech, QC >> Work Orders page
Physician >> Search page","","","",Users > General,8178,""
3063142,As a user I can edit my profile,10843,1,9,2,"","IRIS-282,IRIS-862",9,1495223010,23,1520281794,"","",2059,0,"As a user I shall be able to edit my profile (change email, username, add/change a phone number)",Have users created for every role.,"1. Login as a physician
2. Hover over the username at the top-right corner
3. Click on 'Edit Profile'
4. Change username, email and add/change a phone number
5. Click 'Save'
6. Repeat steps 1-5 for every other role
",A flash message should display stating 'Your profile was successfully updated',"","","",Users > General,8178,""
3069319,Disabled user accounts cannot login,10843,1,9,2,"","IRIS-922,IRIS-956",9,1495654152,23,1520283133,"","",2059,0,As a super admin I can enable or disable any user account by editing the user's properties.,"Disable an account:

1. Login a Super admin
2. Go to 'Users'
3. Select desired account
4. Click on 'Disable User Account' at the bottom of the page
5. Click OK in the prompt",1. Login with the prior disabled account,You should stay in the login page and a red flash alert should display 'Your account is disabled. Please contact support at 1-800-876-1310 for help',"","","",Users > General,8178,""
3062619,A new user logging in for the first time receives a prompt to change their password,10843,1,9,2,"","IRIS-345,IRIS-904,IRIS-495,IRIS-679",9,1495030391,9,1520886498,"","",2059,0,"As a new user, the first time I log in I should be prompted to change my password so that the users login credentials are the users own.","Create a new user:

1. Login with super admin account
2. Go to 'Users'
3. Click on the '+' icon at the top-right corner
4. Enter desired data
5. Click 'Create'","1. Go to you mailbox, an email with the pre-generated password should be there.
2. Login with the new username and the pre-generated password.",After the login the user shall be presented with the change password screen.,"","","",Users > General,8178,""
3062620,The prompt shall require entering the system generated password emailed to the user and then entering the new password twice,10843,1,9,2,"","IRIS-345,IRIS-905",9,1495030396,23,1520286352,"","",2059,0,The prompt shall require entering the system generated password emailed to the user and then entering the new password twice.,See C3062619,"1. Follow the prior steps until reaching the change password screen.
2. On the first field you'll need to input the pre-generated password.
3. Input a password and a confirmation in the two new password fields.
4. Click 'Change Password'.
",Password should update to the new one.,"","","",Users > General,8178,""
3062621,The two new password fields shall be validated to confirm the entries match,10843,1,9,2,"","IRIS-345,IRIS-906",9,1495030404,23,1520286988,"","",2059,0,"The two new password fields shall be validated to confirm the entries match.

",See C3062620,"1. Fill in the two new password fields.
2. Make sure you cannot submit the form if both of them are not identical.","Form shall only submit if the two new password fields are identical.

A red flash error will display when passwords don't match stating 'New password doesn't match confirmation'","","","",Users > General,8178,""
3062707,"On the login page, there shall be a button for the user to initiate the password reset function",10843,1,9,2,"","IRIS-348,IRIS-907",9,1495046799,23,1520288038,"","",2059,0,"On the login page, there shall be a button for the user to initiated the password reset function.","","1. Go to the SSM login page.


","Verify the following button is present:

!(index.php?/attachments/get/108)","","","",Users > General,8178,""
3062708,The user shall enter their email into the dialog/page and receive an email with a link to reset their password,10843,1,9,2,"","IRIS-348,IRIS-908",9,1495046806,9,1505842560,"","",2059,0,"","","1. Go to SSM login page
2. Click the **Don't remember your password?** link
3. Verify that the user enters his/her email into the dialog/page and receives an email with a link to reset their password",The user shall enter their email into the dialog/page and receive an email with a link to reset their password,"","","",Users > General,8178,""
3062709,The user shall enter their new password twice and taken to the login page/dialog after completing the password reset,10843,1,9,2,"","IRIS-348,IRIS-909",9,1495046813,9,1528239075,"","",2059,0,"","","1. Request a password reset by using the **Don't remember your password?** link
2. Verify that the user needs to enter his/her new password twice
3. Verify that the user is taken to the login page/dialog after completing the password reset",The user shall enter their new password twice and taken to the login page/dialog after completing the password reset,"","","",Users > General,8178,""
3085049,Upon lockout the user is told to check their email for an unblock notification,10843,1,9,2,"","IRIS-964,IRIS-1083",9,1497377248,23,1520432886,"","",2059,0,"","","1. Do a failed login attempt for 5 times.
2. Check the API response","Verify that upon lockout the user is told to check their email for an unblock notification stating:

```
{
    'success': 'false',
    'reason': 'Your account is disabled. Please contact support at 1-800-876-1310 for help.',
    'warning': 'After 5 unsuccessful login attempts your account will be locked. We will send you an email with instructions on how to unlock it.'
}
```","","","",Users > General,8178,""
3085050,Upon lockout the user receives an email with a unblock token,10843,1,9,2,"","IRIS-964,IRIS-1084",9,1497377256,23,1520433078,"","",2059,0,"","","1. Do a failed login for 5 times.
2. Check your mailbox","Upon lockout the user receives an email with a unblock token:

!(index.php?/attachments/get/112)
","","","",Users > General,8178,""
3085051,The url with the unblock token redirects the physician/QC to the iOS app after unblocking their account,10843,1,9,2,"","IRIS-964,IRIS-1085",9,1497377267,23,1520433948,"","",2059,0,"","","1. Do 5 failed login attempts with a Physician role account.
2. Check your mailbox for the unblock email.
3. Click the 'Unblock Account' button.
4. Repeat steps 1-3 with a QC role account.","The URL with the unblock token redirects the physician/QC to the iOS app after unblocking their account.

","","","",Users > General,8178,""
3046026,Parse response message from Auth0 for failed attempts and show users useful error messages,10843,1,9,2,"","IRIS-521,IRIS-698",9,1493664311,23,1525801657,"","",2059,0,"","","1. Go to SSM login page.
2. Enter an invalid username and password and submit.
3. Enter valid username and invalid password and submit.
4. Enter an invalid username and a valid password and submit.
5. Leave the fields blank and submit.
6. Test any other failed attempt combination that come up to your mind.
",Auth0 response message for failed attempts is parsed and shown to users as useful error messages,"","","",Users > General,8178,""
3046039,"As a User of the SSM, I can change my username or email address on the 'Edit Profile' page, the Auth0 user account should be updated so that: the User can immediately log in with the new username",10843,1,9,2,"","IRIS-501,IRIS-686",9,1493666644,23,1520435282,"","",2059,0,"","","1. Login to SSM with any role.
2. Hover over your username at the top-right corner and select 'Edit Profile'.
3. Change your Email and Username.
4. Try to login with your new username.",The Auth0 user account should be updated so that the User can immediately log in with the new username.,"","","",Users > General,8178,""
3046040,"As a User of the SSM, I can change my username or email address on the 'Edit Profile' page, the Auth0 user account should be updated so that: the previous username no longer works as a valid log in",10843,1,9,2,"","IRIS-501,IRIS-687",9,1493666654,23,1520435537,"","",2059,0,"","","1. Login to SSM with any role.
2. Hover over your username at the top-right corner and select 'Edit Profile'.
3. Change your Email and Username.
4. Try to login with the old username.",The previous username no longer works as a valid log in.,"","","",Users > General,8178,""
3046041,"As a User of the SSM, I can change my username or email address on the 'Edit Profile' page, the Auth0 user account should be updated so that: the User can immediately log in with the new email",10843,1,9,2,"","IRIS-501,IRIS-688",9,1493666663,23,1520436080,"","",2059,0,"","","1. Login to SSM with any role.
2. Hover over your username at the top-right corner and select 'Edit Profile'.
3. Change your Email and Username.
4. Try to login with your new email.",The User can immediately log in with the new email,"","","",Users > General,8178,""
3046042,"As a User of the SSM, I can change my username or email address on the 'Edit Profile' page, the Auth0 user account should be updated so that: the previous email no longer works as a valid log in",10843,1,9,2,"","IRIS-501,IRIS-689",9,1493666670,23,1520436185,"","",2059,0,"","","1. Login to SSM with any role.
2. Hover over your username at the top-right corner and select 'Edit Profile'.
3. Change your Email and Username.
4. Try to login with the old email address.",The previous email no longer works as a valid log in.,"","","",Users > General,8178,""
3055169,Highlight the invalid field when possible so that the user can quickly locate the field containing the error,10843,1,9,2,"","IRIS-487,IRIS-672",9,1494890985,23,1520436672,"","",2059,0,"A super admin, I want to see more informative error messages when creating a new user and required data is missing or invalid entry is made. Highlight the invalid field when possible so that the user can quickly locate the field containing the error.",Login with and Admin or Super Admin account.,"1. Go to the New User page
2. Attempt to create a user with missing/invalid data
3. Submit the form.","Verify that invalid fields are highlighted so that the user can quickly locate the field containing the error.

!(index.php?/attachments/get/113)
","","","",Users > General,8178,""
3055196,"When a user is created on SSM, an auth0 user is created with the same username and email address",10843,1,9,2,"","IRIS-446,IRIS-608",9,1494893084,23,1520437269,"","",2059,0,"When a user is created on SSM, an auth0 user is created with the same username and email address.

",Login with and Admin or Super Admin account.,"1. Create an SSM user.
2. Login to Auth0.
3. Switch to the correct tenant at the top-right corner (e.g. auth-iris-stage)
4. Perform a search for the username or email you just created in SSM.",An auth0 user should have been created with the same username and email address of SSM.,"","","",Users > General,8178,""
3062617,Users have to add First and Last name to their accounts to be valid,10843,1,9,2,"","IRIS-352,IRIS-630",9,1495030279,9,1520514521,"","",2059,0,As a user I should be able to give my first and last name when an account is created,Login with an Admin or Super Admin account.,"1. Go to the create new user URL 
2. Fill in all field except first name and last name.
3. Submit the form.","An error should display stating:

* `First name can't be blank`
* `Last name can't be blank`","","","",Users > General,8178,""
3094229,"Upon redirect from forgot password to login, the username field is filled in with the email address of the user",10843,1,9,2,"","IRIS-943,IRIS-1117",9,1498154824,9,1505843048,"","",2059,0,"","","Verify that upon redirect from forgot password to login, the username field is filled in with the email address of the user","Upon redirect from forgot password to login, the username field is filled in with the email address of the user","","","",Users > General,8178,""
3106151,The user is logged out after 30 minutes of inactivity,10843,1,9,2,"","IRIS-1136,IRIS-1142",9,1499274207,23,1520453752,"","",2059,0,"","","1. Login with any user.
2. Stay idle for 30 minutes.",The user is logged out after 30 minutes of inactivity,"","","",Users > General,8178,""
3131005,"Role-based groups with different permissions to view, create, update, comment, and complete tasks for work orders",10843,1,9,2,"","IRIS-1175, IRIS-1176, IRIS-1238",14,1501621654,23,1529615460,"","",2059,0,"",""," 1. Login as Segmentation Administrator. 
 2. Login as Segmentation Technician. 
 3. Login as Quality Control Technician.  
 5. Login as Physician.
 6. Login as Super Administrator.","1. Seg Admin can see these tabs: **Work Orders**, **Users**, **User Feedback**
2. Technician can see these tabs: **Work Orders**
3. QC can see these tabs: **Work Orders**
5. Physician can see these tabs: **Work Orders**, **Search**
6. Super Admin can see these tabs: **Work Orders**, **Accounts**, **Gateways**, **Programs**, **Storage Proxies**, **Users**, **User Feedback**, **Billing Posts**","","","",Users > General,8178,""
3185431,SSM uses Auth0 as Identity management service,10843,1,9,2,"","IRIS-1323,IRIS-1324",9,1505333279,9,1506382855,"","",2059,0,"IRIS uses the Auth0 Identity Management service that:

* Does not store passwords in cleartext and uses proper cryptographic mechanisms for password storage and verification.
* Uses Transport Layer Security (TLS) based secure channels for all identity data and password transfers.
* Uses built-in rate-limiting and automated blocking features to mitigate Denial-of-Service (DoS) and authentication attacks.
* Is HIPAA-compliant.","","1. Verify through Auth0 documentation that it fulfills the requirements mentioned in the description
2. Log into Auth0 and verify that blocking features (Dos and authentication attacks) are turned on.
3. Verify that the login and callback are HTTPS:
    1. Go to SSM login screen
    2. Open development tools
    3. Log in with a valid user
    4. Verify that login and callback are HTTPS requests.","* Auth0 is HIPAA-compliant and uses proper cryptographic mechanisms for password storage and verification.
* Denial-of-Service (DoS) and authentication attacks are enabled.","","","",Users > General,8178,""
3130996,System user accounts required fields,10843,1,9,2,"","IRIS-1186, IRIS-1185",14,1501613094,23,1520457535,"","",2059,0,"The system user account includes the following fields: 

1. Username (required) 
2. Last Name (required) 
3. First Name (required) 
4. Password (required) 
5. Email (required) 
6. Role (required) 
7. Phone number (optional) 
8. Salesforce ID (required for Physician) 
9. Program (required for Physician) 
10. Preference of notification (email or phone) (optional) ","","1. Create user account with required fields only and verify the account is created.
2. Create user account without required fields and verify that an error message is received.
3. Create user account with all fields complete and verify that the account is created.","Account should be created when filling in all the required fields.
Error message will display, detailing the required fields that are missing, if any.","","","",Users > General,8178,""
3064506,As a super admin I can see all user types on the users page,10837,1,9,2,"","IRIS-106,IRIS-769,IRIS-161,IRIS-801",9,1495482301,23,1529615206,"","",2059,0,"",Login with a Super Admin account.,"1. Go to the Users page.
2. Scroll down the Users list.","There should be a list for each role: 

    * Super Admins
    * Seg Admins
    * Techs
    * Quality Control
    * Physicians","","","",Users > Super Administrator,8178,""
3065324,"As a super administrator I can create Tech, QC, and Physician accounts",10837,1,9,2,"","IRIS-58,IRIS-722",9,1495493968,23,1529615242,"","",2059,0,"",Login with a Super Admin account.,"1. Go to the Users page.
2. Click on the '+' icon at the top-right, to access the new user page.
3. Fill in the fields, and set role as Tech.
4. Submit the form.
5. Repeat steps 1-4 for role QC and Physician.","You should be able to create Tech, QC, and Physician accounts.","","","",Users > Super Administrator,8178,""
3069318,Only super admins can enable/disable user accounts,10837,1,9,2,"","IRIS-922,IRIS-955",9,1495654137,23,1529615420,"","",2059,0,"","","1. Login with an Administrator role account.
2. Go to the Users page.
3. Check there is no edit button for any other account.
4. Hover over you username at the top-right, select 'Edit profile'.
5. Verify there is no disable account button.
6. Repeat steps 4 and 5, for roles Tech, QC and Physician.
7. Login with a Super Admin role account.
8. Go to the Users page.
9. Edit any other account.
10. Verify there is a disable account button at the bottom.",Only super admins can enable/disable user accounts,"","","",Users > Super Administrator,8178,""
3062609,As a Super Admin when creating a new user I should be able to get an autogenerated password,10837,1,9,2,"","IRIS-355,IRIS-598",9,1495029822,9,1520603638,"","",2059,0,"",Login as a Super Admin.,"1. Go to the Users page.
2. Click the '+' button at the top-right to access the new user page.
3. Complete all fields and submit, use a valid email address.
4. Open the above mailbox.","* Verify an email was sent containing the autogenerated password.
* It will be 10 characters long and it will include a lower-case letter, an upper-case letter, a number and no more than 2 identical chars in a row.","","","",Users > Super Administrator,8178,""
3062615,As a Super admin I can add the salesforce ID to the account of a physician user,10837,1,9,2,"","IRIS-351,IRIS-628, IRIS-629",9,1495030149,23,1520540432,"","",2059,0,"",Login as a Super Admin.,"1. Go to the users page.
2. Click the '+' icon at the top-right to access the new user page.
3. Select role: Physician.
4. Fill in all fields, including Salesforce ID.
5. Submit the form.
6. View the User, clicking the eye icon next to it.",The Salesforce ID should have saved.,"","","",Users > Super Administrator,8178,""
3065342,As a super admin I am able to add a Program to a Physician User,10837,1,9,2,"","IRIS-63,IRIS-727",9,1495497767,23,1520534574,"","",2059,0,"",Login as a Super Admin.,"1. Go to the programs page.
2. Edit a program.
3. Select desired user.",The program should be added to the user.,"","","",Users > Super Administrator,8178,""
3098758,Only super admins can toggle signed_tos flag,10837,1,9,2,"","IRIS-1101,IRIS-1129",9,1498597910,23,1520535838,"","",2059,0,There is a checkbox on the update user page that allows super admins to toggle the signed_tos flag for users.,"","1. Login with Super Admin account.
2. Go to the users page.
3. Edit any user.
4. Verify there is a checkbox to toggle the ToS flag.
5. Login with every other role, make sure you are not able to edit users.",Only super admins can toggle signed_tos flag,"","","",Users > Super Administrator,8178,""
3131008,Super Administrator functionality via the SSM,10837,1,9,2,"","IRIS-1177, IRIS-1178",14,1501628899,23,1525817418,"","",2059,0,"The Super Administrator shall be able to access and execute the following functions via the SSM:
1. Login to the application.
2. Download and upload data from the SSM.
3. Assign/Unassign Segmentation Technicians.
4. Assign/Unassign Segmentation Quality Control Technicians.
5. View and verify work order states.
6. Approve and fail work orders.
7. Review the results of the DICOM conformance checker.
8. Create, edit, and enable/disable SSM Accounts. 
9. Create, edit and enable/disable Programs. 
10. Edit and enable/disable Gateways. 
11. Create, edit and enable/disable Users. ","","1. Login as Super Admin.
2. Open an ORIGINAL_READY WO, download the Original dicom and upload the segmented study.
3. Open another ORIGINAL_READY WO and assign a tech using the *Assign Tech button*.
4. Open a QC_PACKAGE_READY WO and assign a QC using the *assign QC button*.
5. Open another QC_PACKAGE_READY WO and Approve it.
6. Open another QC_PACKAGE_READY WO and fail it.
7. Open any WO and check if you can see the **Conformance json** collapsible panel at the bottom.
8. Go to the *Accounts* tab and check if you can create, edit, enable and disable an account.
9. Go to the *Programs* tab and check if you can create, edit, enable and disable a program.
10. Go to the *Gateways* tab and check you can edit and enable/disable Gateways. 
11. Go to the *Users* tab and check if you can create, edit, enable and disable a user.",All functions can be completed by a Super Administrator user.,"","","",Users > Super Administrator,8178,""
3053331,Super admins can configure a user account as 'concurrent logins allowed',10837,1,9,2,"","IRIS-315,IRIS-958",9,1494530456,23,1520536429,"","",2059,0,"When enabled by a Super Admin, as a user I want to use the same credentials to log in from multiple devices simultaneously so that my user account can be used concurrently on different devices.",Login as a Super Admin.,"1. Go to the Users page.
2. Edit a user.
3. Toggle the checkbox for 'concurrent logins allowed'.
4. Submit the form.",The user should now have the checkbox enabled.,"","","",Users > Super Administrator,8178,""
3055168,"A super admin, I can see more informative error messages when creating a new user and required data is missing or invalid entry is made.",10837,1,9,2,"","IRIS-487,IRIS-671",9,1494890977,23,1520539953,"","",2059,0,"A super admin, I can see more informative error messages when creating a new user and required data is missing or invalid entry is made",Login as a Super Admin.,"1. Go to User page.
2. Click the '+' icon at the top-right to access the new user page.
3. Attempt to create a user with missing or invalid entries.",Verify that informative error messages are displayed.,"","","",Users > Super Administrator,8178,""
3046025,"When a super admin updates a user's email and/or username from the web or iOS app, call the Auth0 management API to make the corresponding changes in Auth0's database",10837,1,9,2,"","IRIS-521,IRIS-697",9,1493664297,23,1520539958,"","",2059,0,"","","1. Login to Auth0.
2. Select the correct tenant (auth-iris-stage if you are using SSM staging).
3. Search for the desired user.
4. Take note of the current Email and Username.
5. Login to SSM as a Super Admin.
6. Go to the Users page.
7. Edit the Username and Email of the User.
8. Submit the form.
9. Go back to Auth0 and refresh the page.",Email and Username in Auth0 should have changed to the new ones.,"","","",Users > Super Administrator,8178,""
3641434,As a Super Admin I can view super admin actions in SSM web,10837,1,7,2,"","IRIS-1694, IRIS-1709",24,1527010356,24,1528312395,"","",2059,0,"As an IRIS super admin I want to be notified whenever a super admin modifies an account and/or a Program so that I can use emails to monitor Super Admin activity.
There is also a 'Super Admin Actions' section where all the activity will be recorded and displayed.",1. have a Super Admin created.,"1. Login to SSM as a Super Admin
2. Go to Super Admin Actions page
3. (if empty) Go to Accounts page and create an account
4. Login as a physician (or any other non-super admin user)
","1. After login, the home page presents a link to Super Admin Actions page
2. Super Admin Actions page presents a table with 3 columns 'who' 'what' and 'when'
3. (If any Super Admin Actions have been performed) the table shows a record for each action. One record per row in the table. 
4. Super Admin Actions page should not be visible and the path /super_admin_actions should show: 'Access denied'. ","","","",Users > Super Administrator,8178,""
3641435,Account actions are recorded and trigger notifications to Super Admins,10837,1,7,2,"","IRIS-1694, IRIS-1710",24,1527010452,24,1527809141,"","",2059,0,"As an IRIS super admin I want to be notified whenever a super admin modifies an account (created, deleted, or edited) so that I can use emails to monitor Super Admin activity.

_note: test along with Users > segmentation admin > 'Account actions performed by super admins are recorded and trigger notifications to Seg Admins'_",1. have a Super Admin created.,"1. Login to SSM as a Super Admin
2. Go to Accounts page
3. Create an account
4. Update the account previously created (by changing: name, city, country, postal code, enable/disable, etc)
5. Delete the account","Verify that a record is created and an email is sent for the following actions:

- An account is created
- An account is updated (each update has its own record in /super_admin_actions. Email notifications group actions performed in the same update in 1 email)
- An account is deleted","","","",Users > Super Administrator,8178,""
3641436,Program actions are recorded and trigger notifications to Super Admins,10837,1,7,2,"","IRIS-1694, IRIS-1711",24,1527010481,24,1527809429,"","",2059,0,"As an IRIS super admin I want to be notified whenever a super admin modifies a Program (created, deleted, or edited users added or removed) so that I can use emails to monitor Super Admin activity.

_note: test along with Users > seg admin > 'Program actions performed by super admins are recorded and trigger notifications to Segmentation Admins'_",1. have a Super Admin created.,"1. Login to SSM as a Super Admin
2. Go to Programs page
3. Create a program
4. Update the program previously created (set/unset gateway, set/unset user, enable/disable program, change name or account)
5. Delete the program","Verify that a record is created and an email is sent for the following actions:

- A program is created (setting users or gateways on creation will generate separate records in /super_admin_actions. Email notifications group actions performed on creation in 1 email)
- A program is updated (each update has its own record in /super_admin_actions. Email notifications group actions performed in the same update in 1 email)
- A program is deleted","","","",Users > Super Administrator,8178,""
3678232,User actions are recorded and trigger notifications to Super Admins,10837,1,7,2,"","IRIS-1694, IRIS-1711, IRIS-1709",23,1529432234,23,1529432587,"","",2059,0,"Spec from ISI Trace document:
Every time an account is created, deleted (hospital only) or enabled/disabled (hospital and user), or edited; and/or every time a program is created, enabled/disabled, or edited (meaning users added to a program or removed from a program), an email alert shall be sent to the following roles, overriding the User notification preference settings. 
•	Segmentation Administrator
•	Super Administrator","1. Login as a Super admin.
2. Enable your email notifications.","1. Disable a physician user account
2. Enable physician user account
3. Create new physician user and add them to default program.
","1. Super admin action is created in SSM UI and a notification email is sent to all admins.
2. Super admin action is created in SSM UI and a notification email is sent to all admins.
3. Super admin action is created in SSM UI and a notification email is sent to all admins.","","","",Users > Super Administrator,8178,""
3064504,As an admin user I can see all QC users and what work they have been assigned,10838,1,9,2,"","IRIS-155,IRIS-748",9,1495482216,23,1520540524,"","",2059,0,"","","1. As an admin user go to the Users page
2. Verify that all QC users are listed
3. Click the Show button for a QC user
",Verify that all the WO assigned to that QC user are listed,"","","",Users > Segmentation Administrator,8178,""
3093300,Admin users see the cumulative failed login attempts in the user show page,10838,1,9,2,"","IRIS-964,IRIS-1110",9,1498052581,24,1528999392,"","",2059,0,To be tested via API.,1. have API request ready to make fail login attempts.,"1. Login as an Admin user. 
2. Go to the Users page.
3. Click on the eye icon next to a user to access the view page.
4. Check failed login attempts number.
5. Make fail login attempts via API.
6. Go back to the web and refresh the user page you were viewing.","Verify that you can see cumulative failed login attempts in the user show page.

_(After step 5.  the number of failed cumulative login attempts should increase)_.","","","",Users > Segmentation Administrator,8178,""
3131007,Segmentation Administrator functionality,10838,1,9,2,"","IRIS-1179, IRIS-1180",14,1501625516,23,1524867805,"","",2059,0,"",""," 1. Login to the application.
 2. Open an ORIGINAL_READY WO.
 2. Download the Original DICOM study.
 4. Reject with comments which triggers notification to the 'Physician'.
 2. Open an ORIGINAL_READY WO.
 5. Assign to Tech user, then Unassign and Re-assign it.
 6. Open an QC_PACKAGE_READY WO.
 6. Assign/Unassign/Reassign a QC user. 
 7. Download the segmented package.
 8. Download the QC package.
 9. Approve the WO with the QC user.
 9. Approve a work order with the seg admin user.
 10. Open another work order 'Fail' it.
","The Segmentation Administrator shall be able to access and execute the following functions via the SSM:
1. Login to the application.
2. Download the 'OA' DICOM study and review using a DICOM viewer (not hospital PACS Viewer).
3. Review the segmentation work order from the 'PHY'.
4. Reject with comments which triggers notification to the 'PHY'.
5. Assign, or re-assign, the Segmentation Technician (SGT) of the work order.
6. Assign/Unassign Segmentation Quality Control Technicians (QCT) to the work order. 
7. Download the ‘SA’ DICOM study and review using a DICOM viewer (not hospital PACS Viewer).
8. Download the (3DA) work order data package and review on the iOS application.
9. 'Approve' a work order after QCT approved.
10. 'Fail' a work order
11. Review the results of the DICOM conformance checker.
12. View and verify all work order states.","","","",Users > Segmentation Administrator,8178,""
3138629,Admin users can only index and show users,10838,1,9,2,"","IRIS-1222,IRIS-1271",9,1502390494,23,1520541335,"","",2059,0,"",Login as an Administrator.,"1. Go to the Users page.
2. Click on the eye icon next to a user to access the view page.
3. Manually add `/edit` to the URL.
","- You should see a list of users.
- You should not see a the pencil button to edit the users.
- You should get access denied error when trying to access the `<view user>/edit` URL manually.","","","",Users > Segmentation Administrator,8178,""
3138630,Admin users have no permissions for accounts.,10838,1,9,2,"","IRIS-1222,IRIS-1272",9,1502390497,23,1520541711,"","",2059,0,"",Login as an Administrator.,1. Try to access `<base URL>/accounts`,"You should get an 'Access Denied' error, and be redirected to the WO page.","","","",Users > Segmentation Administrator,8178,""
3062914,As an admin I will be able to see whether or not users have accepted TOS,10838,1,9,2,"","IRIS-923,IRIS-978",9,1495126417,23,1520541833,"","",2059,0,"",Login as an Administrator.,"1. Go to User page
2. Click on the eye icon next to a user to access the show page.
",Verify that you can see whether or not users have accepted TOS.,"","","",Users > Segmentation Administrator,8178,""
3647717,Account actions performed by super admins are recorded and trigger notifications to Seg Admins,10838,1,7,2,"","IRIS-1718, IRIS-1719",24,1527808337,9,1527859559,"","",2059,0,"As an IRIS seg admin I want to be notified whenever a super admin modifies an account (created, deleted, or edited) so that I can use emails to monitor Super Admin activity.

_Note: test along with Users > super admin > 'Account actions are recorded and trigger notifications to Super Admins'_","1. have a Super admin created.
2. have a Seg admin created.","1. Login to SSM as a Super Admin
2. Go to Accounts page
3. Create an account
4. Update the account previously created (by changing: name, city, country, postal code, enable/disable, etc)
5. Delete the account
6. Log out
7. Login as a Segmentation Admin
8. Go to `/super_admin_actions`","* Verify that the seg admin have access to Super Admin Actions logs
* Verify that a record is created and an email is sent to the Seg Admin for the following actions:
  - An account is created
  - An account is updated (each update has its own record in `/super_admin_actions`. Email notifications group actions performed in the same update in 1 email)
  - An account is deleted","","","",Users > Segmentation Administrator,8178,""
3647718,Program actions performed by super admins are recorded and trigger notifications to Segmentation Admins,10838,1,7,2,"","IRIS-1718, IRIS-1720",24,1527808350,9,1527859516,"","",2059,0,"As an IRIS sEG admin I want to be notified whenever a super admin modifies a Program (created, deleted, or edited users added or removed) so that I can use emails to monitor Super Admin activity.

_note: test along with Users > super admin > 'Account actions are recorded and trigger notifications to Super Admins'_","1. Have a Super Admin created.
2. Have a Seg Admin created.","1. Login to SSM as a Super Admin
2. Go to Programs page
3. Create a program
4. Update the program previously created (set/unset gateway, set/unset user, enable/disable program, change name or account)
5. Delete the program
6. Log out
7. Login as a Segmentation Admin
8. Go to `/super_admin_actions`","* Verify that the seg admin have access to Super Admin Actions logs
* Verify that a record is created and an email is sent to the Seg Admin for the following actions:
  - A program is created (setting users or gateways on creation will generate separate records in `/super_admin_actions`. Email notifications group actions performed on creation in 1 email)
  - A program is updated (each update has its own record in `/super_admin_actions`. Email notifications group actions performed in the same update in 1 email)
  - A program is deleted","","","",Users > Segmentation Administrator,8178,""
3678233,User actions performed by super admins are recorded and trigger notifications to Segmentation Admins,10838,1,7,2,"","IRIS-1718, IRIS-1720",23,1529432800,23,1529432967,"","",2059,0,"Spec from ISI Trace document:
Every time an account is created, deleted (hospital only) or enabled/disabled (hospital and user), or edited; and/or every time a program is created, enabled/disabled, or edited (meaning users added to a program or removed from a program), an email alert shall be sent to the following roles, overriding the User notification preference settings. 
•	Segmentation Administrator
•	Super Administrator","1. Login as a Super admin.
2. Enable your email notifications.
3. Login as Seg admin.
4. Enable your email notifications.","As a super admin: 

1. Disable a physician user account
2. Enable physician user account
3. Create new physician user and add them to default program.","As a seg admin check:

1. Super admin action is created in SSM UI and a notification email is sent to all admins.
2. Super admin action is created in SSM UI and a notification email is sent to all admins.
3. Super admin action is created in SSM UI and a notification email is sent to all admins.","","","",Users > Segmentation Administrator,8178,""
3048150,Physician/QC users from iOS devices should be routed to the launch app page when resetting their password,10842,1,9,2,"","IRIS-550,IRIS-621",9,1493936487,23,1520890548,"","",2059,0,"","- Repeat steps for Physician and QC accounts.
- Use iOS device.","1. On the login page, tap the 'Don't remember your password?' button under the password field.
2. Enter your email into the dialog/page and you'll receive an email with a link to to reset their password.
3. Go to your mailbox, and look for the password reset email.
4. Enter your new password twice.
5. Submit.",Physician/QC users from iOS devices are routed to the launch app page when resetting their password,"","","",Users > Physician,8178,""
3048151,Physician/QC users from non iOS devices should be routed to the ISI web page when resetting their password,10842,1,9,2,"","IRIS-550,IRIS-928",9,1493936500,23,1520543661,"","",2059,0,"","","1. Go to the SSM login page.
2. Click the 'Don't remember your password?' link.
3. Enter a physician's account email address.
4. Go to that mailbox and search for the reset password email.
5. Click the reset my password link.
6. Proceed to set a new password, and submit.",You should be redirected to https://stg.davinci-iris.com/,"","","",Users > Physician,8178,""
3055176,Physicians: Welcome email contains a link to download iOS app and temporary password,10842,1,9,2,"","IRIS-478,IRIS-968",9,1494891816,23,1520544587,"","",2059,0,"",Login with a Super Admin account.,"1. Go to the Users page.
2. Click the '+' button at the top-right to access the new user page.
3. Select role: Physician, complete all fields and submit, use a valid email address.
4. Open the previous mailbox, and look for the welcome email.",The email should contain a link to download iOS app and temporary password.,"","","",Users > Physician,8178,""
3064369,"As a physician, if I am already logged in and go to the login page I am redirected to the search page",10842,1,9,2,"","IRIS-233,IRIS-763",9,1495233798,9,1511459534,"","",2059,0,"","","1. Login as a physician
2. Go to the login page (`/login`)",The physician is redirected to the search page,"","","",Users > Physician,8178,""
3046019,User's browser will not attempt to autocomplete the password field,11884,1,9,2,"","IRIS-535,IRIS-703",9,1493657828,24,1528319549,"","",2059,0,"","","1. Go to SSM login page.
2. Right click in the password field and select *Inspect*",Verify the field has an `autocomplete = off` value.,"","","",Users > Authentication,8178,""
3046021,"When a user is logged into the web application, I must enter my old password in order to change it to a new one",11884,1,9,2,"","IRIS-532,IRIS-701",9,1493663172,23,1520545246,"","",2059,0,"When a user is logged into the web application, he/she must enter my old password in order to change it to a new one",Login to SSM with any user.,"1. Hover over you username at the top-right corner and select **Change Password**
2. Try to submit without entering the old password and with entering a wrong one.
3. Then submit entering the correct data.","- You should get 'Old password can't be blank' when not completing the old password.
- You should get 'Old password is incorrect' when submitting a bad old password.
- Password should change when entering good data.","","","",Users > Authentication,8178,""
3046024,"If username/email do not match, after login they are changed on the SSM so that to match Auth0 values",11884,1,9,2,"","IRIS-522,IRIS-699",9,1493664116,23,1520885705,"","",2059,0,"When user logs in, check (by Auth0 ID) that users have the same values for email and username in both databases. If they don't match, change SSM values to match Auth0 values.","","1. Login to Auth0, use correct tenant (e.g. auth-iris-stage for SSM staging)
2. Search for desired user, open it.
3. Click in the action button and change Email.
4. Change current email to a different one.
5. Go to SSM
6. Login with that username/password.
7. Hover over your username at the top-right corner and select **Edit Profile**.
",The email value should have changed to the Auth0 value.,"","","",Users > Authentication,8178,""
3048152,Non physician and non QC users should be routed to the SSM login page when resetting their password,11884,1,9,2,"","IRIS-550,IRIS-620",9,1493936509,9,1520940041,"","",2059,0,"","","1. Request a password reset by using the `Don't remember your password?` link
2. Go to your mailbox and search for the reset password email.
3. Change your password and submit.

Repeat these steps for every role except Physician and QC.",You should be routed to the SSM login page.,"","","",Users > Authentication,8178,""
3053330,The forgot password email looks and feels in keeping with ISI brand,11884,1,9,2,"","IRIS-492,IRIS-957",9,1494528530,23,1520886056,"","",2059,0,"
","","1. Request a password reset by using the Don't remember your password? link
2. Go to your mailbox and search for the reset password email.","Verify the forgot password email looks and feels in keeping with ISI brand

!(index.php?/attachments/get/72)","","","",Users > Authentication,8178,""
3055163,The 'requires_change_password' flag will persist until the user changes his password,11884,1,9,2,"","IRIS-495,IRIS-680",9,1494889516,24,1528858812,"","",2059,0,"","1. Login with super admin account
2. Go to 'Users'
3. Click on the '+' icon at the top-right corner
4. Enter desired data
5. Click 'Create'
6. Go to you mailbox, an email with the pre-generated password should be there.
","1. Login with the new username and the pre-generated password, but **DO NOT** change the password as requested.
2. Logout and login again.
",The change password request is always prompted at login unless the user changes the password. ,"","","",Users > Authentication,8178,""
3055166,Informative messages are displayed for the REST API and SSM portal when the user makes a mistake while changing its password,11884,1,9,2,"","IRIS-489,IRIS-673",9,1494890830,9,1529014328,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/change_password`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}',
		'new_password': '{{new_password}}', 
		'confirm_new_password': '{{new_password}}'
	}

**Output:**

	{
		'success': 'true'
	}	","","* Web:
  1. Login with any user.
  2. Hover over your username at the top-right and select **Change Password**.
  3. Fill in you last password.
  4. Try a few bad passwords (e.g. `password`, `<your_username>`, `11111111`).
  5. Submit.

* REST API:
1. Try to update your password (`/api/v1/change_password`) with the following conditions:
  * Invalid credentials (username and/or token)
  * Without your old password
  * With an incorrect old password
  * Without new passwords matching
  * With a week new password (example: `password`)
  * With a new password that you have used recently
  * With a password that contains personal information (example: username or name)","* Web: Informative messages are displayed when the user makes a mistake while changing its password.
* REST API: Success = `false`
* REST API returns any of these error messages:
|||:Case |:Reason
|| Wrong email and/or password | 'Email and password combination not found.'
|| Bad or missing parameters | 'Bad parameters.'
|| Incorrect old password | 'Your old password is incorrect.'
|| Passwords do not match | 'New passwords do not match.'
|| Password is too weak | 'New password is too weak.'
|| Password has been used | 'New password has been used recently.'
|| Password contains username | 'Password cannot contain personal information.'","","","",Users > Authentication,8178,""
3055167,The reason my new password was not accepted should be described,11884,1,9,2,"","IRIS-489,IRIS-674",9,1494890847,23,1520891261,"","",2059,0,"The reason my new password was not accepted should be described, i.e. the characters required to the 'complexity' requirements","","1. Login with any user.
2. Hover over your username at the top-right and select Change Password.
3. Fill in you last password.
5. Try a few bad passwords (e.g. 'password', '<your_username>', '11111111').
6. Submit.","verify the reason the new password was not accepted is described.

!(index.php?/attachments/get/114)
","","","",Users > Authentication,8178,""
3055174,"As a user, I receive a welcome email with temporary password",11884,1,9,2,"","IRIS-478,IRIS-911",9,1494891789,23,1520891556,"","",2059,0,"","","1. Login with super admin account
2. Go to 'Users'
3. Click on the '+' icon at the top-right corner
4. Enter desired data
5. Click 'Create'
6. Go to the new user's mailbox.",You should receive a welcome email with temporary password.,"","","",Users > Authentication,8178,""
3055175,Non-physicians: Welcome email contains a temporary password,11884,1,9,2,"","IRIS-478,IRIS-967",9,1494891809,9,1511466843,"","",2059,0,"","",Verify that for non-physicians the Welcome email contains a temporary password,For non-physicians the Welcome email contains a temporary password,"","","",Users > Authentication,8178,""
3055177,User logs in with temporary password and is redirected to reset password page,11884,1,9,2,"","IRIS-478,IRIS-969",9,1494891827,23,1520892310,"","",2059,0,"",See C3055174,"1. Login with the generated password.
",User logs in with temporary password and is redirected to change password page,"","","",Users > Authentication,8178,""
3055178,"After user resets password, requires_password_reset is set to false",11884,1,9,2,"","IRIS-478,IRIS-970",9,1494891836,24,1528858593,"","",2059,0,"",1. Follow steps in C3055163,"1. Login and change the password as requested via web.
2. Logout and log back in.","After user resets password, the password change is no longer requested at login.","","","",Users > Authentication,8178,""
3062610,Password should be checked against Auth0,11884,1,9,2,"","IRIS-355,IRIS-599",9,1495029829,23,1525729922,"","",2059,0,"","","1. Go to the SSM login page using chrome.
2. Press f12 to access the chrome tools.
3. Go to the Network tab in the chorme tools.
4. Do a login attempt in SSM",Verify that the URL shown in the network tab for callback is an Auth0 URL.,"","","",Users > Authentication,8178,""
3081622,As a user I see the reset password hosted page on auth0 branded for IRIS,11884,1,9,2,"","IRIS-1025,IRIS-1071",9,1497039889,23,1521139415,"","",2059,0,"!(index.php?/attachments/get/130)
","",Verify that as a user I see the reset password hosted page on auth0 branded for IRIS,As a user I see the reset password hosted page on auth0 branded for IRIS,"","","",Users > Authentication,8178,""
3478118,As a user I want to have 10k common password check disabled on auth0,11884,1,7,2,"","IRIS-1610,IRIS-1647",9,1519828614,23,1520892680,"","",2059,0,"","","1. Login to Auth0
2. Select `auth-iris-stag` tenant
3. Go to `Connections` > `Database` > `Password Policy`","**Password Dictionary** is turned off.

!(index.php?/attachments/get/115)
","","","",Users > Authentication,8178,""
3678235,SSM - Set Auth0 password history to '3' on staging and production,11884,1,7,2,"","IRIS-1147,IRIS-1148",14,1529537701,9,1529590523,"","",2059,0,A user shall not be allowed to use the previous 3 passwords.,"","1. As an Admin, log into the Auth0 system
2. Verify that the password history is set to '3' for the IRIS staging and production tenants. ","!(index.php?/attachments/get/135)
","","","",Users > Authentication,8178,""
3131995,Segmentation Tech to access and execute the following functions via the Web Application,40241,1,9,2,"","IRIS-1181, IRIS-1182",14,1501710035,23,1524862306,"","",2059,0,"","","1. Login as a Tech.
2. Open an assigned to you WO.
3. Download the Original dicom.
4. Add a comment by clicking the *Add comment* button at the bottom.
5. Upload the segmented study.
6. As an admin assign that WO to a QC.
7. With the QC reject the WO. Place a comment.
8. With the Tech download the QC package link.
9. Check that the QC comment was added to the WO.","The SSM shall allow the Segmentation Tech to access and execute the following functions via the Web Application:
1.Login to the Application.
2.Review the work order.
3.Download the 'OA' DICOM study.
4.Add comments to the segmentation order.
5.Upload 'SA' DICOM study when segmentation is complete.
6.Review an (3DA) work order package rejected by 'QCT', with QC review comments.","","","",Users > Segmentation Tech,8178,""
3046027,As a SSM user I see an 'SSM' icon to appear in the browser tab (favicon),8179,1,9,2,"","IRIS-514,IRIS-695",9,1493664442,23,1520973540,"","",2059,0,"!(index.php?/attachments/get/116)
","",1. Open SSM in a new tab.,"Verify you can see the 'SSM' icon in the browser tab (favicon)

","","","",SSM General,"",""
3064360,ITH logo is located at the bottom saying powered by InTouch Health.,8179,1,9,2,"","IRIS-243,IRIS-838",9,1495232782,23,1520973806,"","",2059,0,"!(index.php?/attachments/get/117)
","",1. Login into SSM website,The ITH logo is located at the bottom of the page saying powered by InTouch Health,"","","",SSM General,"",""
3064349,As an ISI user I am able to know what version of the SSM I am using,8179,1,9,2,"","IRIS-265,IRIS-852",9,1495227935,23,1520974003,"","",2059,0,"!(index.php?/attachments/get/118)
","",Verify that as an ISI user I am able to know what version of the SSM I am using. The version number is displayed at the bottom right corner of the screen.,As a ISI user I am able to know what version of the SSM I am using,"","","",SSM General,"",""
3065346,As a SSM user I see a header menu to navigate and the ability to log out,8179,1,9,2,"","IRIS-88,IRIS-735",9,1495498807,23,1520974859,"","",2059,0,"
!(index.php?/attachments/get/120)
","",1. Login to SSM,As a SSM user I see a header menu to navigate and the ability to log out,"","","",SSM General,"",""
3046033,"For all users of the SSM web application, the headers of the SSM web pages are responsive and automatically adjusts so that all header information is visible each time the web page is resized",8179,1,9,2,"","IRIS-506,IRIS-690",9,1493665894,23,1520975128,"","",2059,0,"","","1. Login to SSM
2. Resize the window, shrink it and maximize it, observe the headers.
3. You can also use Chrome Inspector, put it in mobile mode and try different resolutions there.","For all users of the SSM web application, the headers of the SSM web pages are responsive and automatically adjusts so that all header information is visible each time the web page is resized","","","",SSM General,"",""
3063033,Cookies shall be secured,8179,1,9,2,"","IRIS-320,IRIS-885",9,1495207383,23,1520978552,"","",2059,0,Force SSL for staging and production,"","1. Login to SSM.
2. Open Chrome Inspector.
3. Go to the Applications tab, and expand the cookies section.
4. Check the secure column that the value is set to true.
",Cookies are secured,"","","",SSM General,"",""
3069324,As a SSM developer I have log rolling for SSM/log and /var/log/nginx,8179,1,9,2,"","IRIS-66,IRIS-730",9,1495666648,9,1529015350,"","",2059,0,"","","1. ssh into SSM staging box.
2. Do `cd SSM/log` and then `ls`.
3. Check that logs are being generated.
4. Do `cd /var/log/nginx` and then `ls`.
5. Check that logs for access and error are being generated.

","Logs for SSM staging, access and error should be present in the above folders.","","","",SSM General,"",""
3046048,The SSM should log each SMS message phone number used and the message sent,8179,1,9,2,"","IRIS-530,IRIS-879",9,1493680957,23,1525802646,"","",2059,0,"",Have a phisician configured with a mobile number and with SMS notifications enabled.,"1. Login as Physician and start a WO for *Musterman Max* (It will fail in 1 or 2 minutes).
2. ssh into SSM staging server.
3. Check the `SSM/log/staging.log`
","The SSM logs each SMS message phone number used and the message sent. The log should read something like this:

    PHONE: +12016768877, MESSAGE: IRIS order SEG00005558 had an issue while processing. Use this link to review the open order: https://ssmstaging.intouchiris.com/launch_app?email=aguerrasqa%2Bphystg%40gmail.com&link=wo_link&uuid=b4bea768- 
    c076-496e-b88e-5105e9f882ad
","","","",SSM General,"",""
3092393,As a user I have a Search page that let me search WO by UUID or Order Number,8179,1,9,2,"","IRIS-926,IRIS-1051",9,1498003819,23,1520979428,"","",2059,0,"","","1. Login to SSM as an Administrator, Super Administrator and Technician.
2. Go to the Work Order page.
3. Type in a WO UUID or Order number in the search box.
4. Submit.
",Verify that the correct WO is searched.,"","","",SSM General,"",""
3092394,"As an SSM user I have an advanced search functionality for work orders that allows me to search by Order placed, last modified or state",8179,1,9,2,"","IRIS-927,IRIS-1032",9,1498005426,9,1521031470,"","",2059,0,"","Login as an Administrator, Super Administrator and Technician.","1. Go to the Work Orders page.
2. Click the **advanced search** button under the search field.
3. Search by:
  - Date of Order
  - Last modified
  - State ",You should get work orders filtered by the search criteria.,"","","",SSM General,"",""
3113703,"The IRIS image routing architecture based on the ITH Gateway and Segmentation Service Manager (SSM), with communication based on HTTPS.",8179,1,9,2,"","IRIS-1160, IRIS-1158",14,1499977570,23,1525804430,"","",2059,0,"","","1. Login to AAT 404 at https://aatstaging404.intouchiris.com/login
2. Click in **Configure** and select **SSM**
3. Check the port column, it should be *443*
4. Repeat steps 1-3 for:

401 https://aatstaging401.intouchiris.com/login
319 https://aatstaging.intouchiris.com/login","1. Verify that the IRIS image routing architecture is based on the IRIS AAT running on the ITH Gateway and Segmentation Service Manager (SSM) which runs in AWS.
2. Verify that the communication between the client/server is based on HTTPS.","","","",SSM General,"",""
3113709,The SSM runs as a Ubuntu 16.04 AMI based virtual machine on amazon EC2.,8179,1,9,2,"","IRIS-1172, IRIS-1171",14,1499984702,23,1520984813,"","",2059,0,"","","1. Login to Amazon.
2. Select **US-WEST (Oregon)** in the top-right corner.
3. Select **Instances** in the left panel.
4. Filter for 'SSM' in the search field at the center of the screen.
5. Select the SSM servers and check the description, the **AMI ID** variable.",Verify that the SSM runs as a Ubuntu 16.04 AMI based virtual machine.,"","","",SSM General,"",""
3130021,Integrate the eUnity Enterprise DICOM viewer into the SSM,8179,1,9,2,"","IRIS-930,IRIS-992",9,1501534852,23,1524866867,"","",2059,0,"The eUnity enterprise DICOM viewer shall be securely integrated with the SSM so that the passing or all data between the nodes is encrypted.

* The viewer shall display the specified patients study upon the receipt of the generated URL.
* The credentials shall not be passed in plain text.","","1. Login as Physician.
2. Search for a patient and click **View Study**","* eUnity Enterprise DICOM viewer displays the specified patients study upon the receipt of the generated URL.
* The credentials are not passed in plain text.","","","",SSM General,"",""
3131992,The SSM shall use monit monitor Puma and Nginx on port 443 and have it restart on failure,8179,1,9,2,"",IRIS-294,14,1501709351,23,1525899893,"","",2059,0,The SSM shall use monit monitor Puma and Nginx on port 443 and have it restart on failure,**Notify Intuitive before proceeding.**,"1. Kill Puma process and verify that the service is restarted.

 `ps aux | grep puma`
 `kill -9 {process number}`

2. Kill Nginx process and verify that the service is restarted.

 `ps aux | grep nginx`
 `kill -9 {process number}`
",Services are restarted by monit.,"","","",SSM General,"",""
3131993,Deploy new versions of the SSM Rails applications,8179,1,9,2,"",IRIS-1170,14,1501709580,9,1506383436,"","",2059,0,"As a systems administrator, I shall be able to deploy new versions of the SSM Rails applications and supporting libraries to staging/production environments from a central management tool.","","1. SSH into deployment server
2. Run deployment scripts for current version: 
    * Usage: `./deploy.sh {SSM|SP|Turnstyle} {staging|production} {version}`
3. Verify the new version is running",A new version of SSM Rails application is deployed by a deployment script run from the deployment server.,"","","",SSM General,"",""
3185432,SSM has an HIPAA compliant Web front-end,8179,1,9,2,"",IRIS-1325,9,1505333800,9,1529078358,"","",2059,0,"SSM's web front-end for ISI service users:

* Only utilizes HIPAA-compliant infrastructure and services.
* Encrypt data packages which includes PHI (Protected Health Information) at rest.
* Never stores Protected Health Information (PHI) and Personally Identifiable Information (PII) in plaintext form in any log files or cached content on the server side.","","# 1. HIPAA-compliant infrastructure and services:

1. SSH into SSM server
2. Run `rails console`
3. Run `WorkOrder.last`
4. Verify that the following attributes are correctly encrypted (Example: `WorkOrder.last.encrypted_patient_name`):
  * `encrypted_patient_name`
  * `encrypted_patient_dob`
  * `encrypted_study_date`
  * `encrypted_study_description`
 
# 2. Encrypted data packages:

1. Log into AWS S3
2. Go to Package bucket
3. Click the lasted WO
4. Verify that ut is *AES-256* encrypted
 
# 3. Verify that `SSM/log/staging.log` does not contain any PHI or PII information.
1. Do a study search
2. Submit a new WO","* Patient name, DOB and study description and date are encrypted in SSM database.
* S3 files are encrypted
* There is no PHI or PII information in SSM logs","","","",SSM General,"",""
3185434,SSM prevents injection and cross site security attacks,8179,1,9,2,"","IRIS-1328,IRIS-1329",9,1505335305,9,1529670493,"","",2059,0,"Verify that SSM escapes or sanitizes untrusted user inputs, uses secure APIs and parameterizes queries to prevent injection and cross site security attacks.","","1. SSH into SSM application
2. Run `brakeman` in SSM repository
3. Verify that default configuration is set in rails in `config/environments/production.rb`
  * config.force_ssl = true
4. Run `curl -vvv ssmstaging.intouchiris.com` and verify these headers:
","* Verify that `brakeman` output shows no errors or security warnings.
* File `config/environments/production.rb` contains the following line:
  * config.force_ssl = true
* `curl` command returns the following headers:
  * `X-Frame-Options: SAMEORIGIN`
  * `X-XSS-Protection: 1; mode=block`
  * `X-Content-Type-Options: nosniff`","","","",SSM General,"",""
3064497,As the iPad app I can use the HTML5 version of PACS Viewer,8179,1,9,2,"","IRIS-159,IRIS-799",9,1495481704,9,1511457417,"","",2059,0,"","",Verify that as the iPad app I can use the HTML5 version of PACS Viewer,As the iPad app I can use the HTML5 version of PACS Viewer,"","","",SSM General,"",""
3678316,IPv6 has been enabled for communication with the InTouch SSM,8179,1,7,2,"","IRIS-1615,IRIS-1746",14,1529640508,9,1531940154,"","",2059,0,IPv6 has been enabled for communication with the InTouch SSM for the intouchiris.com and ithiris.com subdomains in addition to IPv4 support. ,iPAd or iPhone using a IPv6 address to communicate with the SSM system.,"* Run `dig AAAA @1.1.1.1 ssmstaging.intouchiris.com` from your console
* You can also use an online tool (example: `http://ipv6-test.com/validate.php`)
","* You get a response like the following one:

	; <<>> DiG 9.10.6 <<>> AAAA @1.1.1.1 ssmstaging.intouchiris.com
	; (1 server found)
	;; global options: +cmd
	;; Got answer:
	;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 9128
	;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 1

	;; OPT PSEUDOSECTION:
	; EDNS: version: 0, flags:; udp: 1452
	;; QUESTION SECTION:
	;ssmstaging.intouchiris.com.	IN	AAAA

	;; ANSWER SECTION:
	ssmstaging.intouchiris.com. 60	IN	AAAA	2620:12c:9002::1:12
	ssmstaging.intouchiris.com. 60	IN	AAAA	2620:12c:9004::1:12

	;; Query time: 22 msec
	;; SERVER: 1.1.1.1#53(1.1.1.1)
	;; WHEN: Wed Jul 18 11:49:05 PDT 2018
	;; MSG SIZE  rcvd: 111","","","",SSM General,"",""
3069320,Email notifications are sent when user accounts are disabled/enabled,8378,1,9,2,"","IRIS-922,IRIS-1016",9,1495654198,23,1520987968,"","",2059,0,"","Login as a Super Admin.
Have email notifications enabled. (enabled by default)","1. Disable or enable a user account
",Verify that email notifications are sent to the user,"","","",Notifications,"",Email and Text message notifications
3064371,As an admin I am notified when a physician places a new order via the REST API,8378,1,9,2,"","IRIS-236,IRIS-832,IRIS-140,IRIS-746",9,1495234603,23,1528482931,"","",2059,0,"",Login as Physician.,"Web:

1. Go to the search page.
2. Enter a patient name and submit.
3. Click the **Create Order**  blue button next to the patient.
4. Click create in the next screen.
5. Check the admin user mailbox.", Verify that segmentation admin users are notified about the new WO.,"","","",Notifications,"",Email and Text message notifications
3064388,When a WO passes the conformance checker segmentation admin users are notified,8378,1,9,2,"","IRIS-220,IRIS-829",9,1495236333,23,1521037611,"","",2059,0,"","","1. Login as a Physician and start a new WO.
2. Wait until the conformance checker has passed.
",The admin user should receive an email when the conformance check has  passed.,"","","",Notifications,"",Email and Text message notifications
3064370,As an admin user I receive a notification with subject 'Passed conformance checker',8378,1,9,2,"","IRIS-235,IRIS-764,IRIS-146, IRIS-795",9,1495234063,23,1521037776,"","",2059,0,"","",1. Submit a new WO and wait until it passes the conformance checker.," Verify that all admin users receive a notification with subject *Passed conformance checker*

!(index.php?/attachments/get/125)

","","","",Notifications,"",Email and Text message notifications
3064508,As a Physician user I am notified when a conformance check failed,8378,1,9,2,"","IRIS-146,IRIS-794",9,1495482431,9,1505845923,"","",2059,0,"","",Verify that as a Physician user I am notified when a conformance check failed,As a Physician user I am notified when a conformance check failed,"","","",Notifications,"",Email and Text message notifications
3064492,As a Tech I am notified when I am assigned a work order,8378,1,9,2,"","IRIS-193,IRIS-810",9,1495481491,23,1521037971,"","",2059,0,"","","1. Login as a Physician and start a new WO.
2. Login as an admin or super admin and assing a tech to the WO.
3. Go to the tech user's mailbox.",Verify that the Tech user is notified about the new WO assigment.,"","","",Notifications,"",Email and Text message notifications
3064348,As an admin I am notified when a work order has the QC package ready so that I may assign a QC,8378,1,9,2,"","IRIS-268,IRIS-855",9,1495227845,23,1521052112,"","",2059,0,"","","1. Login as a Physician.
2. Place a new WO.
3. Login as a Super Admin.
4. Wait until you can assign a tech, and assign it.
5. Upload the segmented study.
6. Wait until the WO state is QC Package ready.
7. Check the segmentation admin mailbox.
8. Assign a QC user to the WO.



","- Verify that when a work order has the QC package ready, all segmentation admin users are notified.
- Verify that they can assign a QC to that WO","","","",Notifications,"",Email and Text message notifications
3064493,As a QC I am notified when I am assigned a work order,8378,1,9,2,"","IRIS-194,IRIS-811",9,1495481517,23,1521052228,"","",2059,0,"","","1. Login as a Physician.
2. Place a new WO.
3. Login as a Super Admin.
4. Wait until you can assign a tech, and assign it.
5. Upload the segmented study.
6. Wait until the WO state is QC Package ready.
7. Assign a QC user to the WO.
8. Check the QC user's mailbox.
",Verify the QC gets notified he is assigned a work order.,"","","",Notifications,"",Email and Text message notifications
3064347,As an admin notify me when a QC has approved a work order,8378,1,9,2,"","IRIS-269,IRIS-857",9,1495227435,23,1521052330,"","",2059,0,"","","1. Login as a Physician.
2. Place a new WO.
3. Login as a Super Admin.
4. Wait until you can assign a tech, and assign it.
5. Upload the segmented study.
6. Wait until the WO state is QC Package ready.
7. Assign a QC user to the WO.
8. Login with the QC user and approve the WO.
9. Go to the admin user's mailbox.
",Verify that all segmentation admin users receive an email notification.,"","","",Notifications,"",Email and Text message notifications
3055186,As an seg admin I am notified when a QC rejects a work order,8378,1,9,2,"","IRIS-458,IRIS-658,IRIS-221, IRIS-830",9,1494892466,23,1521052697,"","",2059,0,"","","1. Login as a Physician.
2. Place a new WO.
3. Login as a Super Admin.
4. Wait until you can assign a tech, and assign it.
5. Upload the segmented study.
6. Wait until the WO state is QC Package ready.
7. Assign a QC user to the WO.
8. Login with the QC user and reject the WO.
9. Check the admin user's mailbox.",Verify that all segmentation admin users receive an email notification when the WO is rejected.,"","","",Notifications,"",Email and Text message notifications
3064491,As a Tech I am notified when a work order I was assigned was rejected by the QC,8378,1,9,2,"","IRIS-198,IRIS-815",9,1495481449,23,1521052942,"","",2059,0,"","","1. Login as a Physician.
2. Place a new WO.
3. Login as a Super Admin.
4. Wait until you can assign a tech, and assign it.
5. Upload the segmented study.
6. Wait until the WO state is QC Package ready.
7. Assign a QC user to the WO.
8. Login with the QC user and reject the WO.
9. Check the tech user's mailbox.",Verify that the Tech user assigned to that WO is notified that the WO has been rejected by the QC,"","","",Notifications,"",Email and Text message notifications
3064396,Admins receive an email notification when the WO is ready to download,8378,1,9,2,"","IRIS-211,IRIS-825,IRIS-241, IRIS-836",9,1495475346,23,1521056576,"","",2059,0,"","","1. Login as a Physician.
2. Place a new WO.
3. Login as an Admin.
4. Wait until you can assign a tech, and assign it.
5. Login with the tech user and upload the segmented study.
6. Wait until the WO state is QC Package ready.
7. login with the Admin and assign a QC user to the WO.
8. Login with the QC user and approve the WO.
9. Login with the Admin user and approve the WO.
10. Wait until the WO state is _final download ready_
11. Check the Admin user's mailbox.","* Admins receive an email notification when the WO is ready to download
* The email subject for notification is _Ready for verification_

!(index.php?/attachments/get/127)
","","","",Notifications,"",Email and Text message notifications
3064511,As a Physician I am notified when a package is ready for download,8378,1,9,2,"","IRIS-149,IRIS-797,IRIS-55,IRIS-721",9,1495482494,23,1521056674,"","",2059,0,"","","1. Login as a Physician.
2. Place a new WO.
3. Login as an Admin.
4. Wait until you can assign a tech, and assign it.
5. Login with the tech user and upload the segmented study.
6. Wait until the WO state is QC Package ready.
7. login with the Admin and assign a QC user to the WO.
8. Login with the QC user and approve the WO.
9. Login with the Admin user and approve the WO.
10. Wait until the WO state is _final download ready_
11. Check the Physician user's mailbox.
","
Verify that as a Physician I am notified when a package is ready for download","","","",Notifications,"",Email and Text message notifications
3064490,When a physician rejects a WO all segment admins receive an email notification,8378,1,9,2,"","IRIS-200,IRIS-817",9,1495478916,23,1521058945,"","",2059,0,"","","1. Login as a Physician.
2. Place a new WO.
3. Login as an Admin.
4. Wait until you can assign a tech, and assign it.
5. Login with the tech user and upload the segmented study.
6. Wait until the WO state is QC Package ready.
7. login with the Admin and assign a QC user to the WO.
8. Login with the QC user and approve the WO.
9. Login with the Admin user and approve the WO.
10. Wait until the WO state is _final download ready_
11. Reject the WO via REST Api, using the physician credentials.
12. Check the Admin user's mailbox.",Verify that all segment admins receive an email notification,"","","",Notifications,"",Email and Text message notifications
3064499,As a physician user I know the reason why my work order was failed in the email sent to me,8378,1,9,2,"","IRIS-171,IRIS-804",9,1495481920,23,1521059397,"","",2059,0,"","","1. Login as a Physician.
2. Place a new WO.
3. Login as an Admin.
4. Open the WO and click the fail button, input a reason and submit.
5. Check the Physician's mailbox.",Verify that the email has a the reason given by the administrator.,"","","",Notifications,"",Email and Text message notifications
3064510,As a Physician user I am notified if an admin fails a work order,8378,1,9,2,"","IRIS-147,IRIS-796",9,1495482488,23,1521059071,"","",2059,0,"","","1. Login as a Physician.
2. Place a new WO.
3. Login as an Admin.
4. Open the WO and click the fail button, input a reason and submit.
5. Check the Physician's mailbox.",As a Physician user I am notified if an admin fails a work order,"","","",Notifications,"",Email and Text message notifications
3071007,An ISI branded email is sent to welcome new IRIS users,8378,1,9,2,"","IRIS-551,IRIS-1001",9,1495822043,23,1521060123,"","",2059,0,"","","Create a new user:

1. Login with super admin account
2. Go to 'Users'
3. Click on the '+' icon at the top-right corner
4. Enter desired data
5. Click 'Create'
6. Go to the user's mailbox.",Verify that an ISI branded email is sent to welcome new IRIS users,"","","",Notifications,"",Email and Text message notifications
3071008,An ISI branded email is sent when a user account is disabled,8378,1,9,2,"","IRIS-551,IRIS-1002",9,1495822050,23,1521059792,"","",2059,0,"","","

See C3069320",Verify that an ISI branded email is sent when a user account is disabled,"","","",Notifications,"",Email and Text message notifications
3071009,An ISI branded email is sent when a user account is enabled,8378,1,9,2,"","IRIS-551,IRIS-1003",9,1495822058,23,1521059965,"","",2059,0,"","",See C3069320,Verify that an ISI branded email is sent when a user account is enabled,"","","",Notifications,"",Email and Text message notifications
3071010,An ISI branded email is sent when user feedback is submitted,8378,1,9,2,"","IRIS-551,IRIS-1005",9,1495822063,23,1521060981,"","",2059,0,"","","1. Login as a Physician.
2. Hover over your username at the top-right and select edit profile.
3. Click the send feedback link at the bottom.
4. Input a feedback text and submit.
5. Check the Admin's mailbox.",Verify that an ISI branded email is sent when user feedback is submitted,"","","",Notifications,"",Email and Text message notifications
3071011,An ISI branded email is sent when a new work order is submitted,8378,1,9,2,"","IRIS-551,IRIS-1012",9,1495822066,23,1521060188,"","",2059,0,"","","1. login as a Physician.
2. Submit a WO.
3. Check the seg Admin's mailbox.",Verify that an ISI branded email is sent when a new work order is submitted,"","","",Notifications,"",Email and Text message notifications
3071012,An ISI branded email is sent when a work order passes the conformance check,8378,1,9,2,"","IRIS-551,IRIS-1006",9,1495822071,23,1521060251,"","",2059,0,"","","See C3064370
",Verify that an ISI branded email is sent when a work order passes the conformance check,"","","",Notifications,"",Email and Text message notifications
3071013,An ISI branded email is sent when a tech or QC is assigned a work order,8378,1,9,2,"","IRIS-551,IRIS-1004",9,1495822075,23,1521060447,"","",2059,0,"","","See C3064493 and C3064492

",Verify that an ISI branded email is sent when a tech or QC is assigned a work order,"","","",Notifications,"",Email and Text message notifications
3071014,An ISI branded email is sent when a QC package is ready,8378,1,9,2,"","IRIS-551,IRIS-1013",9,1495822082,9,1505846439,"","",2059,0,"","",Verify that an ISI branded email is sent when a QC package is ready,An ISI branded email is sent when a QC package is ready,"","","",Notifications,"",Email and Text message notifications
3071015,An ISI branded email is sent when a QC approves a work order,8378,1,9,2,"","IRIS-551,IRIS-1014",9,1495822088,9,1505846439,"","",2059,0,"","",Verify that an ISI branded email is sent when a QC approves a work order,An ISI branded email is sent when a QC approves a work order,"","","",Notifications,"",Email and Text message notifications
3071016,An ISI branded email is sent when a work order is ready for a user to download,8378,1,9,2,"","IRIS-551,IRIS-1009",9,1495822094,9,1505846439,"","",2059,0,"","",Verify that an ISI branded email is sent when a work order is ready for a user to download,An ISI branded email is sent when a work order is ready for a user to download,"","","",Notifications,"",Email and Text message notifications
3071017,An ISI branded email is sent when a work order fails,8378,1,9,2,"","IRIS-551,IRIS-1007",9,1495822097,9,1505846439,"","",2059,0,"","",Verify that an ISI branded email is sent when a work order fails,An ISI branded email is sent when a work order fails,"","","",Notifications,"",Email and Text message notifications
3071018,An ISI branded email is sent when a QC rejects a work order,8378,1,9,2,"","IRIS-551,IRIS-1010",9,1495822110,9,1505846439,"","",2059,0,"","",Verify that an ISI branded email is sent when a QC rejects a work order,An ISI branded email is sent when a QC rejects a work order,"","","",Notifications,"",Email and Text message notifications
3071019,An ISI branded email is sent when a physician rejects a work order,8378,1,9,2,"","IRIS-551,IRIS-1011",9,1495822111,9,1505846439,"","",2059,0,"","",Verify that an ISI branded email is sent when a physician rejects a work order,An ISI branded email is sent when a physician rejects a work order,"","","",Notifications,"",Email and Text message notifications
3063139,As a physician I receive text messages when the WO's status is FINAL_DOWNLOAD_READY,8378,1,9,2,"","IRIS-281,IRIS-861",9,1495222887,23,1521061123,"","",2059,0,"","Have a physician account with enabled SMS messages, and a valis US mobile number.",See C3064511,Verify that as a physician I receive text messages when the WO's status is FINAL\_DOWNLOAD\_READY,"","","",Notifications,"",Email and Text message notifications
3063140,As a physician I receive text messages when a WO is failed,8378,1,9,2,"","IRIS-281,IRIS-861",9,1495222894,23,1521126579,"","",2059,0,"","Use a Physician with SMS notifications enabled, and a vaild US number configured.","1. login as a Physician.
2. Start a new WO under the patient *Musterman Max*
3. Wait for it to fail.
4. Check the user's mobile phone.",Verify that as a physician I receive text messages when a WO is failed,"","","",Notifications,"",Email and Text message notifications
3117417,An ISI branded hosted page is displayed when changing password after following forgot password link,8378,1,9,2,"","IRIS-1192,IRIS-1198",9,1500324947,23,1521127104,"","",2059,0,"","","1. Go to the SSM login page.
2. Click the 'Don't remember your password?' link.
3. Enter a user's email address.
4. Go to that mailbox and search for the reset password email.
5. Click the 'Reset Password' button.","!(index.php?/attachments/get/128)
","","","",Notifications,"",Email and Text message notifications
3048145,Text notifications should be disabled by default,11885,1,9,2,"","IRIS-914,IRIS-916",9,1493919852,9,1505842249,"","",2059,0,"","",Verify that text notifications are disabled by default when creating a new user,Text notifications are disabled by default,"","","",Notifications > General,8378,""
3055159,Email notifications to physicians contain the WO number instead of the UUID,11885,1,9,2,"","IRIS-493,IRIS-677",9,1494889255,23,1521132680,"","",2059,0,"","","1. Start a new WO for *Musterman Max*
2. Wait for it to fail.
3. An email should be sent to the physician.",Verify that email notifications to physicians contain the WO number and not the UUID,"","","",Notifications > General,8378,""
3055160,Text notifications to physicians contain the WO number instead of the UUID,11885,1,9,2,"","IRIS-493,IRIS-678",9,1494889267,9,1505842250,"","",2059,0,"","",Verify that text notifications to physicians contain the WO number and not the UUID,Text notifications to physicians contain the WO number and not the UUID,"","","",Notifications > General,8378,""
3062711,The user shall be able to select in 'my user preferences' whether or not I receive texts or emails so that I manage the type of notifications I receive,11885,1,9,2,"","IRIS-339,IRIS-901",9,1495046939,23,1521132795,"","",2059,0,"","","1. Login as any user.
2. Hover over your username and select **Preferences**",Verify that the user is be able to select in **Preferences** whether or not I receive texts or emails,"","","",Notifications > General,8378,""
3062712,"The user can enable both test and email, either text or email, or disable the notifications",11885,1,9,2,"","IRIS-339,IRIS-902",9,1495046945,23,1528489574,"","",2059,0,"","","1. Login as any user.
2. Hover over your username and select **Preferences**


","Verify that the user can choose from the following options: 

* Enable both text and email notifications
* Enable either text or email notifications
* Disable notifications","","","",Notifications > General,8378,""
3064350,All notification emails have included link to the work order,11885,1,9,2,"","IRIS-261,IRIS-851",9,1495228018,23,1521132998,"","",2059,0,"","","1. Perform a full End-to-End test.
2. Check the administrator mailbox.","All notification emails include a link to the work order.

!(index.php?/attachments/get/129)
","","","",Notifications > General,8378,""
3069322,As a physician I get a link to the iOS application in the text message,11885,1,9,2,"","IRIS-940,IRIS-982",9,1495665049,9,1505842253,"","",2059,0,Text messages contain link that redirects to iOS app with correct arguments. The URL has the following format: http://localhost:3000/launch_app?email=USER_EMAIL&link=wo_link&uuid=WO_UUID.,"",Verify that as a physician I get a link to the iOS application in the text message,As a physician I get a link to the iOS application in the text message,"","","",Notifications > General,8378,""
3064485,"The /api/v1/login POST returns the user's role ('SuperAdmin', 'Administrator', 'Tech', 'QC', 'Physician')",11246,1,9,2,"","IRIS-205,IRIS-820",9,1495476602,23,1529615568,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/login`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
		'success': 'true',
		'api_token': 'b47f753e-6a09-49d3-8c15-826bc6a6832c',
		'role': 'Physician',
		'requires_change_password': 'false',
		'username': '<username>',
		'email': '<email>'
	}	","","1. POST to the `/api/v1/login` path with valid credentials for a physician user
2. Repeat step `1` for 'SuperAdmin', 'Administrator', 'Tech' and 'QC' users","* Success = `true`:
  * Returns one of these roles: `SuperAdmin`, `Administrator`, `Tech`, `QC`, `Physician`

* Success = `false`:
|||:Case |:Reason
|| Wrong email and/or password | 'Email and password combination not found.'
|| No email | 'Email cannot be blank.'
|| No password | 'Password cannot be blank.'
|| No email and password | 'Email and password cannot be blank.'
|| Disabled user account | 'Your account is disabled. Please contact support at 1-800-876-1310 for help.'
","","","",REST API > Authentication,8379,""
3071024,As an SSM user I have a REST interface for user authentication,11246,1,9,2,"","IRIS-75,IRIS-766,IRIS-362,IRIS-481",9,1495824018,23,1529615343,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/login`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
		'success': 'true',
		'api_token': 'b47f753e-6a09-49d3-8c15-826bc6a6832c',
		'role': 'Physician',
		'requires_change_password': 'false',
		'username': '<username>',
		'email': '<email>'
	}	","","1. POST to the `/api/v1/login` path with valid credentials for a physician user
2. Repeat step `1` for 'SuperAdmin', 'Administrator', 'Tech' and 'QC' users","* If the username and password are valid the user gets Success = `true`:
* If the credentials are not valid the user gets Success = `false`:
|||:Case |:Reason
|| Wrong email and/or password | 'Email and password combination not found.'
|| No email | 'Email cannot be blank.'
|| No password | 'Password cannot be blank.'
|| No email and password | 'Email and password cannot be blank.'
|| Disabled user account | 'Your account is disabled. Please contact support at 1-800-876-1310 for help.'
","","","",REST API > Authentication,8379,""
3070174,The user is informed when they are being rate limited,11246,1,9,2,"","IRIS-691,IRIS-996",9,1495737248,9,1521057107,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/login`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
		'success': 'true',
		'api_token': 'b47f753e-6a09-49d3-8c15-826bc6a6832c',
		'role': 'Physician',
		'requires_change_password': 'false',
		'username': '<username>',
		'email': '<email>'
	}	","",1. Perform several REST API login attempts with valid credentials,"The user is informed when they are being rate limited:

	{
		'success': 'false',
		'reason': 'Your login attempt rate is too high. Please try again in a few minutes.',
		'warning': 'After 5 unsuccessful login attempts your account will be locked. We will send you an email with instructions on how to unlock it.'
	}","","","",REST API > Authentication,8379,""
3053332,Users who are allowed concurrent login can login on multiple devices at once,11246,1,9,2,"","IRIS-315,IRIS-917",9,1494530465,9,1521057933,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/login`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
		'success': 'true',
		'api_token': 'b47f753e-6a09-49d3-8c15-826bc6a6832c',
		'role': 'Physician',
		'requires_change_password': 'false',
		'username': '<username>',
		'email': '<email>'
	}	","","1. As a super admin enable `Concurrent login`
2. POST to the `/api/v1/login` path with valid credentials for a physician user and save token #1
3. Do another POST to the `/api/v1/login` path and save token #2
4. Perform any action using token #1 and #2 (example: refresh token, edit user, create WO, etc)","* User can login on multiple devices at once (several tokens ca be valid)
","","","",REST API > Authentication,8379,""
3053333,Users who are not allowed concurrent login cannot login to multiple devices at once,11246,1,9,2,"","IRIS-315,IRIS-918",9,1494530474,9,1524839976,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/login`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
		'success': 'true',
		'api_token': 'b47f753e-6a09-49d3-8c15-826bc6a6832c',
		'role': 'Physician',
		'requires_change_password': 'false',
		'username': '<username>',
		'email': '<email>'
	}	","","1. As a super admin enable `Concurrent login`
2. POST to the `/api/v1/login` path with valid credentials for a physician user and save token #1
3. Do another POST to the `/api/v1/login` path and save token #2
4. Perform any action using token #1 and #2 (example: refresh token, edit user, create WO, etc)
5. Perform any action using token #2 (example: refresh token, edit user, create WO, etc)","User cannot have concurrent logins: for the example above only token #2 will work, token #1 is expired)
","","","",REST API > Authentication,8379,""
3055164,Users of the IRIS app should be able to reset their password,11246,1,9,2,"","IRIS-491,IRIS-675",9,1494889636,9,1521058450,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/forgot_password`
**Body:**

	{
		'email':'{{email}}'
	}	

**Output:**

	{
		'success':'true'
	}	","","1. POST to the `/api/v1/forgot_password` with a valid email address
2. Go to your email inbox
3. POST to the `/api/v1/forgot_password` with a invalid email address","* Email exists in the database:
  * Success = `true`
  * The user receives an email with instructions to reset the password
* Email does not exist in the database:
  * Success = `false`:
|||:Case |:Reason
|| Missing email | 'Bad parameters.'
|| Invalid email | 'Bad parameters.'","","","",REST API > Authentication,8379,""
3055165,Users of the Intuitive IRIS web portal should be able to reset their password,11246,1,9,2,"","IRIS-491,IRIS-676",9,1494889648,9,1521058705,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/forgot_password`
**Body:**

	{
		'email':'{{email}}'
	}	

**Output:**

	{
		'success':'true'
	}	","","1. POST to the `/api/v1/forgot_password` with a valid email address
2. Go to your email inbox
3. POST to the `/api/v1/forgot_password` with a invalid email address","* Email exists in the database:
  * Success = `true`
  * The user receives an email with instructions to reset the password
* Email does not exist in the database:
  * Success = `false`:
|||:Case |:Reason
|| Missing email | 'Bad parameters.'
|| Invalid email | 'Bad parameters.'","","","",REST API > Authentication,8379,""
3062912,As a REST API user I can sign TOS,11246,1,9,2,"","IRIS-923,IRIS-953",9,1495126401,9,1521059025,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/sign_tos`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
		'success': 'true'
	}	","","1. POST to the `/api/v1/sign_tos` path with valid credentials for a physician user
2. As a super admin go to `Users`
3. Search for the user in 1
4. Click `Show`","* Valid credentials:
  * **Accepted Terms of Service:** `Yes`
* Success = `false`:
|||:Case |:Reason
|| Wrong email and/or password | 'Email and password combination not found.'
|| No email | 'Email cannot be blank.'
|| No password | 'Password cannot be blank.'
|| No email and password | 'Email and password cannot be blank.'
","","","",REST API > Authentication,8379,""
3062913,As a REST API user I cannot login if I didn't sign the TOS,11246,1,9,2,"","IRIS-923,IRIS-954",9,1495126410,9,1521060121,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/sign_tos`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
		'success': 'false',
		'reason': 'Please accept the Terms of Service to continue.',
		'warning': 'After 5 unsuccessful login attempts your account will be locked. We will send you an email with instructions on how to unlock it.'
	}	",**Accepted Terms of Service:** `No`,1. POST to the `/api/v1/login` path with valid credentials for a physician user,"The user cannot login:

	{
		'success': 'false',
		'reason': 'Please accept the Terms of Service to continue.',
		'warning': 'After 5 unsuccessful login attempts your account will be locked. We will send you an email with instructions on how to unlock it.'
	}	","","","",REST API > Authentication,8379,""
3296012,As a blocked user I should not be authenticated against Auth0,11246,1,7,2,"","IRIS-1394,IRIS-1406",9,1510863876,9,1521062292,"","",2059,0,"","","1. Post five times to the /api/v1/login path with invalid password for a physician user to get a user account blocked.
2. Once the user is blocked, make another login call (good or bad).",Log into Auth0 dashboard and make sure that the sixth login call was never received.,"","","",REST API > Authentication,8379,""
3185433,Session Tokens minimum length of 16 byte unpredictable values,11246,1,9,2,"","IRIS-1326,IRIS-1327",9,1505335160,9,1521060922,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/login`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
		'success': 'true',
		'api_token': 'b47f753e-6a09-49d3-8c15-826bc6a6832c',
		'role': 'Physician',
		'requires_change_password': 'false',
		'username': '<username>',
		'email': '<email>'
	}	","",1. POST to the `/api/v1/login` path with valid credentials for a physician user,"* Session tokens are unpredictable values with a length of 16 bytes to prevent guessing attacks and session fixation/hijacking.
* Example of a token: `8f6d9404-84f6-40e4-9a25-d2d68de8135d`
","","","",REST API > Authentication,8379,""
3046023,"When user logs in, check (by Auth0 ID) that user has the same values for email and username in both databases. If they don't match, change SSM values to match Auth0 values",11246,1,9,2,"","IRIS-523,IRIS-700",9,1493663956,9,1521119474,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/login`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
		'success': 'true',
		'api_token': 'b47f753e-6a09-49d3-8c15-826bc6a6832c',
		'role': 'Physician',
		'requires_change_password': 'false',
		'username': '<username>',
		'email': '<email>'
	}	","","* Email address:
  1. Login into Auth
  2. Switch to `auth-iris-stage`
  3. Search for a user and change its email
  4. POST to the `/api/v1/login` path using the username
* Username:
  1. SSH into SSM server
  2. Run `rails console`
  3. Run `User.find(X)` where X is the username you will edit
  4. Change the username
  4. POST to the `/api/v1/login` path using the email address for the user in 3","* Verify that the user's email address in SSM is changed to match the one in Auth0
* Verify that the username in SSM is changed to match the one in Auth0","","","",REST API > Authentication,8379,""
3093298,User gets blocked after 5 failed incorrect login attempts,11246,1,9,2,"","IRIS-964,IRIS-1107",9,1498052488,9,1521061336,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/login`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
		'success': 'false',
		'reason': 'Your account is disabled. Please contact support at 1-800-876-1310 for help.',
		'warning': 'After 5 unsuccessful login attempts your account will be locked. We will send you an email with instructions on how to unlock it.'
	}	","","1. Post five times to the `/api/v1/login` path with invalid password for a physician user
2. Post a sixth time to the `/api/v1/login` path with invalid password for a physician user","1. User gets blocked after 5 failed incorrect login attempts
2. The user gets the following message in the sixth attempt:
  * `Your account is disabled. Please contact support at 1-800-876-1310 for help.`","","","",REST API > Authentication,8379,""
3093299,User account is unblocked upon providing a valid unblock token,11246,1,9,2,"","IRIS-964,IRIS-1108",9,1498052540,9,1521061857,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/login`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}","","1. Post five times to the `/api/v1/login` path with invalid password for a physician user
2. Verify that you are blocked by posting to the `/api/v1/login` path with valid credentials
3. Open your Inbox
4. Click `UNBLOCK ACCOUNT` button
5. Post to the `/api/v1/login` path with valid credentials","* The user receives an email with tittle `Unblock Your IRIS User Account`
* The user account is unblocked upon providing a valid unblock token","","","",REST API > Authentication,8379,""
3079941,Users cannot search studies of disabled programs,11248,1,9,2,"","IRIS-442,IRIS-1034",9,1496863319,9,1521064616,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/studies`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
		'success': 'false',
		'reason': 'The program you are attempting to access is currently disabled. Please contact support at 1-800-876-1310 for help.'
	}","","1. From SSM disable a program
2. Post to `/api/v1/studies` using that disabled program","The user cannot search studies of a disabled program:

	{
		'success': 'false',
		'reason': 'The program you are attempting to access is currently disabled. Please contact support at 1-800-876-1310 for help.'
	}","","","",REST API > Search,8379,""
3071023,As an iOS Kitware application I have a REST interface to search for DICOM studies,11248,1,9,2,"","IRIS-76,IRIS-767",9,1495824010,9,1521064481,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/studies`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
	    'success': 'true',
	    'results': 
	        {
	            '0008,0020': '20100505',
	            '0008,0030': '010100.000000',
	            '0008,0050': '1',
	            '0008,0052': 'STUDY',
	            '0008,0054': 'DCM4CHEE',
	            '0008,0056': 'ONLINE',
	            '0008,1030': 'Kidney Protocol',
	            '0010,0010': 'Doe^John',
	            '0010,0020': 'HumanSample0010',
	            '0010,0030': '19350615',
	            '0020,000D': '1.2.826.0.1.3680043.2.1125.1.35009165105128054801083078269866516',
	            '0020,0010': 'AA_0010',
	            '0088,0130': '',
	            '0088,0140': '',
	            'PACS_NAME': 'PACS-PC1',
	            'GATEWAY_ID': 1,
	            'PROGRAM_ID': 1,
	            'PACS_VIEWER_LINK': 'https://pvstaging401.pacsviewer.net:443/e/viewer?studyUID=1.2.826.0.1.3680043...&CLOAccessKeyID=pyyczLPFWzlEIjHRjQQe&expiry=1521065679&applicationID=IRIS&usergroup=IRIS&serviceInstance=IRIS&signature=7gEyeAVR'
	        }
	    
	}","","1. Post to `/api/v1/studies` searching by:
  * `first_name` only
  * `last_name` only
  * `date_of_birth` only
  * Full search (all three)
  * Using wildcards (`*`). Example: `Do*`","• If there is a match the user gets the following response:

	{
	    'success': 'true',
	    'results': 
	        {
	            '0008,0020': '20100505',
	            '0008,0030': '010100.000000',
	            '0008,0050': '1',
	            '0008,0052': 'STUDY',
	            '0008,0054': 'DCM4CHEE',
	            '0008,0056': 'ONLINE',
	            '0008,1030': 'Kidney Protocol',
	            '0010,0010': 'Doe^John',
	            '0010,0020': 'HumanSample0010',
	            '0010,0030': '19350615',
	            '0020,000D': '1.2.826.0.1.3680043.2.1125.1.35009165105128054801083078269866516',
	            '0020,0010': 'AA_0010',
	            '0088,0130': '',
	            '0088,0140': '',
	            'PACS_NAME': 'PACS-PC1',
	            'GATEWAY_ID': 1,
	            'PROGRAM_ID': 1,
	            'PACS_VIEWER_LINK': 'https://pvstaging401.pacsviewer.net:443/e/viewer?studyUID=1.2.826.0.1.3680043...&CLOAccessKeyID=pyyczLPFWzlEIjHRjQQe&expiry=1521065679&applicationID=IRIS&usergroup=IRIS&serviceInstance=IRIS&signature=7gEyeAVR'
	        }
	    
	}

* Success = `false`:
|||:Case |:Reason
|| Wrong email and/or password | 'Email and password combination not found.'
|| Missing or bad parameters | 'Bad parameters.'
|| Disabled program | 'The program you are attempting to access is currently disabled. Please contact support at 1-800-876-1310 for help.'
|| Bad gateway | 'The IRIS service is inaccessible. Please contact support at 1-800-876-1310 for help.'
","","","",REST API > Search,8379,""
3085951,As a super admin or seg admin I can get a list of tech username,11249,1,9,2,"","IRIS-966,IRIS-1062",9,1497452381,9,1521119885,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/tech_users`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
		'success': 'true',
		'tech_users': 
			'santi_tech',
			'segmentationtech'
	}	","","1. As an admin post to the `/api/v1/tech_users` path with valid credentials
2. Repeat for super admin user","• As a super admin or seg admin I can get a list of tech usernames:

	{
		'success': 'true',
		'tech_users': 
			'santi_tech',
			'segmentationtech'
	}

* Success = `false`:
|||:Case |:Reason
|| Wrong email and/or password | 'Email and password combination not found.'
|| Bad or missing parameters | 'Bad parameters.'","","","",REST API > Users,8379,""
3085952,As a super admin or seg admin I can have a list of QC usernames,11249,1,9,2,"","IRIS-1061,IRIS-1063",9,1497452497,9,1521119886,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/qc_users`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
		'success': 'true',
		'qc_users': 
			'santi_qc',
			'qctechnician'
	}	","","1. As an admin post to the `/api/v1/qc_users` path with valid credentials
2. Repeat for super admin user","• As a super admin or seg admin I can get a list of QC usernames:

	{
		'success': 'true',
		'qc_users': 
			'santi_qc',
			'qctechnician'
	}

* Success = `false`:
|||:Case |:Reason
|| Wrong email and/or password | 'Email and password combination not found.'
|| Bad or missing parameters | 'Bad parameters.'","","","",REST API > Users,8379,""
3048148,Do not return nil but rather empty string for attributes returned in JSON format,11249,1,9,2,"",IRIS-582,9,1493924747,9,1521120502,"","",2059,0,"Phone, salesforce_id and default_program_id should not be nil but empty string or -1 for default_program_id.

Fetch user information (/api/v1/user) and check that there are no nil values.

**Method:** `POST`
**URL:** `/api/v1/user`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
		'success': 'true',
		'info': {
				'username': 'santi_phy',
				'first_name': 'Santi',
				'last_name': 'Test',
				'phone': '+18056662341',
				'preferences': '{\'enable_email\':false,\'enable_text\':false}',
				'email': 'snavallas+phy_stg@gmail.com',
				'role': 5,
				'salesforce_id': '134555',
				'is_enabled': true,
				'created_at': '2016-10-20T16:58:31.000Z',
				'updated_at': '2018-03-15T13:06:21.000Z',
				'default_program_id': 26
	}","","1. Login into SSM as a super admin and remove the phone field for a non-physician user:
2. Post to `/api/v1/user` path using the non-physician credentials","The following values are returned instead of nil in the JSON output:

|||:Field|Value:
|| phone |  `''`
|| salesforce_id |  `''`
|| default_program_id |  `-1`
","","","",REST API > Users,8379,""
3061726,As a physician I can change my default program so that I can manage my workflow,11249,1,9,2,"","IRIS-427,IRIS-603",9,1494976403,9,1521121564,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/update_user`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}',
		'default_program_id':'2'
	}

**Output:**

	{
		'success': 'true'
	}","",1. Post to `/api/v1/user` path using physician credentials,"* The physician's default program is changed is the selected program exists and it's in the physician's list
* Success = `false`:
|||:Case |:Reason
|| default_program_id does not exist or is not in the physician's list | 'The IRIS service is inaccessible. Please contact support at 1-800-876-1310 for help.'
|| Wrong email and/or password | 'Email and password combination not found.'
|| Bad or missing parameters | 'Bad parameters.'","","","",REST API > Users,8379,""
3062608,Fetch physician user's encryption key,11249,1,9,2,"","IRIS-358,IRIS-634",9,1495029753,9,1521120871,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/encryption_key`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
		'success': 'true',
		'encryption_key': '134555'
	}	","",1. Post to `/api/v1/encryption_key` using valid credentials,"* The user gets the `encryption_key` value
* Success = `false`:
|||:Case |:Reason
|| Wrong email and/or password | 'Email and password combination not found.'
|| Bad or missing parameters | 'Bad parameters.'","","","",REST API > Users,8379,""
3062611,All roles of users are able to update their profile from an iOS device,11249,1,9,2,"","IRIS-356,IRIS-632",9,1495029890,23,1529615120,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/update_user`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}',
		'first_name':'{{first_name}}',
		'last_name':'{{last_name}}',
		'new_username':'{{username}}',
		'email':'{{email}}',
		'phone':'',
		'preferences': '{\'enable_email\':false,\'enable_text\':false}'
		'default_program_id': 1
	}

**Output:**

	{
		'success': 'true'
	}","","1. POST to the `/api/v1/update_user` path with valid credentials for a physician user using valid values for one or more of these fields:
  * 'first_name'
  * 'last_name'
  * 'new_username'
  * 'email'
  * 'phone'
  * 'preferences'
  * 'default_program_id'
2. For each of these fields, use invalid values to post to the `/api/v1/update_user` path:
  * 'new_username': use an existing username, one containing ilegal characters and one too long
  * 'email': use an invalid email and one already in use
  * 'phone': use an invalid phone format
  * 'preferences': use invalid preferences format
  * 'default_program_id': use an invalid program or a program not in the physician's list
3. Repeat steps `1` and `2` for 'SuperAdmin', 'Administrator', 'Tech' and 'QC'' users","* All roles of users are able to update their profile from an iOS device
* Success = `false`:
|||:Case |:Reason
|| Wrong email and/or password | 'Email and password combination not found.'
|| Invalid or missing parameters | 'Bad parameters.'
|| Username already in use | 'This username is already in use.'
|| Username is too long | 'This username contains illegal characters or is too long.'
|| Invalid username | 'This username contains illegal characters or is too long.'
|| Invalid email | 'You need to enter a valid email format.'
|| Email already in use | 'This email is already in use.'
|| Invalid phone | 'Phone is invalid'
|| Invalid preferences format | 'Preferences is invalid'
|| default_program_id does not exist or is not in the physician's list | 'The IRIS service is inaccessible. Please contact support at 1-800-876-1310 for help.'","","","",REST API > Users,8379,""
3062716,"As an iOS user, I shall be able to update my preferences for text and email notifications from within the iOS app",11249,1,9,2,"","IRIS-334,IRIS-893,IRIS-894,IRIS-895",9,1495047144,23,1529615316,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/update_user`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}',
		'first_name':'{{first_name}}',
		'last_name':'{{last_name}}',
		'new_username':'{{username}}',
		'email':'{{email}}',
		'phone':'',
		'preferences': '{\'enable_email\':false,\'enable_text\':false}'
		'default_program_id': 1
	}

**Output:**

	{
		'success': 'true'
	}","","1. POST to the `/api/v1/update_user` path with valid credentials for a physician user using valid values preferences field:
  * 'preferences'
2. POST to the `/api/v1/update_user` path with valid credentials for a physician user using invalid values preferences field
3. Repeat steps `1` and `2` for 'SuperAdmin', 'Administrator', 'Tech' and 'QC' users","* All roles of users are able to update their preferences
* Success = `false`:
|||:Case |:Reason
|| Wrong email and/or password | 'Email and password combination not found.'
|| Invalid or missing parameters | 'Bad parameters.'
|| Invalid preferences format | 'Preferences is invalid'","","","",REST API > Users,8379,""
3062939,Return 'Bad parameters' if the user is trying to update fields they should not update,11249,1,9,2,"","IRIS-951,IRIS-972",9,1495130218,9,1521135537,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/update_user`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}',
		'first_name':'{{first_name}}',
		'last_name':'{{last_name}}',
		'new_username':'{{username}}',
		'email':'{{email}}',
		'phone':'',
		'preferences': '{\'enable_email\':false,\'enable_text\':false}'
		'default_program_id': 1
	}

**Output:**

	{
		'success': 'false'
		'reason': 'Bad parameters.'
	}","","1. Post to `/api/v1/update_user` using any of these fields:
  * `created_at`
  * `updated_at`
  * `salesforce_id`
  * is_enabled
  * api_token_expiration
  * auth0_id
  * requires_change_password
  * concurrent_login_allowed
  * signed_tos
  * failed_login_attempts","The user gets the following output when trying to update fields that should not be updated:

	{
		'success': 'false'
		'reason': 'Bad parameters.'
	}","","","",REST API > Users,8379,""
3091484,"When reseting my password and I enter my email, the formatting of the email is checked",11249,1,9,2,"","IRIS-1052,IRIS-1096",9,1497917053,9,1521143218,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/forgot_password`
**Body:**

	{
		'email': 'test.com
	}

**Output:**

	{
		'success': 'false',
		'reason': 'Bad parameters.'
	}	","",1. POST to the `/api/v1/login` path using an invalid email (example: `test.com`),"* When reseting my password and I enter my email, the formatting of the email is checked
* The user gets the following output:

	{
		'success': 'false',
		'reason': 'Bad parameters.'
	}	","","","",REST API > Users,8379,""
3131996,'QCT' to access and execute the following functions via the iOS application,11249,1,9,2,"","IRIS-1183, IRIS-1184",14,1501710159,9,1505848712,"","",2059,0,"The SSM shall allow the 'QCT' to access and execute the following functions via the iOS application:

1. Login to the application.
2. Review the '3DA' work order data packages of the work orders assigned to them.
3. Perform QC and complete the QC review.
4. Add comments to the segmentation order.
5. Change work order status to QC approved or rejected, which triggers notification to the 'SGA'.","",Verify that QC users can perform the actions described above.,Verify that QC users can perform the actions described above.,"","","",REST API > Users,8379,""
3131998,Physician 'PHY' access and execute functions via the iOS application,11249,1,9,2,"","IRIS-1243, IRIS-1245",14,1501710403,9,1524770870,"","",2059,0,"","","1. Login to the application.
2. Search for ‘OP’ DICOM studies by patient.
3. View a selected ‘OP’ DICOM study.
4. Create a work order for an ‘OP’ DICOM study.
5. Add comments to the work order before submission.
6. Review the '3DP' work order data package.
7. Approve or reject the '3DP' work order data package.
8. Add comments to the rejected '3DP' work order data package.
9. Check the status of submitted work orders.","Physician users can:

* Search for DICOM studies
* View DICOM studies
* Add comments to the WO before submission
* Approve or Reject a WO
* Add comments when rejecting a WO
* Check the status of WOs","","","",REST API > Users,8379,""
3046022,"When a user is logged onto a device that uses the REST API, I must enter my old password prior to changing my password using the app",11249,1,9,2,"","IRIS-532,IRIS-702",9,1493663186,9,1521144151,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/change_password`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}',
		'new_password': '{{new_password}}', 
		'confirm_new_password': '{{new_password}}'
	}

**Output:**

	{
		'success': 'true'
	}	","","1. Via REST API update your password (`/api/v1/change_password`) sending old and new passowrds
2. Try to update your password (`/api/v1/change_password`) with the following conditions:
  * Invalid credentials (username and/or token)
  * Without your old password
  * With an incorrect old password
  * Without new passwords matching
  * With a week new password (example: `password`)
  * With a new password that you have used recently
  * With a password that contains personal information (example: username or name)","* The user can change the password is the old one is provided
* Success = `false`:
|||:Case |:Reason
|| Wrong email and/or password | 'Email and password combination not found.'
|| Bad or missing parameters | 'Bad parameters.'
|| Incorrect old password | 'Your old password is incorrect.'
|| Passwords do not match | 'New passwords do not match.'
|| Password is too weak | 'New password is too weak.'
|| Password has been used | 'New password has been used recently.'
|| Password contains username | 'Password cannot contain personal information.'","","","",REST API > Users,8379,""
3131004,Communication for Physician User to iOS Application and Web Application via REST API,11249,1,9,2,"","IRIS-1232, IRIS-1233",14,1501620760,9,1521145623,"","",2059,0,"Communication to the SSM for Physician User to iOS Application and Web Application via REST API

# A physician can login into the iOS app.
**Method:** `POST`
**URL:** `/api/v1/login`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
		'success': 'true',
		'api_token': 'b47f753e-6a09-49d3-8c15-826bc6a6832c',
		'role': 'Physician',
		'requires_change_password': 'false',
		'username': '<username>',
		'email': '<email>'
	}	

# A physician can search for a patient.
# A physician can view a study.
**Method:** `POST`
**URL:** `/api/v1/studies`
**Body:**

	{
		'username': '{{username}}', 
		'password': '{{pwd}}'
	}

**Output:**

	{
	    'success': 'true',
	    'results': 
	        {
	            '0008,0020': '20100505',
	            '0008,0030': '010100.000000',
	            '0008,0050': '1',
	            '0008,0052': 'STUDY',
	            '0008,0054': 'DCM4CHEE',
	            '0008,0056': 'ONLINE',
	            '0008,1030': 'Kidney Protocol',
	            '0010,0010': 'Doe^John',
	            '0010,0020': 'HumanSample0010',
	            '0010,0030': '19350615',
	            '0020,000D': '1.2.826.0.1.3680043.2.1125.1.35009165105128054801083078269866516',
	            '0020,0010': 'AA_0010',
	            '0088,0130': '',
	            '0088,0140': '',
	            'PACS_NAME': 'PACS-PC1',
	            'GATEWAY_ID': 1,
	            'PROGRAM_ID': 1,
	            'PACS_VIEWER_LINK': 'https://pvstaging401.pacsviewer.net:443/e/viewer?studyUID=1.2.826.0.1.3680043...&CLOAccessKeyID=pyyczLPFWzlEIjHRjQQe&expiry=1521065679&applicationID=IRIS&usergroup=IRIS&serviceInstance=IRIS&signature=7gEyeAVR'
	        }
	    
	}

# A physician can place an order.
**Method:** `POST`
**URL:** `/api/v1/work_order_submit`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'study_uuid':'1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161', 
		'series_uuid':'', 
		'pacs_name': 'PACS-PC1', 
		'patient_name': 'Perez^Juan', 
		'patient_dob': '19320409', 
		'program_id': '1', 
		'gateway_id': '1',
		'instructions':'Instructions from {{username}}',
		'study_date': '20070625', 
		'study_description': 'REST API',
		'review_json': {'Work_Order_UUID':'','JSON_Review_Version':'1.0','State':'INIT','Events':,'Current_Revision':0,'Quality_Control_Criteria':{'kidney':{'Anatomy':'parenchyma','Criteria':{'Name':'Outer Boundary','Description':'Check that outer boundaries of kidney are clearly segmented. No leaks to outer regions or missing sections of outer kidney'},{'Name':'Inner Boundary','Description':'Check that inner kidney parenchyma is segmented clearly. Make sure that vessels, collecting system, and fat are left unsegmented'},{'Name':'Undersegmentation','Description':'Check that masses within the kidney are completely segmented, and that the parenchyma is segmented only on the inner mass portion for masses that extend out of the kidney (not the outer, so that there is no parenchyma border around the mass)'}},{'Anatomy':'collecting system','Criteria':{'Name':'Ureter','Description':'Check that ureter is clearly segmented'},{'Name':'Boundary','Description':'Check that collecting system boundaries are clearly defined – make sure that other parts of the kidney (fat, vessels, parenchyma)unsegmented'},{'Name':'Extension','Description':'Check that the collecting system reaches the start of renal pyramids but does not extend into them'},{'Name':'Continuity','Description':'Check that the segmentation is continuous and that there are no gaps between segmented regions'}},{'Anatomy':'Vein','Criteria':{'Name':'Coverage','Description':'IVC is segmented from 1 rib above kidney to bottom of kidneys'},{'Name':'Outline','Description':'Check that IVC is clearly outlined and has a distinct cylindrical shape (unless there is an abnormality in shape)'},{'Name':'Spacing','Description':'neighboring vessels are not fused together. There should be space between vessels that are not directly connected'},{'Name':'Leakage','Description':'vessel segmentation does not leak into other regions, especially into the parenchyma and fat'},{'Name':'Extension','Description':'Check that there is enough detail in segmentation and that veins extend into the kidney if possible'}},{'Anatomy':'Artery','Criteria':{'Name':'Coverage','Description':'Check that Aorta is segmented from (i) about 1 rib above kidney to (ii) bottom of kidneys'},{'Name':'Outline','Description':'Check that Aorta is clearly outlined and has a distinct cylindrical shape (unless there is an abnormality in shape)'},{'Name':'Spacing','Description':'neighboring vessels are not fused together. There should be space between vessels that are not directly connected'},{'Name':'Leakage','Description':'vessel segmentation does not leak into other regions, especially into the parenchyma and fat'},{'Name':'Extension','Description':'Check that there is enough detail in segmentation and that arteries extend into the kidney if possible'}},{'Anatomy':'mass','Criteria':{'Name':'Coverage','Description':'Check that each segmentation boundary covers entire mass area. (Better oversegment than undersegment)'},{'Name':'Gap','Description':'Check that masses are segmented enough so that there is no gap between parenchyma and mass'}}},'Revisions':{'Version':0,'Timestamp':'UTC of revision creation','Segmentation':{'kidney':{'Label':'01','Anatomy':'parenchyma','Description':'right','Index':'1','Comment':'','Enabled':true,'Issue':},{'Label':'02','Anatomy':'parenchyma','Description':'left','Index':'1','Comment':'','Enabled':true,'Issue':},{'Label':'03','Anatomy':'Collecting System','Description':'right','Index':'1','Comment':'','Enabled':true,'Issue':},{'Label':'04','Anatomy':'Collecting System','Description':'left','Index':'1','Comment':'','Enabled':true,'Issue':},{'Label':'05','Anatomy':'Vein','Description':'','Index':'1','Comment':'','Enabled':true,'Issues':},{'Label':'06','Anatomy':'Artery','Description':'','Index':'1','Comment':'','Enabled':true,'Issues':},{'Label':'07','Anatomy':'mass','Description':'right','Index':'1','Comment':'','Enabled':true,'Issues':},{'Label':'08','Anatomy':'mass','Description':'left','Index':'1','Comment':'','Enabled':true,'Issues':}}}}
	}

**Output:**

	{
		'success': 'true',
		'uuid': 'fe26d676-17b6-47a8-bfb7-dfc155e25666',
		'id': 'SEG00005080'
	}

# A physician can download the 3DP.
**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'0ca6707e-be4b-481a-a709-9ae732bd317c' 
	}

**Output:**

	{
		'success': 'true',
		'results': {
			'id': 'SEG00005024',
			'uuid': '0ca6707e-be4b-481a-a709-9ae732bd317c',
			'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
			'series_instance_uuid': '',
			'state': 'FINAL_DOWNLOAD_READY',
			'error': '',
			'resolution': '',
			'rejected_at': '',
			'rejected_by': 'None',
			'version_number': 1,
			'patient_name': 'Perez^Juan',
			'patient_dob': '19320409',
			'study_description': 'REST API',
			'study_date': '20070625',
			'delivery_date': '2018-03-12T19:03:46.000Z',
			'instructions': 'Instructions from santi_phy',
			'created_at': '2018-03-12T18:56:36.000Z',
			'pacs_name': 'PACS-PC1',
			'program_id': 1,
			'gateway_id': 1,
			'segmentation_type': 'KIDNEY',
			'conformance_json': '{\'FAILED_SERIES\': , ...',
			'slice_thickness': '3.000',
			'review_json': '{\'Work_Order_UUID\':\'0ca6707e-be4b-481a-a709-9ae732bd317c\',\'JSON_Review_Version\':\'1.0\',\'State\':\'ADMIN_APPROVED\',\'Events\':{\'Timestamp\':\'2018-03-12 18:56:35 +0000\',...',
			'package_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/package/0ca6707e-be4b-481a-a709-9ae732bd317c.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180315%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180315T201615Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=caadca51870f24d163475e47ada5fe0edecb2e06c1c23b43b9c24eb7985ecc4b',
			'package_checksum': 'f96af9db285c2fae24537887a23dc88a551a306de29d83ea8069960f9df934d8',
			'qc_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/qc/0ca6707e-be4b-481a-a709-9ae732bd317c.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180315%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180315T201615Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=ed3f6e88690ae7d3fca9605f032d66c695930bb030ad2660e180dbfe5b7c4668',
			'qc_package_checksum': '4434553337565434ba8e32ad2ef6187583443141f08eed43bf961d96495b69ea',
			'pacs_viewer_link': 'https://pvstaging401.pacsviewer.net:443/e/viewer?studyUID=1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161&CLOAccessKeyID=pyyczLPFWzlEIjHRjQQe&expiry=1521146775&applicationID=IRIS&usergroup=IRIS&serviceInstance=IRIS&signature=G95r5K8g75MeRGr69KQ6aoXrz4k%3D',
			'measurement_json': '',
			'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/0ca6707e-be4b-481a-a709-9ae732bd317c.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180315%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180315T201615Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=5364055ed88fc5422ebd778b1c135ccd4645d9f4a282c28f005ef55a4fb80ca4'
		}
	}","","1. Post to `/api/v1/login` path
2. Post `/api/v1/studies` path to search for a patient
3. Use the `PACS_VIEWER_LINK` link from `2` to see the study
4. Post to `/api/v1/work_order_submit` (use the script in the description)
5. Post to `/api/v1/work_order` to view the work order created in `4`
6. Use the `package_download` link from `5` and download the 3DP","From REST API a physician can:
 
* Login into the iOS app.
* Search for a patient.
* View a study.
* Place an order.
* Download the 3DP.","","","",REST API > Users,8379,""
3079942,Users cannot submit new work orders for disabled programs,11250,1,9,2,"","IRIS-442,IRIS-1035",9,1496863334,9,1524839071,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order_submit`
**Body:** See case C3064372(https://intouch.testrail.net/index.php?/cases/view/3064372) for the complete review json.

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'study_uuid':'1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161', 
		'series_uuid':'', 
		'pacs_name': 'PACS-PC1', 
		'patient_name': 'Perez^Juan', 
		'patient_dob': '19320409', 
		'program_id': '1', 
		'gateway_id': '1',
		'instructions':'Instructions from {{username}}',
		'study_date': '20070625', 
		'study_description': 'REST API',
		'review_json': {
			'Work_Order_UUID': '',
			'JSON_Review_Version': '1.0',
			'State': 'INIT',
			'Events': ,
			'Current_Revision': 0,
			'Quality_Control_Criteria': {
			}
		}
	}

**Output:**

	{
		'success': 'false',
		'reason': 'The program you are attempting to access is currently disabled. Please contact support at 1-800-876-1310 for help.'
	}","","1. As a super admin disable a program
2. As a physician post to `/api/v1/work_order_submit` using that disabled program (`program_id`)","The physician cannot submit a new work order for a disabled program:

 * `{'success': 'false', 'reason': 'The program you are attempting to access is currently disabled. Please contact support at 1-800-876-1310 for help.'}`","","","",REST API > Work Orders,8379,""
3081623,As a user I get a link to the original anonymized study in work order description or work order list,11250,1,9,2,"","IRIS-1021,IRIS-1060",9,1497050138,9,1524852827,"","",2059,0,"• **List Work Orders**
**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'page':'1', 
		'per_page': '10'
	}

**Output:**

	{
		'success': 'true',
		'results': 
			{
				'id': 'SEG00005417',
				'uuid': '976217bb-5f2f-4533-94ae-cf8565b73781',
				'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
				'series_instance_uuid': '',
				'state': 'ORIGINAL_READY',
				'slice_thickness': '3.000',
				'error': '',
				'resolution': '',
				'rejected_at': '',
				'rejected_by': 'None',
				'version_number': 0,
				'patient_name': 'Perez^Juan',
				'patient_dob': '19320409',
				'study_description': 'REST API',
				'study_date': '20070625',
				'delivery_date': '2018-05-04T14:00:01.000Z',
				'instructions': 'Instructions from santi_phy',
				'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/976217bb-5f2f-4533-94ae-cf8565b73781.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180427%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180427T141102Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=b106ee51c4403b8b27bc3aea8b9fca4e918c251a90d731ac86bea077318c87d6',
				'created_at': '2018-04-27T14:00:01.000Z'
			}
		
	}

• **Show Work Order**
**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'a15b4882-0752-4e03-8c22-708a15de0dfa'
	}

**Output:**

	{
		'success': 'true',
		'results': {
			'id': 'SEG00005411',
			'uuid': '14908974-2159-44fb-b149-495899dac707',
			'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
			'series_instance_uuid': '',
			'state': 'ORIGINAL_READY',
			'error': '',
			'resolution': '',
			'rejected_at': '',
			'rejected_by': 'None',
			'version_number': 0,
			'patient_name': 'Perez^Juan',
			'patient_dob': '19320409',
			'study_description': 'REST API',
			'study_date': '20070625',
			'delivery_date': '2018-05-03T19:29:06.000Z',
			'instructions': 'Instructions from santi_phy',
			'created_at': '2018-04-26T19:29:07.000Z',
			'pacs_name': 'PACS-PC1',
			'program_id': 1,
			'gateway_id': 1,
			'segmentation_type': 'KIDNEY',
			'conformance_json': '{\'FAILED_SERIES\': , \'STUDY_STATUS\': \'PASSED\'}',
			'package_download': '',
			'package_checksum': '',
			'qc_download': '',
			'qc_package_checksum': '',
			'pacs_viewer_link': 'https://pvstaging401.pacsviewer.net:443/e/viewer?studyUID=1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161&CLOAccessKeyID=pyyczLPFWzlEIjHRjQQe&expiry=1524776602&applicationID=IRIS&usergroup=IRIS&serviceInstance=IRIS&signature=dyG%2FC5MZ4sGfHSw9u6h0LtUOh2M%3D',
			'measurement_json': '',
			'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/14908974-2159-44fb-b149-495899dac707.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180426%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180426T203322Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=fbd510772f3be1d967fdb5dd896b2d31fc50231660cc4bd5161d81ba5815706e'
		}
	}","","1. As a physician post to `/api/v1/work_orders`
2. As a physician post to `/api/v1/work_order`
3. Repeat steps 1 and 2 for all user","Verify that the output for `/api/v1/work_orders` and `/api/v1/work_order` contains the link to the original anonymized study:

* `'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/14908974-2159-44fb-b149-495899dac707.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180426%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180426T203322Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=fbd510772f3be1d967fdb5dd896b2d31fc50231660cc4bd5161d81ba5815706e'`","","","",REST API > Work Orders,8379,""
3055188,I can see the slick thickness from the conformance JSON,11250,1,9,2,"","IRIS-455,IRIS-656",9,1494892681,9,1505849350,"","",2059,0,"","","1. Verify that I can see the slick thickness from the conformance JSON
2. Verify that /api/v1/work_order returns the _slice\_thickness_ value",I can see the slick thickness from the conformance JSON,"","","",REST API > Work Orders,8379,""
3055189,Study date should be present in the work order information I get trough the REST API,11250,1,9,2,"","IRIS-454,IRIS-617",9,1494892745,9,1505849351,"","",2059,0,"","",Verify that study date should be present in the work order information I get trough the REST API,Study date should be present in the work order information I get trough the REST API,"","","",REST API > Work Orders,8379,""
3062598,As a physician user I want to see details of previous states of work orders that are related when querying for patients,11250,1,9,2,"","IRIS-360,IRIS-635,IRIS-636",9,1495029523,9,1524851875,"","",2059,0,"1. WOs list now show details of previous states.
2. Where we link patient DICOM studies with previous work orders for rejections, the following fields are required
	* Previous rejection:
		- a. Order date
		- b. Reject date
		- c. Rejected by (ISI or Physician only, no ISI personnel name)
		- d. Reason (DICOM conformance, Physician comment, Seg Admin comment)
		- e. Resolution (comments from Seg Admin only)

• **List Work Orders**
**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'page':'1', 
		'per_page': '10'
	}

**Output:**

	{
		'success': 'true',
		'results': 
			{
				'id': 'SEG00005417',
				'uuid': '976217bb-5f2f-4533-94ae-cf8565b73781',
				'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
				'series_instance_uuid': '',
				'state': 'ORIGINAL_READY',
				'slice_thickness': '3.000',
				'error': '',
				'resolution': '',
				'rejected_at': '',
				'rejected_by': 'None',
				'version_number': 0,
				'patient_name': 'Perez^Juan',
				'patient_dob': '19320409',
				'study_description': 'REST API',
				'study_date': '20070625',
				'delivery_date': '2018-05-04T14:00:01.000Z',
				'instructions': 'Instructions from santi_phy',
				'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/976217bb-5f2f-4533-94ae-cf8565b73781.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180427%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180427T141102Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=b106ee51c4403b8b27bc3aea8b9fca4e918c251a90d731ac86bea077318c87d6',
				'created_at': '2018-04-27T14:00:01.000Z'
			}
		
	}

• **Show Work Order**
**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'a15b4882-0752-4e03-8c22-708a15de0dfa'
	}

**Output:**

	{
		'success': 'true',
		'results': {
			'id': 'SEG00005411',
			'uuid': '14908974-2159-44fb-b149-495899dac707',
			'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
			'series_instance_uuid': '',
			'state': 'ORIGINAL_READY',
			'error': '',
			'resolution': '',
			'rejected_at': '',
			'rejected_by': 'None',
			'version_number': 0,
			'patient_name': 'Perez^Juan',
			'patient_dob': '19320409',
			'study_description': 'REST API',
			'study_date': '20070625',
			'delivery_date': '2018-05-03T19:29:06.000Z',
			'instructions': 'Instructions from santi_phy',
			'created_at': '2018-04-26T19:29:07.000Z',
			'pacs_name': 'PACS-PC1',
			'program_id': 1,
			'gateway_id': 1,
			'segmentation_type': 'KIDNEY',
			'conformance_json': '{\'FAILED_SERIES\': , \'STUDY_STATUS\': \'PASSED\'}',
			'package_download': '',
			'package_checksum': '',
			'qc_download': '',
			'qc_package_checksum': '',
			'pacs_viewer_link': 'https://pvstaging401.pacsviewer.net:443/e/viewer?studyUID=1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161&CLOAccessKeyID=pyyczLPFWzlEIjHRjQQe&expiry=1524776602&applicationID=IRIS&usergroup=IRIS&serviceInstance=IRIS&signature=dyG%2FC5MZ4sGfHSw9u6h0LtUOh2M%3D',
			'measurement_json': '',
			'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/14908974-2159-44fb-b149-495899dac707.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180426%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180426T203322Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=fbd510772f3be1d967fdb5dd896b2d31fc50231660cc4bd5161d81ba5815706e'
		}
	}","","1. As a physician post to `/api/v1/work_orders`
2. As a physician post to `/api/v1/work_order`","Verify that the output for `/api/v1/work_orders` and `/api/v1/work_order` contains the following fields:

|||:Name|:Field|:Value
|| Order date | created_at | YYYY-MM-DDTHH:MM:SS.SSSZ
|| Reject date | rejected_at | YYYY-MM-DDTHH:MM:SS.SSSZ
|| Rejected by | rejected_by | ISI or Physician only, no ISI personnel name
|| Reason | error | DICOM conformance, Physician comment, Seg Admin comment
|| Resolution | resolution | Comments from Seg Admin only","","","",REST API > Work Orders,8379,""
3071037,As a REST API user I cannot successfully submit work order with invalid review_json,11250,1,9,2,"","IRIS-919,IRIS-993",9,1495838523,9,1505849352,"","",2059,0,"A valid JSON should have the following tags:

* 'Work_Order_UUID'
* 'JSON_Review_Version'
* 'State'
* 'Events'
* 'Current_Revision'
* 'Quality_Control_Criteria'","",Verify that as a REST API user I cannot successfully submit work order with invalid review\_json,As a REST API user I cannot successfully submit work order with invalid review\_json,"","","",REST API > Work Orders,8379,""
3071038,As a REST API user I cannot successfully update_review with invalid review_json,11250,1,9,2,"","IRIS-919,IRIS-994",9,1495838529,9,1505849352,"","",2059,0,"A valid JSON should have the following tags:

* 'Work_Order_UUID'
* 'JSON_Review_Version'
* 'State'
* 'Events'
* 'Current_Revision'
* 'Quality_Control_Criteria'","",Verify that as a REST API user I cannot successfully update_review with invalid review\_json,s a REST API user I cannot successfully update_review with invalid review\_json,"","","",REST API > Work Orders,8379,""
3079107,As a REST interface user I have an order id as a response when I create a work order,11250,1,9,2,"","IRIS-1022,IRIS-1044",9,1496754686,9,1524839682,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order_submit`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'study_uuid':'1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161', 
		'series_uuid':'', 
		'pacs_name': 'PACS-PC1', 
		'patient_name': 'Perez^Juan', 
		'patient_dob': '19320409', 
		'program_id': '1', 
		'gateway_id': '1',
		'instructions':'Instructions from {{username}}',
		'study_date': '20070625', 
		'study_description': 'REST API',
		'review_json': {
			'Work_Order_UUID': '',
			'JSON_Review_Version': '1.0',
			'State': 'INIT',
			'Events': ,
			'Current_Revision': 0,
			'Quality_Control_Criteria': {
				'kidney': 
					{
						'Anatomy': 'parenchyma',
						'Criteria': 
							{
								'Name': 'Outer Boundary',
								'Description': 'Check that outer boundaries of kidney are clearly segmented. No leaks to outer regions or missing sections of outer kidney'
							},
							{
								'Name': 'Inner Boundary',
								'Description': 'Check that inner kidney parenchyma is segmented clearly. Make sure that vessels, collecting system, and fat are left unsegmented'
							},
							{
								'Name': 'Undersegmentation',
								'Description': 'Check that masses within the kidney are completely segmented, and that the parenchyma is segmented only on the inner mass portion for masses that extend out of the kidney (not the outer, so that there is no parenchyma border around the mass)'
							}
						
					},
					{
						'Anatomy': 'collecting system',
						'Criteria': 
							{
								'Name': 'Ureter',
								'Description': 'Check that ureter is clearly segmented'
							},
							{
								'Name': 'Boundary',
								'Description': 'Check that collecting system boundaries are clearly defined – make sure that other parts of the kidney (fat, vessels, parenchyma)unsegmented'
							},
							{
								'Name': 'Extension',
								'Description': 'Check that the collecting system reaches the start of renal pyramids but does not extend into them'
							},
							{
								'Name': 'Continuity',
								'Description': 'Check that the segmentation is continuous and that there are no gaps between segmented regions'
							}
						
					},
					{
						'Anatomy': 'Vein',
						'Criteria': 
							{
								'Name': 'Coverage',
								'Description': 'IVC is segmented from 1 rib above kidney to bottom of kidneys'
							},
							{
								'Name': 'Outline',
								'Description': 'Check that IVC is clearly outlined and has a distinct cylindrical shape (unless there is an abnormality in shape)'
							},
							{
								'Name': 'Spacing',
								'Description': 'neighboring vessels are not fused together. There should be space between vessels that are not directly connected'
							},
							{
								'Name': 'Leakage',
								'Description': 'vessel segmentation does not leak into other regions, especially into the parenchyma and fat'
							},
							{
								'Name': 'Extension',
								'Description': 'Check that there is enough detail in segmentation and that veins extend into the kidney if possible'
							}
						
					},
					{
						'Anatomy': 'Artery',
						'Criteria': 
							{
								'Name': 'Coverage',
								'Description': 'Check that Aorta is segmented from (i) about 1 rib above kidney to (ii) bottom of kidneys'
							},
							{
								'Name': 'Outline',
								'Description': 'Check that Aorta is clearly outlined and has a distinct cylindrical shape (unless there is an abnormality in shape)'
							},
							{
								'Name': 'Spacing',
								'Description': 'neighboring vessels are not fused together. There should be space between vessels that are not directly connected'
							},
							{
								'Name': 'Leakage',
								'Description': 'vessel segmentation does not leak into other regions, especially into the parenchyma and fat'
							},
							{
								'Name': 'Extension',
								'Description': 'Check that there is enough detail in segmentation and that arteries extend into the kidney if possible'
							}
						
					},
					{
						'Anatomy': 'mass',
						'Criteria': 
							{
								'Name': 'Coverage',
								'Description': 'Check that each segmentation boundary covers entire mass area. (Better oversegment than undersegment)'
							},
							{
								'Name': 'Gap',
								'Description': 'Check that masses are segmented enough so that there is no gap between parenchyma and mass'
							}
						
					}
				
			},
			'Revisions': 
				{
					'Version': 0,
					'Timestamp': 'UTC of revision creation',
					'Segmentation': {
						'kidney': 
							{
								'Label': '01',
								'Anatomy': 'parenchyma',
								'Description': 'right',
								'Index': '1',
								'Comment': '',
								'Enabled': true,
								'Issue': 
							},
							{
								'Label': '02',
								'Anatomy': 'parenchyma',
								'Description': 'left',
								'Index': '1',
								'Comment': '',
								'Enabled': true,
								'Issue': 
							},
							{
								'Label': '03',
								'Anatomy': 'Collecting System',
								'Description': 'right',
								'Index': '1',
								'Comment': '',
								'Enabled': true,
								'Issue': 
							},
							{
								'Label': '04',
								'Anatomy': 'Collecting System',
								'Description': 'left',
								'Index': '1',
								'Comment': '',
								'Enabled': true,
								'Issue': 
							},
							{
								'Label': '05',
								'Anatomy': 'Vein',
								'Description': '',
								'Index': '1',
								'Comment': '',
								'Enabled': true,
								'Issues': 
							},
							{
								'Label': '06',
								'Anatomy': 'Artery',
								'Description': '',
								'Index': '1',
								'Comment': '',
								'Enabled': true,
								'Issues': 
							},
							{
								'Label': '07',
								'Anatomy': 'mass',
								'Description': 'right',
								'Index': '1',
								'Comment': '',
								'Enabled': true,
								'Issues': 
							},
							{
								'Label': '08',
								'Anatomy': 'mass',
								'Description': 'left',
								'Index': '1',
								'Comment': '',
								'Enabled': true,
								'Issues': 
							}
						
					}
				}
			
		}
	}

**Output:**

	{
		'success': 'true',
		'uuid': '14908974-2159-44fb-b149-495899dac707',
		'id': 'SEG00005411'
	}	","",1. As an physician post to the `/api/v1/work_order_submit` path with valid credentials,"The WO `ID` is returned:

	{
		'success': 'true',
		'uuid': '14908974-2159-44fb-b149-495899dac707',
		'id': 'SEG00005411'
	}	","","","",REST API > Work Orders,8379,""
3062944,Only Super Admins can delete a work order,11250,1,9,2,"","IRIS-533,IRIS-948",9,1495131438,9,1505849605,"","",2059,0,"","",Verify that only Super Admins can delete a work order (/api/v1/work_order_destroy),Only Super Admins can delete a work order,"","","",REST API > Work Orders,8379,""
3063134,Provide a link to the PACS Viewer study when looking at a work order as a physician,11250,1,9,2,"","IRIS-296,IRIS-877",9,1495221336,9,1524839794,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'a15b4882-0752-4e03-8c22-708a15de0dfa'
	}

**Output:**

	{
		'success': 'true',
		'results': {
			'id': 'SEG00005411',
			'uuid': '14908974-2159-44fb-b149-495899dac707',
			'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
			'series_instance_uuid': '',
			'state': 'ORIGINAL_READY',
			'error': '',
			'resolution': '',
			'rejected_at': '',
			'rejected_by': 'None',
			'version_number': 0,
			'patient_name': 'Perez^Juan',
			'patient_dob': '19320409',
			'study_description': 'REST API',
			'study_date': '20070625',
			'delivery_date': '2018-05-03T19:29:06.000Z',
			'instructions': 'Instructions from santi_phy',
			'created_at': '2018-04-26T19:29:07.000Z',
			'pacs_name': 'PACS-PC1',
			'program_id': 1,
			'gateway_id': 1,
			'segmentation_type': 'KIDNEY',
			'conformance_json': '{\'FAILED_SERIES\': , \'STUDY_STATUS\': \'PASSED\'}',
			'package_download': '',
			'package_checksum': '',
			'qc_download': '',
			'qc_package_checksum': '',
			'pacs_viewer_link': 'https://pvstaging401.pacsviewer.net:443/e/viewer?studyUID=1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161&CLOAccessKeyID=pyyczLPFWzlEIjHRjQQe&expiry=1524776602&applicationID=IRIS&usergroup=IRIS&serviceInstance=IRIS&signature=dyG%2FC5MZ4sGfHSw9u6h0LtUOh2M%3D',
			'measurement_json': '',
			'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/14908974-2159-44fb-b149-495899dac707.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180426%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180426T203322Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=fbd510772f3be1d967fdb5dd896b2d31fc50231660cc4bd5161d81ba5815706e'
		}
	}","","1. As a physician, post to `/api/v1/work_order` using a UUID owned by that user",Verify that the response contains the PACS Viewer study link (`'pacs_viewer_link'`),"","","",REST API > Work Orders,8379,""
3063138,As a physician user I am able to store measurement information as JSON,11250,1,9,2,"","IRIS-288,IRIS-866",9,1495222511,9,1505849605,"","",2059,0,"","",Verify that as a physician user I am able to store measurement information as JSON,As a physician user I am able to store measurement information as JSON,"","","",REST API > Work Orders,8379,""
3064345,As a QC I can see and add comments from WO I am assigned,11250,1,9,2,"","IRIS-274,IRIS-858",9,1495225977,9,1505849606,"","",2059,0,"","",Verify that as a QC I can see and add comments from WO I am assigned,As a QC I can see and add comments from WO I am assigned,"","","",REST API > Work Orders,8379,""
3064352,As a physician I can toggle on and off anatomical structures,11250,1,9,2,"","IRIS-259,IRIS-849",9,1495229402,9,1505849918,"","",2059,0,"**Data template**


	'Segmentation':{'kidney': 
			{
				'Label': '01',
				'Anatomy': 'parenchyma',
				'Description': 'right',
				'Index': '1',
				'Comment': '',
				'Enabled': true,
				'Issue': 
			},
			{
				'Label': '02',
				'Anatomy': 'parenchyma',
				'Description': 'left',
				'Index': '1',
				'Comment': '',
				'Enabled': true,
				'Issue': 
			},
			{
				'Label': '03',
				'Anatomy': 'Collecting System',
				'Description': 'right',
				'Index': '1',
				'Comment': '',
				'Enabled': true,
				'Issue': 
			},
			{
				'Label': '04',
				'Anatomy': 'Collecting System',
				'Description': 'left',
				'Index': '1',
				'Comment': '',
				'Enabled': true,
				'Issue': 
			},
			{
				'Label': '05',
				'Anatomy': 'Vein',
				'Description': '',
				'Index': '1',
				'Comment': '',
				'Enabled': true,
				'Issues': 
			},
			{
				'Label': '06',
				'Anatomy': 'Artery',
				'Description': '',
				'Index': '1',
				'Comment': '',
				'Enabled': true,
				'Issues': 
			},
			{
				'Label': '07',
				'Anatomy': 'mass',
				'Description': 'right',
				'Index': '1',
				'Comment': '',
				'Enabled': true,
				'Issues': 
			},
			{
				'Label': '08',
				'Anatomy': 'mass',
				'Description': 'left',
				'Index': '1',
				'Comment': '',
				'Enabled': true,
				'Issues': 
			}
		
	}","",Verify that as a physician I can toggle on and off anatomical structures,As a physician I can toggle on and off anatomical structures,"","","",REST API > Work Orders,8379,""
3064353,As a QC I can approve or reject a work order that has been assign to me,11250,1,9,2,"","IRIS-258,IRIS-848",9,1495229457,9,1528917793,"","",2059,0,"**Approve:**
**Method:** `POST`
**URL:** `/api/v1/work_order_approve`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'{{STUDY_ASSIGNED_QC}}'
	}

**Reject:**
**Method:** `POST`
**URL:** `/api/v1/work_order_reject`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'{{STUDY_ASSIGNED_QC}}'
	}

","","1. As a QC post to `/api/v1/work_order_approve` using a WO in `STUDY_ASSIGNED_QC` state
2. As a QC post to `/api/v1/work_order_reject` using a WO in `STUDY_ASSIGNED_QC` state","* If the WO is in `STUDY_ASSIGNED_QC` state the QC can approve the WO
* If the WO is in `STUDY_ASSIGNED_QC` state the QC can reject the WO
* If the WO is not in `STUDY_ASSIGNED_QC` state the QC cannot approve or reject the WO","","","",REST API > Work Orders,8379,""
3064359,As a QC I have access to work orders from the iPad application,11250,1,9,2,"","IRIS-248,IRIS-840",9,1495232733,9,1505849607,"","",2059,0,"","",Verify that as a QC I have access to work orders from the iPad application,As a QC I have access to work orders from the iPad application,"","","",REST API > Work Orders,8379,""
3064363,As a QC I can download the latest QC review package for a particular work order ID,11250,1,9,2,"","IRIS-255,IRIS-845",9,1495232985,9,1528918755,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'a15b4882-0752-4e03-8c22-708a15de0dfa'
	}

**Output:**

	{
		'success': 'true',
		'results': {
			'id': 'SEG00005411',
			'uuid': '14908974-2159-44fb-b149-495899dac707',
			'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
			'series_instance_uuid': '',
			'state': 'STUDY_ASSIGNED_QC',
			'error': '',
			'resolution': '',
			'rejected_at': '',
			'rejected_by': 'None',
			'version_number': 0,
			'patient_name': 'Perez^Juan',
			'patient_dob': '19320409',
			'study_description': 'REST API',
			'study_date': '20070625',
			'delivery_date': '2018-05-03T19:29:06.000Z',
			'instructions': 'Instructions from santi_phy',
			'created_at': '2018-04-26T19:29:07.000Z',
			'pacs_name': 'PACS-PC1',
			'program_id': 1,
			'gateway_id': 1,
			'segmentation_type': 'KIDNEY',
			'conformance_json': '{\'FAILED_SERIES\': , \'STUDY_STATUS\': \'PASSED\'}',
			'package_download': '',
			'package_checksum': '',
			'qc_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/qc/59951b07-83e1-4646-840b-34946aeae93f.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180613%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180613T193436Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=5beb3bc23468d8b7400c402f4c14d2b4340d3154610c550411323a06d0c64826',
			'qc_package_checksum': 'eca9a1300437fceb10c8327e990eadad0d019b63b2e03a0907134832d9f511d2',
			'pacs_viewer_link': 'CENSORED',
			'measurement_json': '',
			'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/59951b07-83e1-4646-840b-34946aeae93f.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180613%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180613T193436Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=ffdac99b12a3414842b1b07bfc377264a73ad08a95b42b97b8eb89175439c2b4'
		}
	}","",1. Post to `/api/v1/work_order` using a WO owned by the QC user,* The output contains the link to download the QC package (`qc_download`),"","","",REST API > Work Orders,8379,""
3064364,As a QC I can submit a review JSON for each work order,11250,1,9,2,"","IRIS-252, IRIS-842",9,1495232999,9,1528919279,"","",2059,0,"**Data template:**

	{
		'username': '{{username}}',
		'api_token': '{{token}}',
		'uuid': '{{STUDY_ASSIGNED_QC_APPROVED}}',
		'review_json': {
			'Work_Order_UUID': '',
			'JSON_Review_Version': '1.0',
			'State': 'SEGMENTED_QC_APPROVED',
			'Events': ,
			'Current_Revision': 1,
			'Quality_Control_Criteria': {
				'kidney': 
					{
						'Anatomy': 'parenchyma',
						'Criteria': 
							{
								'Name': 'Outer Boundary'
							}
						
					}
				,
				'Revisions': 
					{
						'Version': 0,
						'Timestamp': 'UTC of revision creation',
						'Segmentation': {
							'kidney': 
								{
									'Label': '01',
									'Anatomy': 'parenchyma',
									'Description': 'right'
								}
							
						}
					}
				
			}
		}
	}","",1. As a QC user post to `/api/v1/work_order_update_review` using a valid review json,The QC user submits the review JSON for the specified work order,"","","",REST API > Work Orders,8379,""
3064372,"When a new WO is submitted via REST API, the UUID is also returned",11250,1,9,2,"","IRIS-238,IRIS-833",9,1495234742,9,1524772906,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order_submit`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'study_uuid':'1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161', 
		'series_uuid':'', 
		'pacs_name': 'PACS-PC1', 
		'patient_name': 'Perez^Juan', 
		'patient_dob': '19320409', 
		'program_id': '1', 
		'gateway_id': '1',
		'instructions':'Instructions from {{username}}',
		'study_date': '20070625', 
		'study_description': 'REST API',
		'review_json': {
			'Work_Order_UUID': '',
			'JSON_Review_Version': '1.0',
			'State': 'INIT',
			'Events': ,
			'Current_Revision': 0,
			'Quality_Control_Criteria': {
				'kidney': 
					{
						'Anatomy': 'parenchyma',
						'Criteria': 
							{
								'Name': 'Outer Boundary',
								'Description': 'Check that outer boundaries of kidney are clearly segmented. No leaks to outer regions or missing sections of outer kidney'
							},
							{
								'Name': 'Inner Boundary',
								'Description': 'Check that inner kidney parenchyma is segmented clearly. Make sure that vessels, collecting system, and fat are left unsegmented'
							},
							{
								'Name': 'Undersegmentation',
								'Description': 'Check that masses within the kidney are completely segmented, and that the parenchyma is segmented only on the inner mass portion for masses that extend out of the kidney (not the outer, so that there is no parenchyma border around the mass)'
							}
						
					},
					{
						'Anatomy': 'collecting system',
						'Criteria': 
							{
								'Name': 'Ureter',
								'Description': 'Check that ureter is clearly segmented'
							},
							{
								'Name': 'Boundary',
								'Description': 'Check that collecting system boundaries are clearly defined – make sure that other parts of the kidney (fat, vessels, parenchyma)unsegmented'
							},
							{
								'Name': 'Extension',
								'Description': 'Check that the collecting system reaches the start of renal pyramids but does not extend into them'
							},
							{
								'Name': 'Continuity',
								'Description': 'Check that the segmentation is continuous and that there are no gaps between segmented regions'
							}
						
					},
					{
						'Anatomy': 'Vein',
						'Criteria': 
							{
								'Name': 'Coverage',
								'Description': 'IVC is segmented from 1 rib above kidney to bottom of kidneys'
							},
							{
								'Name': 'Outline',
								'Description': 'Check that IVC is clearly outlined and has a distinct cylindrical shape (unless there is an abnormality in shape)'
							},
							{
								'Name': 'Spacing',
								'Description': 'neighboring vessels are not fused together. There should be space between vessels that are not directly connected'
							},
							{
								'Name': 'Leakage',
								'Description': 'vessel segmentation does not leak into other regions, especially into the parenchyma and fat'
							},
							{
								'Name': 'Extension',
								'Description': 'Check that there is enough detail in segmentation and that veins extend into the kidney if possible'
							}
						
					},
					{
						'Anatomy': 'Artery',
						'Criteria': 
							{
								'Name': 'Coverage',
								'Description': 'Check that Aorta is segmented from (i) about 1 rib above kidney to (ii) bottom of kidneys'
							},
							{
								'Name': 'Outline',
								'Description': 'Check that Aorta is clearly outlined and has a distinct cylindrical shape (unless there is an abnormality in shape)'
							},
							{
								'Name': 'Spacing',
								'Description': 'neighboring vessels are not fused together. There should be space between vessels that are not directly connected'
							},
							{
								'Name': 'Leakage',
								'Description': 'vessel segmentation does not leak into other regions, especially into the parenchyma and fat'
							},
							{
								'Name': 'Extension',
								'Description': 'Check that there is enough detail in segmentation and that arteries extend into the kidney if possible'
							}
						
					},
					{
						'Anatomy': 'mass',
						'Criteria': 
							{
								'Name': 'Coverage',
								'Description': 'Check that each segmentation boundary covers entire mass area. (Better oversegment than undersegment)'
							},
							{
								'Name': 'Gap',
								'Description': 'Check that masses are segmented enough so that there is no gap between parenchyma and mass'
							}
						
					}
				
			},
			'Revisions': 
				{
					'Version': 0,
					'Timestamp': 'UTC of revision creation',
					'Segmentation': {
						'kidney': 
							{
								'Label': '01',
								'Anatomy': 'parenchyma',
								'Description': 'right',
								'Index': '1',
								'Comment': '',
								'Enabled': true,
								'Issue': 
							},
							{
								'Label': '02',
								'Anatomy': 'parenchyma',
								'Description': 'left',
								'Index': '1',
								'Comment': '',
								'Enabled': true,
								'Issue': 
							},
							{
								'Label': '03',
								'Anatomy': 'Collecting System',
								'Description': 'right',
								'Index': '1',
								'Comment': '',
								'Enabled': true,
								'Issue': 
							},
							{
								'Label': '04',
								'Anatomy': 'Collecting System',
								'Description': 'left',
								'Index': '1',
								'Comment': '',
								'Enabled': true,
								'Issue': 
							},
							{
								'Label': '05',
								'Anatomy': 'Vein',
								'Description': '',
								'Index': '1',
								'Comment': '',
								'Enabled': true,
								'Issues': 
							},
							{
								'Label': '06',
								'Anatomy': 'Artery',
								'Description': '',
								'Index': '1',
								'Comment': '',
								'Enabled': true,
								'Issues': 
							},
							{
								'Label': '07',
								'Anatomy': 'mass',
								'Description': 'right',
								'Index': '1',
								'Comment': '',
								'Enabled': true,
								'Issues': 
							},
							{
								'Label': '08',
								'Anatomy': 'mass',
								'Description': 'left',
								'Index': '1',
								'Comment': '',
								'Enabled': true,
								'Issues': 
							}
						
					}
				}
			
		}
	}

**Output:**

	{
		'success': 'true',
		'uuid': '14908974-2159-44fb-b149-495899dac707',
		'id': 'SEG00005411'
	}	","",1. As an physician post to the `/api/v1/work_order_submit` path with valid credentials,"The WO UUID is returned:

	{
		'success': 'true',
		'uuid': '14908974-2159-44fb-b149-495899dac707',
		'id': 'SEG00005411'
	}	","","","",REST API > Work Orders,8379,""
3064494,Only physicians that own the WO have access to the work order,11250,1,9,2,"","IRIS-196,IRIS-812",9,1495481582,9,1524839753,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'a15b4882-0752-4e03-8c22-708a15de0dfa'
	}

**Output:**

	{
		'success': 'true',
		'results': {
			'id': 'SEG00005411',
			'uuid': '14908974-2159-44fb-b149-495899dac707',
			'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
			'series_instance_uuid': '',
			'state': 'ORIGINAL_READY',
			'error': '',
			'resolution': '',
			'rejected_at': '',
			'rejected_by': 'None',
			'version_number': 0,
			'patient_name': 'Perez^Juan',
			'patient_dob': '19320409',
			'study_description': 'REST API',
			'study_date': '20070625',
			'delivery_date': '2018-05-03T19:29:06.000Z',
			'instructions': 'Instructions from santi_phy',
			'created_at': '2018-04-26T19:29:07.000Z',
			'pacs_name': 'PACS-PC1',
			'program_id': 1,
			'gateway_id': 1,
			'segmentation_type': 'KIDNEY',
			'conformance_json': '{\'FAILED_SERIES\': , \'STUDY_STATUS\': \'PASSED\'}',
			'package_download': '',
			'package_checksum': '',
			'qc_download': '',
			'qc_package_checksum': '',
			'pacs_viewer_link': 'https://pvstaging401.pacsviewer.net:443/e/viewer?studyUID=1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161&CLOAccessKeyID=pyyczLPFWzlEIjHRjQQe&expiry=1524776602&applicationID=IRIS&usergroup=IRIS&serviceInstance=IRIS&signature=dyG%2FC5MZ4sGfHSw9u6h0LtUOh2M%3D',
			'measurement_json': '',
			'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/14908974-2159-44fb-b149-495899dac707.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180426%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180426T203322Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=fbd510772f3be1d967fdb5dd896b2d31fc50231660cc4bd5161d81ba5815706e'
		}
	}","","1. As a super admin get the UUID from physician A
2. As physician B, post to `/api/v1/work_order` using the UUID in 1
3. As physician B, post to `/api/v1/work_order` using the UUID owned by that user","• The physician does not have access to the WO owned by physician A

	{
		'success': 'false',
		'reason': 'Invalid work order UUID.'
	}	

• The physician has access to the WO he/she owns
• The output looks as follows:

	{
		'success': 'true',
		'results': {
			'id': 'SEG00005411',
			'uuid': '14908974-2159-44fb-b149-495899dac707',
			'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
			'series_instance_uuid': '',
			'state': 'ORIGINAL_READY',
			'error': '',
			'resolution': '',
			'rejected_at': '',
			'rejected_by': 'None',
			'version_number': 0,
			'patient_name': 'Perez^Juan',
			'patient_dob': '19320409',
			'study_description': 'REST API',
			'study_date': '20070625',
			'delivery_date': '2018-05-03T19:29:06.000Z',
			'instructions': 'Instructions from santi_phy',
			'created_at': '2018-04-26T19:29:07.000Z',
			'pacs_name': 'PACS-PC1',
			'program_id': 1,
			'gateway_id': 1,
			'segmentation_type': 'KIDNEY',
			'conformance_json': '{\'FAILED_SERIES\': , \'STUDY_STATUS\': \'PASSED\'}',
			'package_download': '',
			'package_checksum': '',
			'qc_download': '',
			'qc_package_checksum': '',
			'pacs_viewer_link': 'https://pvstaging401.pacsviewer.net:443/e/viewer?studyUID=1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161&CLOAccessKeyID=pyyczLPFWzlEIjHRjQQe&expiry=1524776602&applicationID=IRIS&usergroup=IRIS&serviceInstance=IRIS&signature=dyG%2FC5MZ4sGfHSw9u6h0LtUOh2M%3D',
			'measurement_json': '',
			'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/14908974-2159-44fb-b149-495899dac707.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180426%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180426T203322Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=fbd510772f3be1d967fdb5dd896b2d31fc50231660cc4bd5161d81ba5815706e'
		}
	}","","","",REST API > Work Orders,8379,""
3064495,Only physicians that own the WO can comment on the work order,11250,1,9,2,"","IRIS-196,IRIS-813",9,1495481590,9,1524775986,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/comment_submit`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'work_order_uuid':'14908974-2159-44fb-b149-495899dac707',
		'comment':'New comment by {{username}}'
	}

**Output:**

	{
		'success': 'true'
	}","","As physician, post to `/api/v1/comment_submit` using the UUID owned but that user","• The physician can comment the WO he/she owns

	{
		'success': 'true'
	}","","","",REST API > Work Orders,8379,""
3064496,Unauthorized physicians get 'Unauthorized' as failure output if they try to access or comment a WO.,11250,1,9,2,"","IRIS-196,IRIS-814",9,1495481596,9,1524775965,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/comment_submit`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'work_order_uuid':'14908974-2159-44fb-b149-495899dac707',
		'comment':'New comment by {{username}}'
	}

**Output:**

	{
		'success': 'false',
		'reason': 'The IRIS service is inaccessible. Please contact support at 1-800-876-1310 for help.'
	}","","1. As a super get the UUID from physician A
2. As physician B, post to `/api/v1/comment_submit` using the UUID in 1","• The physician cannot comment the WO owned by physician A

	{
		'success': 'false',
		'reason': 'The IRIS service is inaccessible. Please contact support at 1-800-876-1310 for help.'
	}","","","",REST API > Work Orders,8379,""
3064512,As an SSM user I can pass JSON conformance information to the REST API for a work order,11250,1,9,2,"","IRIS-145,IRIS-793",9,1495482618,9,1524779391,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'a15b4882-0752-4e03-8c22-708a15de0dfa'
	}

**Output:**

	{
		'success': 'true',
		'results': {
			'id': 'SEG00005411',
			'uuid': '14908974-2159-44fb-b149-495899dac707',
			'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
			'series_instance_uuid': '',
			'state': 'ORIGINAL_READY',
			'error': '',
			'resolution': '',
			'rejected_at': '',
			'rejected_by': 'None',
			'version_number': 0,
			'patient_name': 'Perez^Juan',
			'patient_dob': '19320409',
			'study_description': 'REST API',
			'study_date': '20070625',
			'delivery_date': '2018-05-03T19:29:06.000Z',
			'instructions': 'Instructions from santi_phy',
			'created_at': '2018-04-26T19:29:07.000Z',
			'pacs_name': 'PACS-PC1',
			'program_id': 1,
			'gateway_id': 1,
			'segmentation_type': 'KIDNEY',
			'conformance_json': '{\'FAILED_SERIES\': , \'STUDY_STATUS\': \'PASSED\'}',
			'package_download': '',
			'package_checksum': '',
			'qc_download': '',
			'qc_package_checksum': '',
			'pacs_viewer_link': 'https://pvstaging401.pacsviewer.net:443/e/viewer?studyUID=1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161&CLOAccessKeyID=pyyczLPFWzlEIjHRjQQe&expiry=1524776602&applicationID=IRIS&usergroup=IRIS&serviceInstance=IRIS&signature=dyG%2FC5MZ4sGfHSw9u6h0LtUOh2M%3D',
			'measurement_json': '',
			'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/14908974-2159-44fb-b149-495899dac707.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180426%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180426T203322Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=fbd510772f3be1d967fdb5dd896b2d31fc50231660cc4bd5161d81ba5815706e'
		}
	}","",As a physician post to `/api/v1/work_order`,Verify that the output has `'conformance_json'` which contains the conformance json.,"","","",REST API > Work Orders,8379,""
3065309,As a Physician user I have an interface to approve a work order,11250,1,9,2,"","IRIS-141,IRIS-747",9,1495489999,9,1524777068,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order_accept`
**Body:**


# Body
	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'{{FINAL_DOWNLOAD_READY}}'
	}
","","1. Search for a WO in `FINAL_DOWNLOAD_READY` state and copy its uuid
2. POST to `api/v1/work_order_accept` using that `uuid`
3. POST to `api/v1/work_order_accept` using WO in different states","* For WO in `FINAL_DOWNLOAD_READY` state:
  * Success: `{'success':'true'}`
  * The WO is moved to `PHYSICIAN_ACCEPTED` state
* For WO in other states:
  * `{ 'success':'false', 'reason':'Unable to update work order. }`
* Failure Output:
  * `{ 'success':'false', 'reason':'Bad parameters.' }`
  * `{ 'success':'false', 'reason':'Invalid username/token combination.' }`
  * `{ 'success':'false', 'reason':'The IRIS service is inaccessible. Please contact support at 1-800-876-1310 for help.' }`","","","",REST API > Work Orders,8379,""
3450445,As a Physician user I have an interface to reject a work order,11250,1,9,2,"","IRIS-141,IRIS-747",9,1518525158,9,1524777384,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order_reject`
**Body:**


# Body
	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'{{FINAL_DOWNLOAD_READY}}'
	}

","","1. Search for a WO in `FINAL_DOWNLOAD_READY` state and copy its uuid
2. POST to `api/v1/work_order_accept` using that `uuid`
3. POST to `api/v1/work_order_accept` using WO in different states","* For WO in `FINAL_DOWNLOAD_READY` state:
  * Success: `{'success':'true'}`
  * The WO is moved to `PHYSICIAN_REJECTED` state
* For WO in other states:
  * `{ 'success':'false', 'reason':'Unable to update work order. }`
* Failure Output:
  * `{ 'success':'false', 'reason':'Bad parameters.' }`
  * `{ 'success':'false', 'reason':'Invalid username/token combination.' }`
  * `{ 'success':'false', 'reason':'The IRIS service is inaccessible. Please contact support at 1-800-876-1310 for help.' }`","","","",REST API > Work Orders,8379,""
3065310,As an SSM user I am provided with a PACS Viewer URL link to a study in the REST interface,11250,1,9,2,"","IRIS-144,IRIS-792",9,1495490105,9,1524777549,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'a15b4882-0752-4e03-8c22-708a15de0dfa'
	}

**Output:**

	{
		'success': 'true',
		'results': {
			'id': 'SEG00005411',
			'uuid': '14908974-2159-44fb-b149-495899dac707',
			'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
			'series_instance_uuid': '',
			'state': 'ORIGINAL_READY',
			'error': '',
			'resolution': '',
			'rejected_at': '',
			'rejected_by': 'None',
			'version_number': 0,
			'patient_name': 'Perez^Juan',
			'patient_dob': '19320409',
			'study_description': 'REST API',
			'study_date': '20070625',
			'delivery_date': '2018-05-03T19:29:06.000Z',
			'instructions': 'Instructions from santi_phy',
			'created_at': '2018-04-26T19:29:07.000Z',
			'pacs_name': 'PACS-PC1',
			'program_id': 1,
			'gateway_id': 1,
			'segmentation_type': 'KIDNEY',
			'conformance_json': '{\'FAILED_SERIES\': , \'STUDY_STATUS\': \'PASSED\'}',
			'package_download': '',
			'package_checksum': '',
			'qc_download': '',
			'qc_package_checksum': '',
			'pacs_viewer_link': 'https://pvstaging401.pacsviewer.net:443/e/viewer?studyUID=1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161&CLOAccessKeyID=pyyczLPFWzlEIjHRjQQe&expiry=1524776602&applicationID=IRIS&usergroup=IRIS&serviceInstance=IRIS&signature=dyG%2FC5MZ4sGfHSw9u6h0LtUOh2M%3D',
			'measurement_json': '',
			'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/14908974-2159-44fb-b149-495899dac707.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180426%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180426T203322Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=fbd510772f3be1d967fdb5dd896b2d31fc50231660cc4bd5161d81ba5815706e'
		}
	}","","As physician, post to `/api/v1/work_order` using a valid UUID",The response contains the PACS Viewer link (`pacs_viewer_link`),"","","",REST API > Work Orders,8379,""
3055187,Estimated delivery date of a work order,11250,1,9,2,"","IRIS-457,IRIS-657",9,1494892594,9,1524777915,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'a15b4882-0752-4e03-8c22-708a15de0dfa'
	}

**Output:**

	{
		'success': 'true',
		'results': {
			'id': 'SEG00005411',
			'uuid': '14908974-2159-44fb-b149-495899dac707',
			'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
			'series_instance_uuid': '',
			'state': 'ORIGINAL_READY',
			'error': '',
			'resolution': '',
			'rejected_at': '',
			'rejected_by': 'None',
			'version_number': 0,
			'patient_name': 'Perez^Juan',
			'patient_dob': '19320409',
			'study_description': 'REST API',
			'study_date': '20070625',
			'delivery_date': '2018-05-03T19:29:06.000Z',
			'instructions': 'Instructions from santi_phy',
			'created_at': '2018-04-26T19:29:07.000Z',
			'pacs_name': 'PACS-PC1',
			'program_id': 1,
			'gateway_id': 1,
			'segmentation_type': 'KIDNEY',
			'conformance_json': '{\'FAILED_SERIES\': , \'STUDY_STATUS\': \'PASSED\'}',
			'package_download': '',
			'package_checksum': '',
			'qc_download': '',
			'qc_package_checksum': '',
			'pacs_viewer_link': 'https://pvstaging401.pacsviewer.net:443/e/viewer?studyUID=1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161&CLOAccessKeyID=pyyczLPFWzlEIjHRjQQe&expiry=1524776602&applicationID=IRIS&usergroup=IRIS&serviceInstance=IRIS&signature=dyG%2FC5MZ4sGfHSw9u6h0LtUOh2M%3D',
			'measurement_json': '',
			'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/14908974-2159-44fb-b149-495899dac707.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180426%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180426T203322Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=fbd510772f3be1d967fdb5dd896b2d31fc50231660cc4bd5161d81ba5815706e'
		}
	}","","1. As a physician submit a new work order `/api/v1/work_order_submit` and copy the UUID
2. Post to `/api/v1/work_order` using the UUID from 1","* The response contains the field `'delivery_date'`
* Physicians see the estimated delivery date of a WO which is creation date + 7 days or the date the WO reached FINAL\_DOWNLOAD\_READY.","","","",REST API > Work Orders,8379,""
3091479,As a super admin or seg admin I can approve a work order,11250,1,9,2,"","IRIS-965,IRIS-1072",9,1497910641,9,1524779144,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order_approve`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'{{SEGMENTED_QC_APPROVED}}'
	}","","1. As an admin post to `/api/v1/work_order_approve` using a WO in `STUDY_ASSIGNED_QC` state
2. As an admin post to `/api/v1/work_order_approve` using a WO in `SEGMENTED_QC_APPROVED` state
3. As an admin post to `/api/v1/work_order_approve` using a WO in a different state","* If the WO is in `STUDY_ASSIGNED_QC` or `SEGMENTED_QC_APPROVED` states the admin can approve the WO
* If the WO is not in `STUDY_ASSIGNED_QC` or `SEGMENTED_QC_APPROVED` states the admin gets: 
  * `{'success': 'false', 'reason': 'Work Order has invalid state.'}`","","","",REST API > Work Orders,8379,""
3091480,As a seg admin I can do assignments of QC via the REST API,11250,1,9,2,"","IRIS-381,IRIS-1075",9,1497910743,9,1524778840,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order_assign_qc`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'{{QC_PACKAGE READY}}', 
		'qc_username': 'qc_username'
	}","","1. As an admin post to `/api/v1/work_order_assign_qc` using a WO in `QC_PACKAGE_READY` state
2. As an admin post to `/api/v1/work_order_assign_qc` using a WO in a different state","* If the WO is in `QC_PACKAGE_READY` state the admin assign the WO to the specified QC
* If the WO is not in `QC_PACKAGE_READY` state the admin gets: 
  * `{'success': 'false', 'reason': 'Work Order has invalid state.'}`","","","",REST API > Work Orders,8379,""
3091481,As a seg admin I can do assignments of Tech via the REST API,11250,1,9,2,"","IRIS-381,IRIS-1076",9,1497910752,9,1524778502,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order_assign_tech`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'{{ORIGINAL_READY}}', 
		'tech_username': 'tech_username'
	}


","","1. As an admin post to `/api/v1/work_order_assign_tech` using a WO in `ORIGINAL_READY` state
2. As an admin post to `/api/v1/work_order_assign_tech` using a WO in a different state","* If the WO is in `ORIGINAL_READY` state the admin assign the WO to the specified tech
* If the WO is not in `ORIGINAL_READY` state the admin gets: 
  * `{'success': 'false', 'reason': 'Work Order has invalid state.'}`","","","",REST API > Work Orders,8379,""
3091482,As a seg admin I can fail a work order via the REST API,11250,1,9,2,"","IRIS-395,IRIS-1073",9,1497916100,9,1524835418,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order_fail`
**Body:**


	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'{{UUID}}', 
		'reason': '{{reason}}',
		'resolution': '{{resolution}}'
	}

**Output:**

	{
		'success': 'true'
	}","","1. As an admin post to `/api/v1/work_order_fail`
2. As a super admin post to `/api/v1/work_order_fail`
3. Repeat 1 with tech, phy and QC users","1. Super admin and admins can fail WO
2. Non admin users cannot fail WO:
  * 	`{'success': 'false', 'reason': 'Invalid user role.'}`","","","",REST API > Work Orders,8379,""
3091483,As a tech or super admin I can upload a segmentation for a work order via the REST API,11250,1,9,2,"","IRIS-382,IRIS-1074",9,1497916354,9,1524781470,"","",2059,0,"• 1. **Upload POST:**

**Method:** `POST`
**URL:** `/api/v1/work_order_url_upload`
**Body:**

		{
			'username': '{{username}}', 
			'api_token': '{{token}}', 
			'uuid':'{{STUDY_ASSIGNED_TECH}}'
		}

**Output:**

		{
			'success': 'true',
			'upload_link': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/postprocess/14908974-2159-44fb-b149-495899dac707.zip?x-amz-server-side-encryption=AES256&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180426%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180426T215846Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=5f0a2008199dead89b4924a50ced5b0b55f7dab23312887cc519394637b735c5'
		}

• 2. **Upload Script:** `upload.rb`

		require 'net/https'
			# ARGV 0 = upload uri
			# ARGV 1 = tar file
			uri = ARGV0
			Net::HTTP.start('ith-iris-development.s3-us-west-2.amazonaws.com', 443, :use_ssl => true) do |http|
				req = Net::HTTP::Put.new(uri)
				req.body_stream = File.open(ARGV1)
				req'Content-Length' = req.body_stream.size
				req'Content-Type' = ' application/x-gzip' # Prevents Net::HTTP from adding content-type
				#req'x-amz-server-side-encryption' = 'AES256'
				response = http.request(req)
				puts 'Status code: #{response.code}'
				puts 'Response body: #{response.body}'
			end

• 3. **Callback Upload POST:**

**Method:** `POST`
**URL:** `/api/v1/work_order_callback_upload`
**Body:**

		{
			'username': '{{username}}', 
			'api_token': '{{token}}', 
			'uuid':'{{STUDY_ASSIGNED_TECH}}'
		}

**Output:**

		{
			'success': 'true'
		}","","1. As a tech or super admin do a Upload post (Description #1) and copy the link from `upload_link`
2. As a tech or super admin upload a zip file by running the upload script (Description #2) with the link from 1
  * Run `ruby upload.rb <upload_uri> <uuid>.zip`
3. As a tech or super admin do a Callback post (Description #3)","* As a tech or super admin I can upload a segmentation for a work order via the REST API
* Verify that the WO is moved to `SEGMENTED_UPLOADED` state","","","",REST API > Work Orders,8379,""
3092392,The submitted data for a new study matches the study UUID in the PACS it came from,11250,1,9,2,"","IRIS-1066,IRIS-1118",9,1498000429,9,1524836021,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order_submit`
**Body:** See case C3064372(https://intouch.testrail.net/index.php?/cases/view/3064372) for the complete review json.

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'study_uuid':'1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161', 
		'series_uuid':'', 
		'pacs_name': 'PACS-PC1', 
		'patient_name': 'Perez^Juan', 
		'patient_dob': '19320409', 
		'program_id': '1', 
		'gateway_id': '1',
		'instructions':'Instructions from {{username}}',
		'study_date': '20070625', 
		'study_description': 'REST API',
		'review_json': {
			'Work_Order_UUID': '',
			'JSON_Review_Version': '1.0',
			'State': 'INIT',
			'Events': ,
			'Current_Revision': 0,
			'Quality_Control_Criteria': {
			}
		}
	}

**Output:**

	{
		'success': 'true',
		'uuid': '14908974-2159-44fb-b149-495899dac707',
		'id': 'SEG00005411'
	}	

	{
		'success': 'false',
		'reason': 'The study does not exist.'
	}
","","1. As a physician submit a new WO with data that belongs to a study:
  * Patient Name: 'Perez^Juan'
  * DOB: '19320409'
  * Study UUID: '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161'
  * Study date: '20070635'
2. Submit a WO with incorrect data for:
  * Patient Name
  * DOB
  * Study UUID
  * Study date","1. A new WO is submitted if data belongs to an existing study
2. A WO is not submitted if data does not belong to an existing study:
  * `{'success': 'false', 'reason': 'The study does not exist.'}`","","","",REST API > Work Orders,8379,""
3094233,Patient data is CENSORED for non Physician users,11250,1,9,2,"","IRIS-248,IRIS-1087,IRIS-1119",9,1498157150,9,1524779672,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'a15b4882-0752-4e03-8c22-708a15de0dfa'
	}

**Output:**

	{
		'success': 'true',
		'results': {
			'id': 'SEG00005411',
			'uuid': '14908974-2159-44fb-b149-495899dac707',
			'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
			'series_instance_uuid': '',
			'state': 'ORIGINAL_READY',
			'error': '',
			'resolution': '',
			'rejected_at': '',
			'rejected_by': 'None',
			'version_number': 0,
			'patient_name': 'CENSORED',
			'patient_dob': 'CENSORED',
			'study_description': 'CENSORED',
			'study_date': 'CENSORED',
			'delivery_date': '2018-05-03T19:29:06.000Z',
			'instructions': 'Instructions from santi_phy',
			'created_at': '2018-04-26T19:29:07.000Z',
			'pacs_name': 'PACS-PC1',
			'program_id': 1,
			'gateway_id': 1,
			'segmentation_type': 'KIDNEY',
			'conformance_json': '{\'FAILED_SERIES\': , \'STUDY_STATUS\': \'PASSED\'}',
			'package_download': '',
			'package_checksum': '',
			'qc_download': '',
			'qc_package_checksum': '',
			'pacs_viewer_link': 'CENSORED',
			'measurement_json': '',
			'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/14908974-2159-44fb-b149-495899dac707.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180426%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180426T203322Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=fbd510772f3be1d967fdb5dd896b2d31fc50231660cc4bd5161d81ba5815706e'
		}
	}","","1. As a QC post to `/api/v1/work_order`
2. Repeat step 1 with Super Admin, Segmentation Admin, and Tech users
","Verify that the following patient data is *CENSORED* for non Physician users:

* patient_name
* patient_dob
* study_description
* study_date
* pacs_viewer_link","","","",REST API > Work Orders,8379,""
3065345,As a physician user I am able to send 'Instructions' when submitting a new work order request.,11250,1,9,2,"","IRIS-1220,IRIS-1131",9,1495498763,9,1524836192,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order_submit`
**Body:** See case C3064372(https://intouch.testrail.net/index.php?/cases/view/3064372) for the complete review json.

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'study_uuid':'1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161', 
		'series_uuid':'', 
		'pacs_name': 'PACS-PC1', 
		'patient_name': 'Perez^Juan', 
		'patient_dob': '19320409', 
		'program_id': '1', 
		'gateway_id': '1',
		'instructions':'Instructions from {{username}}',
		'study_date': '20070625', 
		'study_description': 'REST API',
		'review_json': {
			'Work_Order_UUID': '',
			'JSON_Review_Version': '1.0',
			'State': 'INIT',
			'Events': ,
			'Current_Revision': 0,
			'Quality_Control_Criteria': {
			}
		}
	}

**Output:**

	{
		'success': 'true',
		'uuid': '14908974-2159-44fb-b149-495899dac707',
		'id': 'SEG00005411'
	}","",As a physician post to `/api/v1/work_order_submit` and include your *instructions* in `'instructions'`,As a physician user I am able to send 'Instructions' when submitting a new work order request.,"","","",REST API > Work Orders,8379,""
3099703,Techs should only be allowed to upload from API when state is STUDY_ASSIGNED_TECH,11250,1,9,2,"","IRIS-1128,IRIS-1133",9,1498694474,9,1524836575,"","",2059,0,"• 1. **Upload POST:**

**Method:** `POST`
**URL:** `/api/v1/work_order_url_upload`
**Body:**

		{
			'username': '{{username}}', 
			'api_token': '{{token}}', 
			'uuid':'{{STUDY_ASSIGNED_TECH}}'
		}

**Output:**

		{
			'success': 'true',
			'upload_link': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/postprocess/14908974-2159-44fb-b149-495899dac707.zip?x-amz-server-side-encryption=AES256&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180426%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180426T215846Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=5f0a2008199dead89b4924a50ced5b0b55f7dab23312887cc519394637b735c5'
		}

		{
			'success': 'true',
			'reason': 'Tech has not been assigned this work order or the work order is in an invalid state.'
		}

• 2. **Upload Script:** `upload.rb`

		require 'net/https'
			# ARGV 0 = upload uri
			# ARGV 1 = tar file
			uri = ARGV0
			Net::HTTP.start('ith-iris-development.s3-us-west-2.amazonaws.com', 443, :use_ssl => true) do |http|
				req = Net::HTTP::Put.new(uri)
				req.body_stream = File.open(ARGV1)
				req'Content-Length' = req.body_stream.size
				req'Content-Type' = ' application/x-gzip' # Prevents Net::HTTP from adding content-type
				#req'x-amz-server-side-encryption' = 'AES256'
				response = http.request(req)
				puts 'Status code: #{response.code}'
				puts 'Response body: #{response.body}'
			end

• 3. **Callback Upload POST:**

**Method:** `POST`
**URL:** `/api/v1/work_order_callback_upload`
**Body:**

		{
			'username': '{{username}}', 
			'api_token': '{{token}}', 
			'uuid':'{{STUDY_ASSIGNED_TECH}}'
		}

**Output:**

		{
			'success': 'true'
		}

		{
			'success': 'true',
			'reason': 'Tech has not been assigned this work order or the work order is in an invalid state.'
		}","","1. As a tech or super admin do a Upload post (Description #1) to a WO in STUDY\_ASSIGNED\_TECH
2. Copy the link from `upload_link`
3. As a tech or super admin upload a zip file by running the upload script (Description #2) with the link from 1
  * Run `ruby upload.rb <upload_uri> <uuid>.zip`
4. As a tech or super admin do a Callback post (Description #3)
5. Repeat steps 1 and 4 with a WO not in STUDY\_ASSIGNED\_TECH","1. Techs are only allowed to upload from API when state is STUDY\_ASSIGNED\_TECH
2. If the WO is not STUDY\_ASSIGNED\_TECH in the tech gets:
  * `{'success': 'true', 'reason': 'Tech has not been assigned this work order or the work order is in an invalid state.'}`","","","",REST API > Work Orders,8379,""
3101562,QCs can only update review JSON when work order date is STUDY_ASSIGNED_QC,11250,1,9,2,"","IRIS-1123,IRIS-1125",9,1498849844,9,1524836935,"","",2059,0,"• 1. **Upload POST:**

**Method:** `POST`
**URL:** `/api/v1/work_order_update_review`
**Body:**

		{
			'username': '{{username}}', 
			'uuid':'14908974-2159-44fb-b149-495899dac707',
			'review_json':{'Work_Order_UUID':'','JSON_Review_Version':'1.0','State':'INIT','Events':,'Current_Revision':0,'Quality_Control_Criteria':{'kidney':{'Anatomy':'parenchyma','Criteria':{'Name':'Outer Boundary'}},'Revisions':{'Version':0,'Timestamp':'UTC of revision creation','Segmentation':{'kidney':{'Label':'01','Anatomy':'parenchyma','Description':'right'}}}}}
		}

**Output:**

		{
			'success': 'true'
		}","","1. As a QC post to `/api/v1/work_order_update_review` using a work order in STUDY\_ASSIGNED\_QC state
2. Repeat step 1 with a WO not in STUDY\_ASSIGNED\_QC state","1. The QC user gets `{'success':'true'}` only if the WO is in STUDY\_ASSIGNED\_QC state
2. For WO not in STUDY\_ASSIGNED\_QC state the user gets:
  * `{'success': 'false', 'reason': 'The IRIS service is inaccessible. Please contact support at 1-800-876-1310 for help.'}`","","","",REST API > Work Orders,8379,""
3101563,Techs can only update review JSON when work order state is STUDY_ASSIGNED_TECH,11250,1,9,2,"","IRIS-1123,IRIS-1126",9,1498849852,9,1524837007,"","",2059,0,"• 1. **Upload POST:**

**Method:** `POST`
**URL:** `/api/v1/work_order_update_review`
**Body:**

		{
			'username': '{{username}}', 
			'uuid':'14908974-2159-44fb-b149-495899dac707',
			'review_json':{'Work_Order_UUID':'','JSON_Review_Version':'1.0','State':'INIT','Events':,'Current_Revision':0,'Quality_Control_Criteria':{'kidney':{'Anatomy':'parenchyma','Criteria':{'Name':'Outer Boundary'}},'Revisions':{'Version':0,'Timestamp':'UTC of revision creation','Segmentation':{'kidney':{'Label':'01','Anatomy':'parenchyma','Description':'right'}}}}}
		}

**Output:**

		{
			'success': 'true'
		}","","1. As a Tech post to `/api/v1/work_order_update_review` using a work order in STUDY\_ASSIGNED\_TECH state
2. Repeat step 1 with a WO not in STUDY\_ASSIGNED\_TECH state","1. The Tech user gets `{'success':'true'}` only if the WO is in STUDY\_ASSIGNED\_TECH state
2. For WO not in STUDY\_ASSIGNED\_TECH state the user gets:
  * `{'success': 'false', 'reason': 'The IRIS service is inaccessible. Please contact support at 1-800-876-1310 for help.'}`","","","",REST API > Work Orders,8379,""
3123213,As a user I want a SHA256 checksum of the QC package and final package to prevent using corrupted packages,11250,1,9,2,"",IRIS-1201,9,1500935704,9,1528927800,"","",2059,0,Run `sha256sum file.zip` and compare with *package\_checksum* and *qc\_package\_checksum*.,"","1. Choose a WO in `FINAL_DOWNLOAD_READY` state and post to `/api/v1/work_order` to see it
2. Use `qc_download` and `package_download` links to download the packages
3. Run `sha256sum <qc_package.zip>`
  1. Compare the string that it is returned with **qc_package_checksum** value
4. Run `sha256sum <final_package.zip>`
  1. Compare the string that it is returned with **package_checksum** value","* REST API */api/v1/work_order* returns **package_checksum** and **qc_package_checksum**
* The **package_checksum** and **qc_package_checksum** values match","","","",REST API > Work Orders,8379,""
3269181,As a physician I want to fetch a PACS Viewer link upon a search to the study I am trying to view,11250,1,9,2,"","IRIS-1371,IRIS-1409",9,1509555543,9,1524837435,"","",2059,0,"The PACS Viewer link is only valid for 30 minutes. We want to give the iOS application the ability to re-fetch this link when its been clicked without having to do a new study search and parsing the results.

**Method:** `POST`
**URL:** `/api/v1/work_order_refetch_pacs_link`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'study_uuid':'{{study_uuid}}',
		'gateway_id': '{{gateway_id}}'
	}

**Output:**

	{
		'success': 'true',
		'pacs_viewer_link': 'https://pvstaging404.pacsviewer.net:443/e/viewer?studyUID=1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161&CLOAccessKeyID=pyyczLPFWzlEIjHRjQQe&expiry=1524839142&applicationID=IRIS&usergroup=IRIS&serviceInstance=IRIS&signature=E437k5UOHqawuoOf0dCoFdu%2BNWc%3D'
	}","",As a physician post to `/api/v1/work_order_refetch_pacs_link` with a valid `study_uuid` and `gateway_id`,A new 30-minutes Study PACS link is returned.,"","","",REST API > Work Orders,8379,""
3046018,"After a new work order is submitted through the REST API, the work order's review JSON contains exactly one event",11250,1,9,2,"","IRIS-536,IRIS-539",9,1493657666,9,1524838079,"","",2059,0,"After a new work order is submitted through the REST API, the work order's review JSON contains exactly one event with the following attributes: 
1. Timestamp: the time the new work order was submitted. 
2. Actor: the username of the user who submitted the work order.
3. Metadata: the username of the user who submitted the work order.
4. Event_Type: 'INIT'

**• Submit Work Order** 
**Method:** `POST`
**URL:** `/api/v1/work_order_submit`
**Body:** See case C3064372(https://intouch.testrail.net/index.php?/cases/view/3064372) for the complete review json.

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'study_uuid':'1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161', 
		'series_uuid':'', 
		'pacs_name': 'PACS-PC1', 
		'patient_name': 'Perez^Juan', 
		'patient_dob': '19320409', 
		'program_id': '1', 
		'gateway_id': '1',
		'instructions':'Instructions from {{username}}',
		'study_date': '20070625', 
		'study_description': 'REST API',
		'review_json': {
			'Work_Order_UUID': '',
			'JSON_Review_Version': '1.0',
			'State': 'INIT',
			'Events': ,
			'Current_Revision': 0,
			'Quality_Control_Criteria': {
			}
		}
	}

**Output:**

	{
		'success': 'true',
		'uuid': '976217bb-5f2f-4533-94ae-cf8565b73781',
		'id': 'SEG00005411'
	}	

**• Show Work Order** 
**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid': '976217bb-5f2f-4533-94ae-cf8565b73781'
	}","","1. As a physician submit a WO (`/api/v1/work_order_submit`)
2. Copy the UUID
3. Post to `/api/v1/work_order` using the UUID in 2","* The review JSON should contain the following attributes:

|||:Name|:Description
||  Timestamp | The time the new work order was submitted. 
|| Actor | The username of the user who submitted the work order.
|| Metadata | The username of the user who submitted the work order.
|| Event_Type | 'INIT'
","","","",REST API > Work Orders,8379,""
3061733,Physicians can see the Study Description in the WO Show and Index pages and also through the work_orders and work_order API,11250,1,9,2,"","IRIS-397,IRIS-652",9,1494976773,9,1524838371,"","",2059,0,"Physicians can see the Study Description in the WO Show and Index pages and also through the work_orders and work_order API

• **List Work Orders**
**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'page':'1', 
		'per_page': '10'
	}

**Output:**

	{
		'success': 'true',
		'results': 
			{
				'id': 'SEG00005417',
				'uuid': '976217bb-5f2f-4533-94ae-cf8565b73781',
				'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
				'series_instance_uuid': '',
				'state': 'ORIGINAL_READY',
				'slice_thickness': '3.000',
				'error': '',
				'resolution': '',
				'rejected_at': '',
				'rejected_by': 'None',
				'version_number': 0,
				'patient_name': 'Perez^Juan',
				'patient_dob': '19320409',
				'study_description': 'REST API',
				'study_date': '20070625',
				'delivery_date': '2018-05-04T14:00:01.000Z',
				'instructions': 'Instructions from santi_phy',
				'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/976217bb-5f2f-4533-94ae-cf8565b73781.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180427%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180427T141102Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=b106ee51c4403b8b27bc3aea8b9fca4e918c251a90d731ac86bea077318c87d6',
				'created_at': '2018-04-27T14:00:01.000Z'
			}
		
	}

• **Show Work Order**
**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'a15b4882-0752-4e03-8c22-708a15de0dfa'
	}

**Output:**

	{
		'success': 'true',
		'results': {
			'id': 'SEG00005411',
			'uuid': '14908974-2159-44fb-b149-495899dac707',
			'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
			'series_instance_uuid': '',
			'state': 'ORIGINAL_READY',
			'error': '',
			'resolution': '',
			'rejected_at': '',
			'rejected_by': 'None',
			'version_number': 0,
			'patient_name': 'Perez^Juan',
			'patient_dob': '19320409',
			'study_description': 'REST API',
			'study_date': '20070625',
			'delivery_date': '2018-05-03T19:29:06.000Z',
			'instructions': 'Instructions from santi_phy',
			'created_at': '2018-04-26T19:29:07.000Z',
			'pacs_name': 'PACS-PC1',
			'program_id': 1,
			'gateway_id': 1,
			'segmentation_type': 'KIDNEY',
			'conformance_json': '{\'FAILED_SERIES\': , \'STUDY_STATUS\': \'PASSED\'}',
			'package_download': '',
			'package_checksum': '',
			'qc_download': '',
			'qc_package_checksum': '',
			'pacs_viewer_link': 'https://pvstaging401.pacsviewer.net:443/e/viewer?studyUID=1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161&CLOAccessKeyID=pyyczLPFWzlEIjHRjQQe&expiry=1524776602&applicationID=IRIS&usergroup=IRIS&serviceInstance=IRIS&signature=dyG%2FC5MZ4sGfHSw9u6h0LtUOh2M%3D',
			'measurement_json': '',
			'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/14908974-2159-44fb-b149-495899dac707.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180426%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180426T203322Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=fbd510772f3be1d967fdb5dd896b2d31fc50231660cc4bd5161d81ba5815706e'
		}
	}","","1. Go to the work order Show and Index pages
2. List work orders through REST API (`/api/v1/work_orders`)
3. Show a work order through REST API (`/api/v1/work_order`)","The following pages/outputs show the **Study Description** (`study_description`) for a WO:

* Show and Index pages
* List work orders path (/api/v1/work_orders)
* Show a work order path (/api/v1/work_order)","","","",REST API > Work Orders,8379,""
3061737,Physicians see the WO id (8-chars padded) in the website and REST API,11250,1,9,2,"","IRIS-392,IRIS-648",9,1494977115,9,1524838614,"","",2059,0,"Physicians see the WO id (8-chars padded) in the website and REST API

• **List Work Orders**
**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'page':'1', 
		'per_page': '10'
	}

**Output:**

	{
		'success': 'true',
		'results': 
			{
				'id': 'SEG00005417',
				'uuid': '976217bb-5f2f-4533-94ae-cf8565b73781',
				'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
				'series_instance_uuid': '',
				'state': 'ORIGINAL_READY',
				'slice_thickness': '3.000',
				'error': '',
				'resolution': '',
				'rejected_at': '',
				'rejected_by': 'None',
				'version_number': 0,
				'patient_name': 'Perez^Juan',
				'patient_dob': '19320409',
				'study_description': 'REST API',
				'study_date': '20070625',
				'delivery_date': '2018-05-04T14:00:01.000Z',
				'instructions': 'Instructions from santi_phy',
				'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/976217bb-5f2f-4533-94ae-cf8565b73781.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180427%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180427T141102Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=b106ee51c4403b8b27bc3aea8b9fca4e918c251a90d731ac86bea077318c87d6',
				'created_at': '2018-04-27T14:00:01.000Z'
			}
		
	}

• **Show Work Order**
**Method:** `POST`
**URL:** `/api/v1/work_order`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'a15b4882-0752-4e03-8c22-708a15de0dfa'
	}

**Output:**

	{
		'success': 'true',
		'results': {
			'id': 'SEG00005411',
			'uuid': '14908974-2159-44fb-b149-495899dac707',
			'study_instance_uuid': '1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161',
			'series_instance_uuid': '',
			'state': 'ORIGINAL_READY',
			'error': '',
			'resolution': '',
			'rejected_at': '',
			'rejected_by': 'None',
			'version_number': 0,
			'patient_name': 'Perez^Juan',
			'patient_dob': '19320409',
			'study_description': 'REST API',
			'study_date': '20070625',
			'delivery_date': '2018-05-03T19:29:06.000Z',
			'instructions': 'Instructions from santi_phy',
			'created_at': '2018-04-26T19:29:07.000Z',
			'pacs_name': 'PACS-PC1',
			'program_id': 1,
			'gateway_id': 1,
			'segmentation_type': 'KIDNEY',
			'conformance_json': '{\'FAILED_SERIES\': , \'STUDY_STATUS\': \'PASSED\'}',
			'package_download': '',
			'package_checksum': '',
			'qc_download': '',
			'qc_package_checksum': '',
			'pacs_viewer_link': 'https://pvstaging401.pacsviewer.net:443/e/viewer?studyUID=1.2.826.0.1.3680043.2.1125.1.14063359957464435438978364930633161&CLOAccessKeyID=pyyczLPFWzlEIjHRjQQe&expiry=1524776602&applicationID=IRIS&usergroup=IRIS&serviceInstance=IRIS&signature=dyG%2FC5MZ4sGfHSw9u6h0LtUOh2M%3D',
			'measurement_json': '',
			'original_download': 'https://ith-iris-staging.s3-us-west-2.amazonaws.com/preprocess/14908974-2159-44fb-b149-495899dac707.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJOFVCCTVIWDUDX4A%2F20180426%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20180426T203322Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=fbd510772f3be1d967fdb5dd896b2d31fc50231660cc4bd5161d81ba5815706e'
		}
	}","","1. Go to the work order Show and Index pages
2. List work orders through REST API (`/api/v1/work_orders`)
3. Show a work order through REST API (`/api/v1/work_order`)","The following pages/outputs show the WO ID (`id`) 8-chars padded (`SEG0000000X`):

-  Show and Index pages
- List work orders path (/api/v1/work_orders)
- Show a work order path (/api/v1/work_order)","","","",REST API > Work Orders,8379,""
3437926,As a super admin I want the ability to cancel a work order,11250,1,7,2,"","IRIS-1599,IRIS-1605",9,1517940229,9,1524838749,"","",2059,0,"**Method:** `POST`
**URL:** `/api/v1/work_order_cancel`
**Body:**

	{
		'username': '{{username}}', 
		'api_token': '{{token}}', 
		'uuid':'{{wo_uuid}}', 
		'reason': '{{reason}}'
	}","","1. As a super admin post to `/api/v1/work_order_cancel`
2. As a physician post to `/api/v1/work_order_cancel`
3. Repeat step 1 for segmentation admin, tech and QC users","* Super admin and physician users can cancel WOs in the following states (`{ 'success' : 'true' }`):
    * _INIT_
    * _ORIGINAL\_PROCESSING_
    * _ORIGINAL\_READY_
    * _STUDY\_ASSIGNED\_TECH_
    * _SEGMENTED\_UPLOADED_
    * _QC\_PACKAGE\_PROCESSING_
    * _QC\_PACKAGE\_READY_
    * _STUDY\_ASSIGNED\_QC_
    * _SEGMENTED\_QC\_REJECTED_
    * _SEGMENTED\_QC\_APPROVED_
    * _ADMIN\_APPROVED_
    * _FINAL\_DOWNLOAD\_PROCESSING_
    * _FINAL\_DOWNLOAD\_READY_
* Super admin and physician users cannot cancel WOs in the following states (`{ 'success' : 'false' , 'reason' : 'Work Order has invalid state.' }`):
    * _PHYSICIAN\_REJECTED_
    * _PHYSICIAN\_ACCEPTED_
    * _CANCELLED_
    * _FAILED_
    * _COMPLETED_
* Response can include the following error messages:
    * `{ 'success':'false', 'reason':'Bad parameters.' `
    * `{ 'success':'false', 'reason':'Unknown work order.' }`
    * `{ 'success':'false', 'reason':'Invalid user role.' }`
    * `{ 'success':'false', 'reason':'Invalid username/token combination.' }`
    * `{ 'success':'false', 'reason':'Work Order has invalid state.' }`
    * `{ 'success':'false', 'reason':'Reason parameter is required.'}`
    * `{ 'success':'false', 'reason':'Unable to update work order.' }`","","","",REST API > Work Orders,8379,""
3061725,Model validations for gateway_id and program_id for work order model,11250,1,9,2,"","IRIS-429,IRIS-913",9,1494976300,23,1525721327,"","",2059,0,WO should only be created with valid program_id and gateway_id.,"","1. Submit a work order with:
    - a. *program_id* and/or *gateway_id* valid
    - b. *program_id* and/or *gateway_id* invalid","a. Work order is submitted
b. Work order is not submitted","","","",REST API > Work Orders,8379,""
3414023,Buckets in S3 should not be public. Links to files should be secured,11250,1,7,2,"","IRIS-1561,IRIS-1589",9,1516794288,23,1525721936,"","",2059,0,"","","1. As a physician view a work order in _FINAL\_DOWNLOAD\_READY_ state (`/work_order`)
2. Get the `package_download` link
3. Open the link in a browser
4. Wait 15 minutes
5. Open the link in a browser","* The user can download the file if it is opened no more than 15 minutes before the link was retrieved
* The link expires after 15 minutes","","","",REST API > Work Orders,8379,""
3062976,Physicians can only ACCEPT or REJECT work orders when the state is FINAL_DOWNLOAD_READY,11250,1,9,2,"","IRIS-325,IRIS-889",9,1495203154,9,1528998413,"","",2059,0,Physicians can only ACCEPT or REJECT work orders when the state is FINAL_DOWNLOAD_READY,"","1. Attempt to **Accept** or **Reject** a work order when the state is **FINAL\_DOWNLOAD\_READY**
2. Attempt to **Accept** or **Reject** a work order when the state is different from **FINAL\_DOWNLOAD\_READY**","1. Physician can **Accept** and **Reject** work orders when the state is **FINAL\_DOWNLOAD\_READY**
2. Physician cannot **Accept** or **Reject** work orders when the state is not **FINAL\_DOWNLOAD\_READY**","","","",REST API > Work Orders,8379,""
3054640,Users can demo creating a work order,11251,1,9,2,"","IRIS-549,IRIS-624",9,1494875373,9,1528932081,"","",2059,0,REST API. Test cases for demo mode.,"",Verify that Users can demo creating a work order through `/api/v1/demo_work_order_submit`,Users can demo creating a work order,"","","",REST API > Demo Work Orders,8379,""
3054641,Users can demo listing work orders,11251,1,9,2,"","IRIS-549,IRIS-625",9,1494875617,9,1528932365,"","",2059,0,REST API. Test cases for demo mode.,"",Verify that Users can demo listing work orders through `/app/v1/demo_work_orders`,Users can demo listing work orders,"","","",REST API > Demo Work Orders,8379,""
3054642,Users can demo viewing a work order,11251,1,9,2,"","IRIS-549,IRIS-626",9,1494875625,9,1528932515,"","",2059,0,REST API. Test cases for demo mode.,"",Verify that Users can demo viewing a work order `/api/v1/demo_work_order`,Users can demo viewing a work order,"","","",REST API > Demo Work Orders,8379,""
3054643,Users can demo updating a work order,11251,1,9,2,"","IRIS-549,IRIS-627",9,1494875633,9,1528932559,"","",2059,0,REST API. Test cases for demo mode.,"",Verify that Users can demo updating a work order through `/api/v1/demo_work_order_update`,Users can demo updating a work order,"","","",REST API > Demo Work Orders,8379,""
3054644,Users can demo updating a work order's review JSON,11251,1,9,2,"","IRIS-549,IRIS-935",9,1494875852,9,1528932576,"","",2059,0,REST API. Test cases for demo mode.,"",Verify that Users can demo updating a work order's review JSON through `/api/v1/demo_work_order_update_review`,Users can demo updating a work order's review JSON,"","","",REST API > Demo Work Orders,8379,""
3054645,Users can demo updating a work order's measurement JSON,11251,1,9,2,"","IRIS-549,IRIS-936",9,1494875888,9,1528932591,"","",2059,0,REST API. Test cases for demo mode.,"",Verify that Users can demo updating a work order's measurement JSON through `/api/v1/demo_update_measurement_json`,Users can demo updating a work order's measurement JSON,"","","",REST API > Demo Work Orders,8379,""
3054646,Users can demo creating a comment for a work order,11251,1,9,2,"","IRIS-549,IRIS-937",9,1494875901,9,1528932605,"","",2059,0,REST API. Test cases for demo mode.,"",Verify that Users can demo creating a comment for a work order through `/api/v1/demo_comment_submit`,Users can demo creating a comment for a work order,"","","",REST API > Demo Work Orders,8379,""
3054647,Users can demo listing the comments for a work order,11251,1,9,2,"","IRIS-549,IRIS-938",9,1494875912,9,1528932616,"","",2059,0,REST API. Test cases for demo mode.,"",Verify that Users can demo listing the comments for a work order through `/api/v1/demo_comments`,Users can demo listing the comments for a work order,"","","",REST API > Demo Work Orders,8379,""
3055179,As a seg admin I can see the date feedback was given,8923,1,9,2,"","IRIS-470,IRIS-665",9,1494892059,23,1524698697,"","",2059,0,As a seg admin I can see the date feedback was given in the **User Feedback**,"","1. As an admin go to the **User Feedback**
","The page displays entries with the following fields:

* Author username
* Date Created
* Author email
* Feedback","","","",Feedback,"",""
3062614,Physicians can send their feedback,8923,1,9,2,"","IRIS-350,IRIS-623",9,1495030107,9,1511396525,"","",2059,0,Physicians can send their feedback through website or REST API calls.,"JSON:

	{
		'username':'{{username}}', 
		'api_token':'{{token}}',
		'content':'Feedback Test'
	}","1. Go to **Edit profile** >> **Give us your feedback** and submit feedback
2. POST to **/api/v1/feedback\_post_submit** a new feedback message",A feedback post is added.,"","","",Feedback,"",""
3055184,As a physician I get a warning if I put invalid data for 'date of birth' when performing a patient search,8924,1,9,2,"","IRIS-459,IRIS-659,IRIS-660",9,1494892377,23,1524692793,"","",2059,0,"If the DOB entered does not match the defined format, an onscreen warning should be presented.

Valid format:

* REST API: YYYYMMDD
* Website: YYYY-MM-DD","",1. As a physician perform a search with DOB in a bad format (1928/02/25),"Verify that a physician gets a warning message:

* REST API: 'Bad parameters'
* Website: 'Date of birth should be of format YYYY-MM-DD'","","","",Search,"",""
3062582,Logged in as a physician there is a button named 'Create Order' on the Patient Search page that initiates the process of creating a Work Order when clicked,8924,1,9,2,"","IRIS-383,IRIS-643",9,1495028844,23,1524780119,"","",2059,0,"","","1. Login as Physician.
1. Search for a patient.",Verify that there is a **Create Order** button that redirects to the WO create page.,"","","",Search,"",""
3062590,Search results table contains a Study Description column with the PACS study's description,8924,1,9,2,"","IRIS-375,IRIS-640",9,1495029099,23,1524866293,"","",2059,0,"","","1. Login as a Physician.
2. Search for a patient.",Verify that Search results table contains a **Study Description** field with the PACS study's description,"","","",Search,"",""
3064356,As a physician I can see the last selected/viewed study highlighted in the results view,8924,1,9,2,"","IRIS-256,IRIS-846",9,1495232484,9,1505762990,"","",2059,0,"","","1. Search for a patient
2. Click **View Study**
3. That row should be highlighted afterwards",The last selected/viewed study is highlighted in the results view,"","","",Search,"",""
3064361,'Back button' on New Work Order page returns physician to Patient Search page,8924,1,9,2,"","IRIS-245,IRIS-839",9,1495232879,23,1524689501,"","",2059,0,"","","1. Logins as Physician
2. Start a new WO
3. Press the **Back** button (it is a green arrow at the bottom of the page)",The **Back button** on New Work Order page returns physician to Patient Search page,"","","",Search,"",""
3064389,As a physician user the 'view' button for a study is opened in a new tab,8924,1,9,2,"","IRIS-218,IRIS-750",9,1495240014,23,1524694435,"","",2059,0,"","","1. Login as Physician.
2. Search for *Juan Perez*
3. Click **View Study** button in the queried patient.",The study is opened in a new tab,"","","",Search,"",""
3064483,As a physician I am able to search by just first name,8924,1,9,2,"","IRIS-207,IRIS-822",9,1495476450,23,1524691909,"","",2059,0,SSM / REST API,"","1. Login as Physician.
2. Enter *Juan* in the patient name text box and hit **Search**",Patient *Juan Perez* should be queried.,"","","",Search,"",""
3064488,SSM - As a physician user I should not be able to see the password for the pacs viewer in plain text,8924,1,9,2,"","IRIS-203,IRIS-819",9,1495478779,23,1525816005,"","",2059,0,"","You should know the PACS password. You can see it in AAT, in the gateway configuration.","1. Login as a physician
2. Open a WO or search for a patient
3. Click the `View Study` button
4. Check the URL.",The PACS viewer link do not contain the password in plain text.,"","","",Search,"",""
3065328,As a physician user I can see a link to the search functionality in the header menu,8924,1,9,2,"","IRIS-107,IRIS-770",9,1495494492,23,1524694043,"","",2059,0,"","","1. Login as Physician.
",Verify that as a physician user I can see a link to the search functionality in the header menu,"","","",Search,"",""
3065335,As a physician user I can order a segmentation from a list of studies related to a patient search,8924,1,9,2,"","IRIS-50,IRIS-718",9,1495497254,23,1524864677,"","",2059,0,"","","1. As a physician search for a patient.
2. Click the **Create order** button.
3. In the next screen select the desired segmentation with the sliders, and submit.",Verify that the user can order a segmentation from a list of studies related to a patient search,"","","",Search,"",""
3065336,As a physician user I can view a study using the PACS Viewer,8924,1,9,2,"","IRIS-52,IRIS-719",9,1495497351,23,1524694298,"","",2059,0,"","","1. Login as Physician.
2. Search for *Juan Perez*
3. Click **View Study** button in the queried patient.","A new browser tab should open, redirecting to the PACS viewer study.","","","",Search,"",""
3070121,As a SSM physician user I am authorized to see search results and create new work orders,8924,1,9,2,"","IRIS-85,IRIS-733",9,1495720784,23,1524766539,"","",2059,0,"","","1. Login as Physician.
2. Search for any patient.
3. Click the **Create Order** button on any of them.
4. Click **Create** in the next screen.",Verify that as a SSM physician user I am authorized to see search results and create new work orders,"","","",Search,"",""
3037850,A physician user should be able to search a patient by name,8924,1,9,2,"","IRIS-49,IRIS-591",9,1492732517,23,1524691918,"","",2059,0,"","","1. Login as Physician.
2. Enter *Juan* in the patient name text box and hit **Search**",Patient *Juan Perez* should be queried.,"","","",Search,"",""
3037851,A physician user should be able to search a patient by date of birth,8924,1,9,2,"","IRIS-49,IRIS-592",9,1492733580,23,1524689670,"","",2059,0,"","","1. Login as Physician.
2. Enter *1932-04-09* in the DOB and hit **Search**",The patient *Juan Perez* should be queried.,"","","",Search,"",""
3037852,A physician user should be able to search a patient by name and date of birth,8924,1,9,2,"","IRIS-49,IRIS-593",9,1492733610,23,1524691367,"","",2059,0,"","","1. Login as Physician
2. Enter *Juan* in the patient name text box.
3. Enter *1932-04-09* in the DOB text box.
4. Hit **Search**",Patient *Juan Perez* should be queried.,"","","",Search,"",""
3046043,"Logged in as a physician user on the iOS app, when searching for a patient study, the search is automatically prepends and/or appends with a wildcard search for the first and/or last name fields",8924,1,9,2,"","IRIS-500,IRIS-683",9,1493667134,23,1525817507,"","",2059,0,"","","1. Log in as a physician user on the iOS app
2. Search for 'a' or 'ju' or 'n' in the *first name* field.",You should get the patient Juan Perez for the above mentioned examples.,"","","",Search,"",""
3046044,"Logged in as a physician user on the SSM web portal, when searching for a patient study, the search is automatically prepends and/or appends with a wildcard search for the first and/or last name fields",8924,1,9,2,"","IRIS-500,IRIS-684",9,1493667145,23,1525816188,"","",2059,0,"","","1. Log in as a physician user on the SSM web portal
2. Search for 'a' or 'ju' or 'n' in the *first name* field.
",You should get the patient Juan Perez for the above mentioned examples.,"","","",Search,"",""
3061734,"Patient name should be displayed 'LastName, FirstName'",8924,1,9,2,"","IRIS-396,IRIS-651",9,1494976817,23,1524779742,"","",2059,0,"","","1. Login as a Physician.
2. Search for patient *Juan Perez*","Verify that Search results display patients name as 'LastName, FirstName'","","","",Search,"",""
3156843,The PACS viewer link contains a usergroup param,8924,1,9,2,"","IRIS-1291,IRIS-1311",9,1503696880,9,1526909686,"","",2059,0,"","","1. Login as Physician.
2. Search for a patient.
3. Click **View Study**.","1. Verify that the PACS viewer link contains a usergroup param
  * `userGroup=IRIS`
2. Verify that PACS viewer displays single pane view with less buttons.","","","",Search,"",""
3223597,As an IRIS user I want a certain layout for viewing PACS imaging,8924,1,9,2,"","IRIS-1286,IRIS-1287",9,1507135446,24,1528860884,"","",2059,0,"As an IRIS user I shall be presented via a 'hanging protocol' with a view of when accessing the InTouch Viewer through the IRIS application via the SSM, the ISI Web Application, and the ISI/Kitware iOS App so that user experience is maintained and simplified across all platforms. The customized hanging protocol shall be configured to include:

1. One series shall be displayed by default on all platforms for IRIS

2. A minimum set of controls or tools shall be available:
    * Report
    * Navigate
    * Zoom/Pan
    * Window Level
    * Reset Window Level
    * Window Presets
    * Linear measurement tool
    * Elipse tool
    * Eraser
    * Screen layouts","","1. Login as a Physician.
1. Search for a patient and see the study
2. Verify that PACS viewer screen displays the following 9 controls:
    * Report
    * Navigate
    * Zoom/Pan
    * Window Level
    * Reset Window Level
    * Window Presets
    * Linear measurement tool
    * Elipse tool
    * Eraser
    * Screen layouts","PACS Viewer layout only displays 9 controls (Report, Navigate, Zoom/Pan, Window Level, Window Presets, Linear measurement tool, Elipse tool, Eraser and Screen layout)","","","",Search,"",""
3065339,As a super admin I am able to create a new Program,8925,1,9,2,"","IRIS-60,IRIS-724",9,1495497649,9,1505761804,"","",2059,0,"","","1. Go to the Programs page
2. Click the **Add** button (+)
3. Fill in the required fields
4. Click **Create**",A new program is added.,"","","",Programs,"",""
3065341,As a super admin I am be able to add a Gateway to a Program,8925,1,9,2,"","IRIS-62,IRIS-726",9,1495497723,23,1520629569,"","",2059,0,"",Login as a Super Admin.,"1. Go to the **Programs** page
2. Edit a program
3. Verify that the program edit page displays all the available **Gateways**
4. Select a Gateway, and enable its checkbox.
5. Submit the form at the bottom.",The selected Gateway is added to the program,"","","",Programs,"",""
3079943,Only super admins can enable/disable a program,8925,1,9,2,"","IRIS-442,IRIS-1036",9,1496863342,23,1520629753,"","",2059,0,"",Login as a Super Admin.,"1. Go to the **Programs** page
2. Edit a program
3. Enable or disable the program
4. Login with every other role and verify that you cannot access `<base URL>/programs`","- With Super Admin: You can enable/disable a program.
- With any other role: You cannot access `<base URL>/programs`. Access denied error.","","","",Programs,"",""
3063137,As a super admin I should be able to easily add and remove users and gateways to programs,8925,1,9,2,"","IRIS-286,IRIS-864",9,1495222451,23,1520542692,"","",2059,0,Super admins can add/remove (check/uncheck) users and gateways from programs.,Login as a Super Admin.,"1. Go to the **Programs** page
2. Edit a program.
","Verify that you can:

- Add/Remove users.
- Add/Remove gateways.","","","",Programs,"",""
3055197,Non physician users should not have default program,8925,1,9,2,"","IRIS-430,IRIS-605",9,1494893137,23,1524865012,"","",2059,0,"","","1. ssh into SSM staging server.
2. Open rails console.
1. Query for various SSM users
",Verify that non physician users have *default_program_id= nil*,"","","",Programs,"",""
3055198,Physician users that belong to at least one program should have default program,8925,1,9,2,"","IRIS-430,IRIS-606",9,1494893142,23,1520630982,"","",2059,0,"",Login as a Super Admin.,"1. Go to the Users page.
2. Scroll down to the Physicians list.
3. Click the eye icon next to one of them.",Verify the user has a **Default Program** associated to his account.,"","","",Programs,"",""
3055199,Physician users with default program should belong to that program,8925,1,9,2,"","IRIS-430,IRIS-607",9,1494893149,23,1520631394,"","",2059,0,"",Login as a Super Admin.,"1. Go to the Users page.
2. Scroll down to the Physicians list.
3. Click the eye icon next to one of them to access the show page.
4. Take note of its default program.
5. Go to the programs page.
6. Do `ctrl+f` to find the desired program.
7. Search for the user in the **Users** column.
",The user should be assigned to the program.,"","","",Programs,"",""
3061727,"When a physician is removed from their default program, their default program is reset to another program they belong to",8925,1,9,2,"","IRIS-424,IRIS-600",9,1494976482,23,1520632822,"","",2059,0,"","Login as a Super Admin.
For this test you should use a user that is assigned to at least two programs.","1. Go to the Users page.
2. Click the eye icon on the user an take note of its **Default Program**.
3. Go to the programs page.
4. Search for the previous user default program.
5. Edit the program and remove the user, unchecking his checkbox.
6. Submit the form.
7. Go back to the Users page, and search for the user.
8. Click the eye icon on the user an take note of its **Default Program**.",The **Default Program** should have changed to another one he belongs to.,"","","",Programs,"",""
3061728,"When a physician's default program is disabled, their default program is reset to another program they belong to",8925,1,9,2,"","IRIS-424,IRIS-601",9,1494976489,23,1520633413,"","",2059,0,"","Login as a Super Admin.
For this test you should use a user that is assigned to at least two programs.","1. Go to the Users page.
2. Click the eye icon on the user an take note of its Default Program.
3. Go to the programs page.
4. Search for the previous user default program.
5. Edit the program, scroll down, and click the **Disable Program** button. Then accept the warning prompt.
6. Go back to the Users page, and search for the user.
8. Click the eye icon on the user an take note of its Default Program.",The default program should have changed to another one the user belongs.,"","","",Programs,"",""
3061729,"When the user doesn't belong to any other programs, the user's default program id is set to nil",8925,1,9,2,"","IRIS-424,IRIS-602",9,1494976494,23,1524865378,"","",2059,0,"",Use a physician user with only one program associated.,"1. Login as super admin.
2. Go to programs.
3. Edit a program.
1. Remove a physician from his/her default program.
2. ssh into SSM staging, and open rails console.
3. Query for the edited physician.",If the physician has no other programs associated the **default program** is set to *nil*,"","","",Programs,"",""
3062592,My default program is view-able within 'my profile.',8925,1,9,2,"","IRIS-379,IRIS-642",9,1495029167,23,1520638893,"","",2059,0,"",Login as Physician.,"1. As a physician go to **Edit profile**
2. Verify that the user sees the default program field",The physician user sees the default program field.,"","","",Programs,"",""
3061730,As a physician I can change my default program so that I can modify workflow as needed,8925,1,9,2,"","IRIS-404,IRIS-655",9,1494976604,23,1520639024,"","",2059,0,"","Login as Physician.
You'll need a user assigned to at least two programs.","1. Hover over your username at the top-right corner and select **Change Profile**
2. Change the default program.
3. Submit the form.",Program should have changed.,"","","",Programs,"",""
3062591,"Logged in as a physician, my default program is saved as part of my profile and not shown on the Patient Search page",8925,1,9,2,"","IRIS-379,IRIS-641",9,1495029161,23,1520639311,"","",2059,0,"",Login as a Physician.,"1. Hover over your username at the top-right corner and select **Edit Profile**
2. Check the default program field.
3. Go to the Work Order page.
4. Search for default program .","* The Edit profile page displays the default program
* The default program is not displayed in the WO page","","","",Programs,"",""
3456720,As a user I want not to see disabled programs when setting a users default program upon user creation,8925,1,7,2,"","IRIS-1633,IRIS-1635",9,1518816696,23,1520639536,"","",2059,0,"",Login as a Super Admin.,"1. Go to the Programs page.
2. Edit a program, scroll down and click on **Disable Program**, then hit OK in the prompt.
3. Go to users page.
4. Click on the '+' icon at the top-right to access the new user page.
5. Select role Physician.
6. Click on the Default Program dropdown.
7. Search for the disabled program.",The disabled program is not shown in the `Default Program` dropdown.,"","","",Programs,"",""
3062618,A super user can add a physician user to programs when they are creating the account,8925,1,9,2,"","IRIS-353,IRIS-631",9,1495030314,23,1520534706,"","",2059,0,"",Login as a Super Admin.,"1. Go to the users page.
2. Click the '+' icon at the top-right to access the new user page.
3. Select role: Physician.
4. Fill in all fields, selecting a default program.
5. Submit the form.
6. View the User, clicking the eye icon next to it.",The program should have saved.,"","","",Programs,"",""
3065338,As a super admin I am able to create a new Account,9439,1,9,2,"","IRIS-59,IRIS-723",9,1495497612,23,1520874723,"","",2059,0,"",Login as a Super Admin.,"1. Go to **Accounts**
2. Click **Add** button (+)
3. Fill in the account's information and **Create**",A new account entry is added.,"","","",Accounts,"",""
3065343,As a super admin I am able to add a Program to an Account,9439,1,9,2,"","IRIS-64,IRIS-728",9,1495497953,23,1520875201,"","",2059,0,"",Login as a Super Admin.,"1. Go to **Programs**
2. Click the pencil icon next to a program to access the edit page.
3. Click on the Account drop-down.
4. Select an account.
5. Submit the form.",The program is associated to the account.,"","","",Accounts,"",""
3065318,As a Super admin I can see information about an account,9439,1,9,2,"","IRIS-129,IRIS-780",9,1495493658,23,1529448771,"","",2059,0,"","",1. As a Super admin go to the **Account** Index page,"The index page has the following columns:

* Name
* Salesforce ID
* Enabled","","","",Accounts,"",""
3064501,As a Super admin I see a Show link and see the account's information,9439,1,9,2,"","IRIS-176,IRIS-806",9,1495482043,23,1529449139,"","",2059,0,"",Login as a super admin user.,"1. Go to the Accounts page.
2. Click the eye icon next to an account, to access the show page.","The Account Show page displays the following fields:

|| Name | Account's name
|| Address | Street + City + Postal code + Country
|| Salesforce ID | Salesforce ID number
|| Enabled | True or false","","","",Accounts,"",""
3055161,As a Super admin I can save additional information to an account,9439,1,9,2,"","IRIS-471,IRIS-666",9,1494889371,23,1529449419,"","",2059,0,"As a super admin I can add additional information to an account:

  * street
  * city
  * country
  * postal_code
  * salesforce_id",Login as a Super user.,"1. Go to the **Accounts** page
2. **Edit** an account
3. Fill in any of the following additional fields:
    - street
    - city
    - country
    - postal_code
    - salesforce_id
4. Submit the form.",The inputted data should have saved.,"","","",Accounts,"",""
3069321,User information is sent through Billing API when a user account is enabled/disabled,9844,1,9,2,"","IRIS-922,IRIS-1027",9,1495654249,9,1505762047,"","",2059,0,"","","1. Enable/disable a user account
2. Verify that the logs show user information being sent through Billing API",User information being sent through Billing API when a user account is enabled/disabled.,"","","",Billing API,"",""
3074284,Update billing after new physicians are created,9844,1,9,2,"","IRIS-975,IRIS-976",9,1496259409,9,1505762048,"","",2059,0,"","","1. Create a new physician user
2. Verify that the logs show the user's information being sent through Billing API",The new physician user's information is sent through Billing API,"","","",Billing API,"",""
3074285,Updating users via REST API triggers a billing post,9844,1,9,2,"","IRIS-584,IRIS-1043",9,1496267663,9,1505762048,"","",2059,0,"","","1. Edit a user account
2. Verify that the logs show new user information being sent through Billing API",The new user information is sent through Billing API,"","","",Billing API,"",""
3074286,"Once billing is updated with the status of a PHYSICIAN_ACCEPTED work order, that work order state should be moved to COMPLETED",9844,1,9,2,"","IRIS-950,IRIS-973",9,1496267719,9,1505762049,"","",2059,0,"","","Verify that after sending billing the status of a PHYSICIAN\_ACCEPTED work order, the WO's state is moved to **COMPLETED**",After sending a billing update the WO state is changed from **PHYSICIAN\_ACCEPTED** to **COMPLETED**,"","","",Billing API,"",""
3074287,"Update billing status on CANCELLED, FAILED, and INIT",9844,1,9,2,"","IRIS-962,IRIS-974",9,1496271245,9,1505762049,"","",2059,0,"","","Verify that SSM logs show a billing update when a WO is:

* INIT
* CANCELLED
* FAILED","There is a billing post for the following events:

* INIT
* CANCELLED
* FAILED","","","",Billing API,"",""
3075082,Hospital Details Post for billing,9844,1,9,2,"","IRIS-369,IRIS-472",9,1496332218,9,1505762050,"","",2059,0,"Posting Hospital details:
URL: https://sfd541.intusurg.com/AdvantcoRESTAdapter/RESTServlet/hospital/isrg?channel=CC_REST_INTOUCH_HOSPITAL_SENDER

**Data Template:**

	{
		'MT_INTOUCH_ECC_HOSPITAL': {
			'HOSPITAL_DETAILS': 
				{
					'ID': '123',
					'NAME': 'Hospital Name1',
					'SFDC_ID': '12345',
					'STREET': 'Street1',
					'CITY': 'City1',
					'COUNTRY': 'Country1',
					'POSTAL_CODE': '94085'
				},
				{
					'ID': '456',
					'NAME': ' Hospital Name2',
					'SFDC_ID': '12345',
					'STREET': ' Street2',
					'CITY': ' City2',
					'COUNTRY': ' Country2',
					'POSTAL_CODE': '94086'
				}
			
		}
	}","","Verify that when an account is edited, a Billing post is sent.",A Billing post is sent when an account is edited.,"","","",Billing API,"",""
3075083,User Details Post for billing,9844,1,9,2,"","IRIS-369,IRIS-473",9,1496332225,9,1505762050,"","",2059,0,"2.	Posting User details:
URL: https://sfd541.intusurg.com/AdvantcoRESTAdapter/RESTServlet/user/isrg?channel=CC_REST_INTOUCH_USER_SENDER

**Data Template:**.

	{
		'MT_INTOUCH_ECC_USER': {
			'USER_DETAILS': 
				{
					'ID': '123',
					'FIRST_NAME': 'FN1',
					'LAST_NAME': 'LN1',
					'PHONE_NO': '123-456-8990',
					'EMAIL': 'xyz@abcv.com',
					'CREATED_DATE': '20170123',
					'UPDATED_DATE': '20170124',
					'SFDC_ID': '346'
				},
				{
					'ID': '456',
					'FIRST_NAME': 'FN2',
					'LAST_NAME': 'LN2',
					'PHONE_NO': '123-456-8991',
					'EMAIL': 'dfg@abcv.com',
					'CREATED_DATE': '20170123',
					'UPDATED_DATE': '20170124',
					'SFDC_ID': '789'
				}
			
		}
	}","","Verify that when a user account is edit, a Billing post is sent.",A Billing post is sent when a user account is edited.,"","","",Billing API,"",""
3075084,Work Order Details Post,9844,1,9,2,"","IRIS-369,IRIS-474",9,1496332237,9,1519930182,"","",2059,0,"3.	Posting Work Order details:
URL: https://sfd541.intusurg.com/AdvantcoRESTAdapter/RESTServlet/workorder/isrg?channel=CC_REST_INTOUCH_WORKORDER_SENDER

**Data Template:**

	{
		'MT_INTOUCH_ECC_WORKORDER': {
			'WORKORDER_DETAILS': 
				{
					'ID': '123',
					'UUID': '4567',
					'PHYSICIAN_USER_UUID': '7890',
					'ACCOUNT_NAME': 'AN1',
					'ACCOUNT_UUID': 'AUUID1',
					'SEGMENTATION_TYPE': 'abc',
					'WORKORDER_CREATION_DATE': '20170222',
					'WORKORDER_UPDATED_DATE': '20170303',
					'WORKORDER_STATE': 'CA'
				},
				{
					'ID': '999',
					'UUID': '4569',
					'PHYSICIAN_USER_UUID': '7892',
					'ACCOUNT_NAME': 'AN2',
					'ACCOUNT_UUID': 'AUUID2',
					'SEGMENTATION_TYPE': 'xyz',
					'WORKORDER_CREATION_DATE': '20170222',
					'WORKORDER_UPDATED_DATE': '20170303',
					'WORKORDER_STATE': 'CA'
				}
			
		}
	}","","1. Submit a new WO
2. Cancel a WO
3. Fail a WO
4. As a physician accept a WO in `FINAL_DOWNLOAD_READY`
5. As a physician reject a WO in `FINAL_DOWNLOAD_READY`","A Billing post is sent when a WO is updated to the following states:

* `INIT`
* `CANCELLED`
* `FAILLED`
* `PHYSICIAN_ACCEPTED`
* `PHYSICIAN_REJECTED`","","","",Billing API,"",""
3117418,Work Order Comments Post,9844,1,9,2,"","IRIS-1094,IRIS-1199",9,1500332923,9,1505762051,"","",2059,0,"	{
		'MT_INTOUCH_ECC_WORKORDER_COMMENTS': {
			'WORKORDER_COMMENTS': 
				{
					'ID': 'comment.id',
					'WORK_ORDER_ID': 'comment.work_order_id',
					'USER_ID': 'comment.user_id',
					'REVISION': 'comment.revision',
					'COMMENT': 'comment.comment',
					'CREATED_DATE': 'format_billing_time_stamp(comment.created_at)',
					'UPDATED_DATE': 'format_billing_time_stamp(Time.now)'
				}
			
		}
	}","",Verify that a Billing post is sent when a physician sends a comment via REST API.,A Billing post is sent when a physician sends a comment via REST API.,"","","",Billing API,"",""
3075085,Program Details Post for Billing,9844,1,9,2,"","IRIS-369,IRIS-475",9,1496332245,9,1505762052,"","",2059,0,"4.	Posting Program details:
URL: https://sfd541.intusurg.com/AdvantcoRESTAdapter/RESTServlet/program/isrg?channel=CC_REST_INTOUCH_PROGRAM_SENDER

**Data Template:**

	{
		'MT_INTOUCH_ECC_PROGRAM': {
			'USER_DETAILS': 
				{
					'ID': '123',
					'NAME': 'NAME1',
					'ACCOUNT_ID': 'AID1',
					'CREATED_DATE': '20170131',
					'UPDATED_DATE': '20170222',
					'ARRAY_OF_USER_IDS': 'uid1,uid2'
				},
				{
					'ID': '456',
					'NAME': 'NAME2',
					'ACCOUNT_ID': 'AID2',
					'CREATED_DATE': '20170131',
					'UPDATED_DATE': '20170222',
					'ARRAY_OF_USER_IDS': 'uid3,uid4'
				}
			
		}
	}","","Verify that when a program is edited, a Billing post is sent.",A Billing post is sent when a program is edited.,"","","",Billing API,"",""
3075086,Do not send billing information about demo programs,9844,1,9,2,"","IRIS-915,IRIS-947",9,1496344939,9,1505762052,"","",2059,0,"While in demo mode, do not send demo program information to ISI billing API.","","1. Update a WO in the **Demo path**
2. Verify that no billing update is sent",No billing update is sent when a WO is edited in the **Demo path**,"","","",Billing API,"",""
3079944,Billing information is sent when program is enabled/disabled,9844,1,9,2,"","IRIS-442,IRIS-1047",9,1496863351,9,1505762053,"","",2059,0,"","","1. Enable/disable a program
2. Verify that the logs show a billing post being sent.",A billing update is sent when a program is enabled/disabled.,"","","",Billing API,"",""
3126130,"As a super admin, I am able to add a new SP",14478,1,9,2,"","IRIS-576,IRIS-1130",9,1501190534,23,1524768381,"","",2059,0,"","","1. Login as Super Admin.
2. Go to the **Storage Proxies** page.
3. Click the '+' icon at the bottom.
4. Fill in the desired data and submit.
","As a super admin, I will be able to add a new SP.","","","",Storage Proxy,"",""
3678234,Sanitize Storage Proxy SSH Keys,14478,1,7,2,"","IRIS-1745, IRIS-1702",14,1529526406,23,1529695483,"","",2059,0,All untrusted input sent to and stored in ITH Storage proxy from external sources and users shall be validated and sanitized.,"The Storage Proxy SSH Keys have been sanitize to prevent command injection.

Confidence: Medium
 Category: Command Injection
 Message: Possible command injection
 Code: `sudo su #
{public_key.name.downcase} -c 'echo '#{public_key.ssh_key}' > #{'/home/#{public_key.name.downcase} 
/.ssh/authorized_keys'}'`
 File: lib/ssh_users.rb
 Line: 25
","Test Steps:

Use a POST API call to create a new Public key in SP.

**URL:** 

`<SP base path>/public_keys`

**HEADERS:**

`Content-Type:application/json`

**BODY:**

    {
    'name':'Gateway_name',
    'ip':'{gateway IP}',
    'auth_key':'UvStJz64QrdLz6O8EzzcFZNaWpVAZiEX',
    'ssh_key': '{a generated RSA public key}'
    }
","Verify that you cannot save an ssh key if:

* it does not have 3 parts separated by spaces: 'ssh-rsa', the key value, and the gateway name
* there is a '=' somewhere BESIDES the last two chars of the key value
* the key value contains chars other than a-z, A-Z, 0-9, /, +, =
* the name contains chars other than a-z, A-Z, 0-9, _, -","","","",Storage Proxy,"",""
3298149,Super admins can view failed billing posts,39121,1,7,2,"","IRIS-1343,IRIS-1401",9,1510961325,9,1510961634,"","",2059,0,"","","1. Login as a super admin
2. Go to `Billing Posts` tab","* Super admin users can access the *Billing Posts* tab.
* They see buttons to resend/delete individual/all failed posts.","","","",Billing Posts,"",""
3298150,Super admins can resend individual billing posts,39121,1,7,2,"","IRIS-1343,IRIS-1402",9,1510961333,9,1510962058,"","",2059,0,"","","1. In `SSM/lib/billing.rb` change line 7 to `BILLING_DISABLED = false`
2. Login to SSM web as a super admin.
3. Update a physician user.
4. Verify that no email is sent and that the new billing post does not show up in the list.
5. In `SSM/lib/billing.rb` change line 73 to `check_billing_post_response('FALSE', url, payload)`
6. Restart the server
7. Update a physician user.
8. Verify that your super admin user received an email that the billing post failed.
9. Go to the 'Billing Posts' tab in the SSM header.
10. Verify that your billing post is present.
11. Resend your billing post and verify another email and that the post is re-added to the list.","* Super admin users receive an email when a billing post fails
* Super admin users resend an individual failed billing post which is removed from the list of failed posts.
* If the post fails again, it is added to the list and an email is sent to the super admin","","","",Billing Posts,"",""
3298151,Super admins can resend all failed billing posts,39121,1,7,2,"","IRIS-1343,IRIS-1403",9,1510961343,9,1510962043,"","",2059,0,"","","1. In `SSM/lib/billing.rb` change line 7 to `BILLING_DISABLED = false`
2. Login to SSM web as a super admin.
3. Update a physician user.
4. Verify that no email is sent and that the new billing post does not show up in the list.
5. In `SSM/lib/billing.rb` change line 73 to `check_billing_post_response('FALSE', url, payload)`
6. Restart the server
7. Update a physician user.
8. Verify that your super admin user received an email that the billing post failed.
9. Go to the 'Billing Posts' tab in the SSM header.
10. Verify that your billing post is present.
11. Resend all billing posts and verify an email for each and that all posts are re-added to the list.","* Super admin users receive an email when a billing post fails
* Super admin users resend all the failed billing posts and they are removed from the list of failed posts
* If the posts fail again, they are added to the list and emails are sent to the super admin","","","",Billing Posts,"",""
