id,title,section_id,template_id,type_id,priority_id,milestone_id,refs,created_by,created_on,updated_by,updated_on,estimate,estimate_forecast,suite_id,custom_automation_type,custom_description,custom_preconds,custom_steps,custom_expected,custom_steps_separated,custom_mission,custom_goals,section_hierarchy,section_parent_id,section_description
3385901,The installation of the app should be automated by the use of a script,52755,1,7,2,"","GATE-109,GATE-133",9,1515451641,9,1515451798,"","",4401,0,"","","1. Run `bash bin/install.sh <environment>`
2. Run `rails s -b 0.0.0.0 -p 3003`",Rails server runs successfully,"","","",General,"",""
3387616,The application should display a favicon on the browser's tab,52755,1,7,2,"","GATE-111, GATE-134",24,1515526487,9,1524681454,"","",4401,0,"",Set up DM as described here https://intouchhealth.atlassian.net/wiki/spaces/TS/pages/261128591/Software+Development,"1. Log into the staging/prod server
2. Make sure favicon shows up in browser
3. Repeat steps 1 and 2 on multiple browsers",favicon is visible on the browser's tab on all browsers,"","","",General,"",""
3515876,Forms should have front end validation and models should have length validations,52755,1,7,2,"","GATE-280, GATE-295, GATE-297",24,1521588948,9,1533061772,"","",4401,0,Forms should have front end validation in addition to existing back end validation. This will add security and help in certain contexts such as the device type form where you lose your form inputs if you submit a form with errors.,"","1. Login to DM
2. Go to 'Device Types' page   
3. Select 'New Device Type'
4. Try inputing data on that form
5. Go back to 'Device Types' page
6. Select an existing Device Type 
7. Click on the pencil icon
8. Try inputting data on that form
9. Repeat steps 2. to 8. with 'Device Categories' page
10. Repeat steps 2. to 8. with 'Credentials' page
11. Repeat steps 2. to 8. with 'Alerts' page (only available for Super admin and Account admin)","- All form-fields populated with erroneous data show a red notification underneath right away or at the moment of submitting.
- All form-fields that expect numbers should notify the user about too large numbers or invalid numbers (special characters / letters)
- All form-fields that expect text must check for character length limit of 255 characters.
- All form-fields with required data should alert the user when left blank. ","","","",General,"",""
3555162,As a DM users I should be able to make a 'secure string' field for my device type,52755,1,7,2,"","GATE-428, GATE-430",23,1523388456,23,1523567760,"","",4401,0,There should be a 'secure string' data type as one of the data type field options so that sensitive information like server passwords are not stored in the DB in plain text.,"Have an admin account.
Have API credentials.","1. Go to /device_types with an admin user account.
2. Create a new device type or edit an existing one.
3. Add a new field key with _field type: device_ and _data type: encrypted_.
4. Save and add a new device via API of that device type.
5. Go to /devices and open the above created device.
6. Edit the above created device field and add a value.
7. Via API do a show device info call, using that device's uid.

",Verify the encrypted value is shown in the API response json.,"","","",General,"",""
3642070,'Device show' and 'metric' pages changed to use device uid in the route,52755,1,7,2,"","GATE-501, GATE-512",24,1527096311,9,1533064133,"","",4401,0,"The routes for the show and metric pages have been changed from using :id to :device_uid. The routes are now /devices/:device_uid and /devices/:device_uid/metrics for show and metric pages, respectively.
The device show and metric routes should used :device_uid rather than :id to allow for redirecting from FMS with the product serial # (which matches device_uid).","1. Have a Device created
2. Have metrics for said Device","1. Login to DM
2. Click on a Device on the home page's device table.
3. Check the URL on this 'Device info' page.
4. Click on `View Graphs` for that device.
5. Check the URL on this device's metrics page.","* URL for `Show Device` page should look like this: `/devices/:device_uid`
* URL for `Metrics` page should look like this: `/devices/:device_uid/metrics`","","","",General,"",""
3654162,As a user I want to be able to order device fields for a given device type,52755,1,7,2,"","GATE-255, GATE-529",23,1527898441,23,1527898868,"","",4401,0,A user wants to order their device fields in the order they think makes sense.,"","1. Login to DM as an admin.
2. Go to the **Device types** page.
3. Create a new device type and add a few static fields and metric fields. Use positive ascending numbers for the names (this is for better view of the reordering below)
4. Rearrange the original order of the created fields.
5. Submit the form.
6. Check the device type index page.
7. Create a new device via API, using that device type. (Check the API docs at: http://docs.intouchutil.com:3000).
8. Open that device view.
","For 6: You should see the fields in the order you arranged them.
For 8: You should see the fields in the order you arranged them.","","","",General,"",""
3679156,Device Type has a 'max downtime' integer attribute,52755,1,7,2,"","GATE-387, GATE-390",23,1530567489,9,1533069174,"","",4401,0,Posting a metric field value or device field value to a device of that device type within that max downtime should cause the device to to show a status of 'healthy' on its dashboard.,"","1. Login to DM.
2. Go to `/device_type` page.
3. Create a new device type.","* Device Type has a `max downtime` integer attribute that defaults to `60`.
* This value can be between 1 and the maximum possible DB integer value.
* The integer value corresponds to a number of minutes.","","","",General,"",""
3679157,Devices create health alerts when they have not reported within their 'max downtime',52755,1,7,2,"","GATE-387, GATE-531",23,1530567937,9,1530574486,"","",4401,0,Devices create an unhealthy 'Device not reporting' alert when they have not reported within the 'max downtime' defined by their parent device type.,"Have a device type created, and its health alert enabled in the /alerts page. Set a maximum frequency of 1 minute.","1. Login to DM.
2. Go to `/device_types` page, edit a device type and set the max downtime value to 1 minute.
3. Create a device with that device type or use an already existing one.
4. Send a `metric` or `device_field` update via REST API to that device.
5. Go to the device detail page, you should see a **Healthy** green status next to its name.
6. After a minute the status will change to a red **Unhealthy**.",Verify an alert is sent to all users who have the health alert activated.,"","","",General,"",""
3679817,UI/UX should reflect the ITH style,52755,1,7,2,"","GATE-565, GATE-592, GATE-593",23,1530914203,23,1531243181,"","",4401,0,UI/UX should reflect the ITH style.,"","1. Login to DM
2. Go to `/devices` page.
3. Click on a device to open its detailed page.
4. Resize the window.
5. Click the `Metrics` table to access the metrics detailed page.
6. Resize the window.
7. Repeat cases 1, 2, 3, 5 on a mobile device.
","* Verify Metrics graphs no longer show on the `detailed device` page.
* Verify graph are showing in the `detailed metrics` page.
* For both pages make sure everything fits and adjusts well in all screen sizes, and in mobile device.","","","",General,"",""
3679866,Disable browser side caching of any sort,52755,1,7,2,"","GATE-607, GATE-608",23,1531762784,23,1531762937,"","",4401,0,"","",1. From a terminal do `curl -v https://devices-stg.intouchstaging.com/`,"You should get _Cache-Control: no-cache, no-store, must-revalidate_ in the headers block.
","","","",General,"",""
3679871,Remove device name uniqueness,52755,1,7,2,"","GATE-595, GATE-598",24,1531858736,9,1531939096,"","",4401,0,Device names shall not be unique. There's a way of differentiate devices which is via device_UID.,"1. Have 2 Accounts created 
2. Have 3 Device Types crated:  
 * 2 of them in the same Account
 * 1 on a different Account.

_Note:  Account  >has>  Device Type  >has>  Device_","1. Login to DM app
2. On /devices page click on 'New Device'
3. Create two devices with the same name of the same device type. (that implies same Account)
4. Repeat for different device type but same Account.
5. Repeat for different Accounts.",- None of the above device creations produces error. Devices can have the same name don't matter the scope.,"","","",General,"",""
3682148,Improve UX by adding more tooltips and increasing consistency of pages,52755,1,7,2,"","GATE-544, GATE-624",24,1532977922,9,1533071548,"","",4401,0,"- Improve consistency and usability of views
- Add tooltips to indicate non obvious information to the user
",1. Have at least a Super Admin and an Account Admin created.,"1. Login to DM
2. Inspect the different pages of the app:
3. Login as a Super Admin / Super viewer
4. Go to `/devices`, `/device_types`, and `/credentials` index pages and inspect the corresponding tables present.
5. Log in as an Account Admin / Account Viewer
6. Go to `/devices`, `/device_types`, and `/credentials` index pages and inspect the corresponding tables present.








","For 2.:

- Tooltips should be shown on hover for **'?'** icons for: 

    **max frequency** column header on the **'my alerts' index page** 
    **streak threshold** label on the **alert form** 
    **max downtime** label on **device type form**
    **credential type** column header on **credential index page** (make sure tooltip still shows when the column is collapsed and you have to press the '+' button to see it), 
    and **top page headers** for **all index pages**.

- **Credentials index page** should now have a similar table to **Devices** / **Device Types**.

- In general: Index pages, button locations, forms, etc. should look relatively uniform.


For 4. and 6.:

- Only **Super-Admins** and **Super-Viewers** should see an **account** column in the **device**, **device type**, and **credential** index tables.","","","",General,"",""
3682184,Update DM landing page,52755,1,7,2,"","GATE-634, GATE-643",23,1533223737,23,1533223891,"","",4401,0,"- Remove IO
- Add login button to navbar","","1. Open DM homepage.
2. Login","1. Home page should not mention IO.
2. Sign in button should show at bottom of page and in top right nav bar. Sign in button in upper right should not show once logged in.","","","",General,"",""
3685460,Refine charts page,52755,1,7,2,"","GATE-716, GATE-743",24,1536270424,9,1536272547,"","",4401,0,"- Add a button in the charts page to go back to the device details page.
- Notify the user when a chart is loading data.","1. Have a device created
2. Have some metrics posted to it, in order to populate the metrics chart.

_(Note: I recommend to test this on https://devices-dev.intouchstaging.com since it has enough data already to test.)_","1. Login to DM
2. Select a Device from the devices table.
3. On the Device detailed page, click on `View Graphs`
4. Switch between `day`, `week`, `month` and `year` views.
5. Click the `Back` button","For 4.: When loading graph's info, you should see a 'loading' icon.

For 5.: The `Back` button should take you back to the Device detailed page.","","","",General,"",""
3481043,As the Device Manager I want to verify users via the ITH IdP,52756,1,2,2,"","GATE-196, GATE-198",23,1519939073,23,1523469852,"","",4401,0,Device Manager will sync with the ITH IdP to allow SSO with other ITH applications.,"- Have an user account created in https://fmswebportal.intouchstaging.com/ 
- Give that account permission to use GW.
- Create an account in your local environment using rails console with the same username, email, and uuid of the FMS staging acccount.
- Make sure your `~/DM/config/secrets.yml` is pointing to the correct URL callbacks","1. Login with your FMS staging username/password
2. Click on the user icon in the top right corner and select logout","1. You are redirected to the DM /devices page
2. You are redirected directly to the DM root page without seeing any IdP logout page","","","",Authentication,"",""
3385900,As an authenticated FMS user I can login into the Device Manager if authorized.,52756,1,7,2,"","GATE-85,GATE-93,GATE-135",9,1515451386,24,1533143602,"","",4401,0,"When a user is enabled for DM on FMS, it is automatically created on DM's db. This is due to the implementation of 'translator'.  ",1. have a user created on FMS,"1. Login with an FMS user that is not enabled for DM. 
2. Enable the user for DM and login again.","1. There is a flash message telling the user to contact support
2. The user can login to DM","","","",Authentication,"",""
3488018,Separate Client API access by Account,52756,1,7,2,"","GATE-137, GATE-194",24,1520291180,24,1520897377,"","",4401,0,"Separate credential authorization by account. The credentials account will be set by the creating users account, or if the user is a super admin, by the selected account.","Have at least 2 Accounts and 2 pairs of Credentials created, one for each Account.","1. Index elements from the account the credentials belong to: 

    * do a GET to  /api/v1/users
    * do a GET to  /api/v1/device
    * do a GET to  /api/v1/device_categories

2. Repeat step 1 using the second pair of credentials.




","Verify GM credentials (API key/secret pairs) belong to an account and have access to CRUD objects only in that account.

i.e.: step 1 should show different elements than step 2.","","","",Authentication,"",""
3642071,Friendly forwarding allows users to be redirected to the requested page after logging in,52756,1,7,2,"","GATE-501, GATE-509",24,1527097528,9,1527100491,"","",4401,0,"Friendly forwarding allows users to be redirected to the requested page after logging in. Only GET requests will be friendly forward. POST, PUT/PATCH, DELETE requests will not be stored for friendly forwarding, as this could cause errors if a form was submitted with a deleted or expired session.","1. Have a user created in DM
2. Have a user created on IO (or any other application that also uses IDP)","1. Make sure to be Logged out of DM.
2. Create an IdP staging session by login into IO.
3. While logged in to IO, go directly to a DM route e.g. `your_DM_address/device_types`.",For 3: You should be taken to that specific page (not the root /devices page) without asking for you to log in.,"","","",Authentication,"",""
3642292,Providing a valid access token as a query parameter allows for users to SSO,52756,1,7,2,"","GATE-237, GATE-473",24,1527108296,23,1533149338,"","",4401,0,"By providing a valid access token in the URL as a query parameter, IdP users can SSO to the Device Manager.
(FMS would be making use of this: 'As the FMS, I want to be able to redirect Gateway users to the Gateway platform, providing a JsonWebToken which explicitly allows access to said platform, so that they can enter that site without the need to log-in again.')",1. have a user created on DM.,"1. Open `~/.bashrc` and add:  `export IS4_INTROSPECTION_CLIENT_SECRET='idpsecret'`
2. Generate an access token: 
    * open the file: `app/herlepers/session_helper.rb`
    * place a `byebug` in the `log_in` method. Close and save.
    * run DM server and login (login will be interrupted by the 'byebug') and go back to the terminal window.
    * grab the token by typing 'tokens'access_token'' in the terminal.
    * copy that string and type 'c' to continue.
    * the login process will continue normally.
3. Logout so that your DM and IdP sessions are removed.
4. Use that access_token in the URL to access any page that the user for whom that token was generated should have access to. (e.g. <your_DM_address>/device_types?access_token=<access_token_string>)

NOTE: If you want to access certain device as a super admin the URL is slightly different `<DM base URL>/devices/{uid}?account={account}&access_token={access token}`
","By passing the token in the URL, the user is granted access and taken to the specified page on the app.
Note: If a user is not supposed to have access to a certain page, this won't be the exception: the user still won't have access. 
e.g. an account_viewer trying to access a 'show device' page of a device from a different account  >> User will get a red notification: 'Unauthorized'","","","",Authentication,"",""
3679810,Add ability to generate Device Credentials via the UI,52756,1,7,2,"","GATE-554, GATE-564",23,1530903030,23,1530904146,"","",4401,0,Somewhere in the UI there should be a mechanism to generate Device Credentials.,"","1. Login to DM.
2. Go to /devices and click on a device to open de detailed page.
3. Click in the 'dots' button next to the device's health status.
4. Select 'create device credential'
5. Accept the prompt.
6. Check the expected result section.
7. After everything is tested, create new credentials for this device."," * For 6: Verify you can **only** perform these API calls **without providing an UID**:
    * Create Metrics C3410332
    * Create Device Field Value C3525478
    * Show Device Field Value C3567815
 * If you provide an UID you should get this response:

    {
        'success': false,
        'reason': 'Your credential is already associated with a device. Please do not specify device UID.'
    }
 * If you try to do any other API call you will get this response:

    {
        'success': false,
        'reason': 'The credential 'Healthy Credential' is not authorized to make the attempted request'
    }

 * For 7: The new credentials should work and the old ones should not.
","","","",Authentication,"",""
3679824,Device credentials are only authorized for specific requests,52756,1,7,2,"","GATE-535, GATE-552",24,1531246870,9,1531261499,"","",4401,0,"Info on the use of these credentials, its access and limitations here:  http://docs.intouchutil.com:3000/#authentication","1. Have 2 devices created.
2. Have a pair of device credentials created for only 1 of the devices mentioned above.","1. Use those device credentials to perform the following tasks:
- Create Metrics
- Create Device Field Value
- Show Device Field Value

without providing `device_IUD`.

2. Repeat the same calls, this time providing a `device_UID`.

3. Using your 'device credentials' try to perform any other call, different than the ones specified above.
","1. Verify that you successfully were able to use your device credentials to:
- Create Metrics
- Create Device Field Value
- Show Device Field Value


2. For the above routes the `device UID` parameter should NOT be provided. If a device UID is provided it will result in the following error: `'Your credential is already associated with a device'`. 

3. If a `Device Credential` is used for any API route besides the ones listed above it will result in the following error: `'The credential '{name of credential}' is not authorized to make the attempted request'`.","","","",Authentication,"",""
3448495,As the Device Manager I want to provide a UI for CRUD of device types,53456,1,7,2,"","GATE-112,GATE-113,GATE-132",9,1518434700,9,1523991049,"","",4401,0,"","","* Super admin:
  1. Log in as super admin
  2. Go to the device type new page 
  3. Create a device type
  4. Try with making device types with different numbers of fields and try to break the form with empty inputs
  5. After creating device types go to the index page and click the pencil button to edit
  6. Try adding and removing fields and playing with different inputs
  7. Click the trash icon to remove a device type

* Super Viewer:
  1. Log in as super viewer
  2. Go to the `Device type` page
  3. Go to (`/device_types/new`)
  4. Go to (`/device_types/X/edit`)

* Account admin:
  1. Log in an account admin
  2. Go to the device type new page 
  3. Create a device type
  4. Try with making device types with different numbers of fields and try to break the form with empty inputs
  5. After creating device types go to the index page and click the pencil button to edit
  6. Try adding and removing fields and playing with different inputs
  7. Click the trash icon to remove a device type

* Account Viewer:
  1. Log in an account viewer
  2. Go to the `Device type` page
  3. Go to (`/device_types/new`)
  4. Go to (`/device_types/X/edit`)","* Super admins (role 0) can:
    * View all device types on the index page (`/device_types`) for all accounts
    * Create new device types (`/device_types/new`) for all accounts
    * Edit device types (`/device_types/X/edit`) for all accounts
    * Delete device types for all accounts

* Super viewers (role 1) can:
    * View all device types on the index page (`/device_types`) for all accounts

* Super viewers (role 1) cannot:
    * Create new device types (`/device_types/new`) for any account
    * Edit device types (`/device_types/X/edit`) for any account
    * Delete device types for any account

* Account admins (role 2) can:
    * View device types on the index page (`/device_types`) that belong to their account
    * Create new device types (`/device_types/new`) for the account they belong
    * Edit device types (`/device_types/X/edit`) that belong to their account
    * Delete device types that belong to their account

* Account viewers (role 3) can:
    * View all device types on the index page (`/device_types`) that belong to their account

* Account viewers (role 3) cannot:
    * Create new device types (`/device_types/new`) for their account
    * Edit device types (`/device_types/X/edit`) for their account
    * Delete device types for their account","","","",Users,"",User abilities and characteristics
3448499,As the Device Manager I want to provide a UI for CRUD of device categories,53456,1,7,2,"","GATE-175,GATE-176",9,1518437144,9,1523991098,"","",4401,0,"","","* Super admin:
  1. Log in as super admin
  2. Go to the device categories new page 
  3. Create a device categorie
  4. Try with making device categories with different numbers of fields and try to break the form with empty inputs
  5. After creating device categories go to the index page and click the pencil button to edit
  6. Try adding and removing fields and playing with different inputs
  7. Click the trash icon to remove a device categorie

* Super Viewer:
  1. Log in as super viewer
  2. Go to the `Device categories` page
  3. Go to (`/device_categorie/new`)
  4. Go to (`/device_categorie/X/edit`)

* Account admin:
  1. Log in an account admin
  2. Go to the device categorie new page 
  3. Create a device categorie
  4. Try with making device categorie with different numbers of fields and trying to break the form with empty inputs
  5. After creating device categorie go to the index page and click the pencil button to edit
  6. Try adding and removing fields and playing with different inputs
  7. Click the trash icon to remove a device categorie

* Account Viewer:
  1. Log in an account viewer
  2. Go to the `Device categories` page
  3. Go to (`/device_categorie/new`)
  4. Go to (`/device_categorie/X/edit`)","* Super admins (role 0) can:
    * View all device categories on the index page (`/device_categories`) for all accounts
    * Create new device categories (`/device_categories/new`) for all accounts
    * Edit device categories (`/device_categories/X/edit`) for all accounts
    * Delete device categories for all accounts

* Super viewers (role 1) can:
    * View all device categories on the index page (`/device_categories`) for all accounts

* Super viewers (role 1) cannot:
    * Create new device categories (`/device_categories/new`) for any account
    * Edit device categories (`/device_categories/X/edit`) for any account
    * Delete device categories for any account

* Account admins (role 2) can:
    * View device categories on the index page (`/device_categories`) that belong to their account
    * Create new device categories (`/device_categories/new`) for the account they belong
    * Edit device categories (`/device_categories/X/edit`) that belong to their account
    * Delete device categories that belong to their account

* Account viewers (role 3) can:
    * View all device categories on the index page (`/device_categories`) that belong to their account

* Account viewers (role 3) cannot:
    * Create new device categories (`/device_categories/new`) for their account
    * Edit device categories (`/device_categories/X/edit`) for their account
    * Delete device categories for their account","","","",Users,"",User abilities and characteristics
3389552,As a Super Admin i should be able to access '/credentials/new',53457,1,7,2,"","GATE-110, GATE-128",24,1515613658,23,1523558138,"","",4401,0,"","1. Have a Super Admin created.
2. Login as a Super Admin.","1. Go to Credentials > Create New Credential
2. You should be redirected to :  `/credentials/new'

or

1. On your browser go to: `/credentials/new'",Be granted access to `/credentials/new`,"","","",Users > Super Administrator,53456,""
3389553,As a Viewer i shouldn't have access to '/credentials/new',53458,1,7,2,"","GATE-110, GATE-128",24,1515614461,23,1523987476,"","",4401,0,"","1. Have a Viewer user created.
    * Super Viewer (`role = 1`)
    * Account Viewer (`role = 3`)
2. Login as a Viewer user.","1. Go to /credentials 
2. The 'New credential' link shouldn't be present.

or

1. On your browser go to: `/credentials/new`",You should be redirected to the homepage page with an 'Unauthorized' danger flash message.,"","","",Users > Super Viewer,53456,'Viewer' users only have permissions to view.
3488019,"Add account admin, account viewer, and super viewer roles to the possible user roles",68510,1,7,2,"","GATE-137, GATE-193",24,1520291307,23,1523564130,"","",4401,0,"Account viewer, account admin, and super viewer are options for the role of a GM user.",The 4 types of users will be seeded to the db.,"1. Go to the login page.
2. Login with each type of user.",Verify you can login with the 4 types of users.,"","","",Users > General,53456,""
3519568,As a user I want to see integer and float metrics over time,68510,1,7,2,"","GATE-256,GATE-452",24,1521742551,23,1533069614,"","",4401,0,"As a user I want to see user defined float and integer metrics over time (CPU, Disk Space, etc)","1. Create an Account, a Device Category and a Device Type via the GM API.
2. Create a device via the GM API.
3. Post metrics via the GM API. Make sure to post several metrics with different values and different 'Timestamps'. (Timestamps not older than 1 year ago)

For example: The following metric won't be reflected on the metrics graphics. Graphics only take data from 1 year ago at the most.

	{
		'metrics': {
			'metric_awesome_integer': 
				{
					'name': 'bestest_field_instance_name',
					'value': 4114,
					'timestamp': '1999-02-15T22:26:12'
				}
			
		}
	}","1. Login to GM

2. View the Device detail page by clicking on a Device from the device table on the home page. Or go to ' /devices/:id '. 

3. You should be presented with 2 tables, click on the one that says 'Metrics' to be taken to the metrics charts page.
","1. After step 3. you should be presented with 2 metric charts: one for Integer values, one for Float values.

2. Charts should display graphics (not be blank). If they look empty try different perspectives (day, week, month, year) this has to do with the Timestamps used when posting metrics.

3. You should be able to drag with your mouse in the graphic and zoom in. To zoom out, click day/week/month/year .

4. You should be able to hover your mouse over a data point (looks like a point in the graphic) and see the value and time.","","","",Users > General,53456,""
3544148,As a DM user I should be able to view an info page whether or not I am logged in,68510,1,7,2,"","GATE-384, GATE-406",24,1522857638,23,1533070334,"","",4401,0,A static home page with info about Device Manager should be the / route for DM. The /login route should automatically redirect to the IdP login page.,1. Have a user created (any role) for further login,"1. Go to DM's home page (for example: http://13.56.93.248:3003/)

2. Go to '/login' (either by adding '/login' to the home path or by clicking the login button)

3. On DM's home page: Click on the API link under 'Where can i learn more?' section 

5. Login with your DM user

   5.1 Once logged in, Click the 'Intouch Device Manager' logo in the top left

","1. The '/' route should take you to a home page with info and a diagram. This page should be accessible whether or not you are logged in. 

2. Going to /login route should automatically redirect you to the IdP login page.

3. Clicking the API link should link you to the DM api docs. 

5. (once logged in) You should view the home page by clicking the logo in the top left, the page should look the same but the sign in button should not appear.","","","",Users > General,53456,""
3555160,As a user I want to be able to edit my device field values,68510,1,7,2,"","GATE-402, GATE-422",24,1523384067,9,1523387341,"","",4401,0,"As a DM user i should be able to edit string, text, ints, floats, etc. values on a Device.","1. Have a Device creted.
2. Have Device Fields created
3. post values to that Device Fields though the web or through the API. Leave some Field Values blank.","1. Login to DM
2. Select your Device from the Device page.
3. On the Device Detailed view, the Device dashboard has a 'pencil' edit icon on each field, which when clicked allows the user to create/update the device field value. 
4. Use that pencil icon to edit Field Values of all data types.
6. Repeat for device field values that are currently empty (aka they show N/A).","1. The Field Value form only takes values of the corresponding value type.
2. The values should be properly updated to the new entered value.
3. After a successful update, a flash message of success should appear on the upper right corner of the screen.","","","",Users > General,53456,""
3561071,Device pages should authorize based on user roles,68510,1,7,2,"","GATE-441, GATE-442",23,1523644005,23,1523646869,"","",4401,0,Device controller should only allow users with proper access to view device related pages.,"- Have at least 2 accounts created, each one with their respective API credentials.
- Have 1 account_admin and 1 account_viewer user roles created for each of the above mentioned accounts.
- Have 1 super_admin and 1 super_viewer user roles created.
- Have at least 1 device created for each account.
","1. Login with Super User, go to the /devices page, open a device and click the 'Metrics' table header.
2. Login with Super Viewer, go to the /devices page, open a device and click the 'Metrics' table header.
3. Login with Account Admin (account 'a'), go to the /devices page, open a device and click the 'Metrics' table header.
4. Login with Account Viewer (account 'a'), go to the /devices page, open a device and click the 'Metrics' table header.
5. Login with Account Admin (account 'b'), go to the /devices page, open a device and click the 'Metrics' table header.
6. Login with Account Viewer (account 'b'), go to the /devices page, open a device and click the 'Metrics' table header.
7. Login with Account Admin/Viewer (account 'a'), try to access an account 'b' device by pasting its id in the URL (/device/:id).","1. You should be able to see the /devices/:id/metrics page. Check if you can do this for devices created in different accounts.
2. You should be able to see the /devices/:id/metrics page. Check if you can do this for devices created in different accounts.
3. You should be able to see the /devices/:id/metrics page. Check that you can only see devices in account 'a'.
4. You should be able to see the /devices/:id/metrics page. Check that you can only see devices in account 'a'.
5. You should be able to see the /devices/:id/metrics page. Check that you can only see devices in account 'b'.
6. You should be able to see the /devices/:id/metrics page. Check that you can only see devices in account 'b'.
7. You should get an Unauthorized error and be redirected to the Homepage.","","","",Users > General,53456,""
3647716,Emails should not be unique,68510,1,7,2,"","GATE-496, GATE-527",23,1527806626,23,1527866223,"","",4401,0,"Because FMS is the source of truth for users, and emails are not unique for users in FMS, DM should reflect this same user validation template.","","1. Send an API request to list current users (detailed in the API docs: http://docs.intouchutil.com:3000/)
2. Copy the email of one of the existing users and use it to create the user below.
3. Send and API request to create a user ( detailed in the API docs: http://docs.intouchutil.com:3000/ ) make sure to use the existing user's email.
",The user should be created at step 3,"","","",Users > General,53456,""
3658469,As a user I want to perform CRUD operations on scripts,68510,1,7,2,"","GATE-518, GATE-522",24,1528151656,23,1533079396,"","",4401,0,"Admin Users can perform the following actions on the web
- List scripts
- Create scripts
- Update scripts
- Delete scripts",1. Have a Device Type created on DM,"1. Login to DM.
2. Go to the scripts page.
3. Create a new script.
4. Open the script (without making any changes) and then close it.
5. Update the script by changing the script name or the code.
6. Delete the script.
7. Attempt to Delete the corresponding Device Type","1. Verify that Create, Read, Update and Delete actions can be performed on scripts with no errors.
2. When attempting to delete a Device Type, the `Are you sure?` message warns the user about the potential loss of the associated scripts that the Device Type may have.","","","",Users > General,53456,""
3679874,As a DM user I should be able to create and edit Devices via the UI,68510,1,7,2,"","GATE-596, GATE-609",24,1531866681,23,1533137998,"","",4401,0,"Authorized users should be able to create and edit Devices via the UI.

As for now, the only authorized users to create / edit Devices via the UI are:  **Super Admins** and **Account Admins**","Have one user of each type:

* Super Admin (0)
* Super Viewer (1)
* Account Admin (2)
* Account Viewer (3))

","Verify visibility of options:
1. Login as a **Super Admin**
2. Inspect /devices page
3. Click on a Device to see its detailed view
4. When available, inspect the options presented in the **'...'** (triple dot dropdown)
5. Logout
6. Repeat with the other user types.

Verify Device creation / edition:
1. Login as a SuperAdmin / Account admin
2. On `/devices` page, click `New Device`
3. Fill in the form and submit.
4. Go back to `/devices` page
5. Click on the device 
6. On the device's Detailed view page, select `Edit Device` from the **'...'** (triple dot dropdown) menu
7. Edit the device and submit
8. Go back to `/devices` page

Associating Account and Device via web
1. Login as a Super Admin
2. Via web, create a new account 
4. Via web, create a device in that account (with the same uid as an existing device in another account). ","For Option Visibility:
- Only super admins/account admins should see the new device button on the Device index page.
- Only super admins/account admins should see the edit device option on the triple dot dropdown on a Device dashboard.

For Device Creation / Edition:
- for 4.: Make sure the device you just created appears on the devices table for ALL users (Account Admin / Account Viewer must belong to the same account the device does.)
- for 8.: Make sure the changes were applied correctly and persist. 

for Account and Device association via web:
- After going through all the steps, confirm that the account viewer/admin can view the device detail page and metrics page for that device.
","","","",Users > General,53456,""
3679813,Users can create and cancel script runs,68510,1,7,2,"","GATE-524, GATE-555",24,1530907633,24,1533070549,"","",4401,0,"As a user, you can chose existing scripts to create a 'scrip run'. You can a start and finish date/time and can also cancel the run if desired.","• Have a script created on DM
• You can use this as content:

	#!/usr/bin/env bash
	<script>
		alert( 'Hello world!' );
	</script>","1. Login to DM 
2. Go to Scripts page _(/scripts)_
3. Click on `New Runs`
4. Fill in all the necessary information:
- select a script from the dropdown menu
- set `ACTIVATE AT` and `DEACTIVATE AT` day/time
- select one or more devices _(more than one means `run in batch`)_
- click CREATE SCRIPT RUNS","- Verify that you can create script runs in batch.
- Verify that bad attempts to create script runs give the proper error messages.
- Verify that you can cancel a single script run.
- Verify that you can cancel a batch of script runs.
- Verify that the script runs table looks good and is responsive.","","","",Users > General,53456,""
3493654,As a Client I want to index Users,56660,1,7,2,"","GATE-63,GATE-195",24,1520531630,9,1523989195,"","",4401,0,"See instructions for postman here: https://intouchhealth.atlassian.net/wiki/spaces/TS/pages/260997532/API+Docs

Path
GET /api/v1/users

Headers

- ITH-API-Key-ID: LzQc560jReJr0iYXumQAGCSCQiJOwj
- ITH-API-Secret-Key: Xea7crLP6LLM4NnGX8deGQDsc9Gd1
- Content-Type: application/json

Input Body: No body content","",1. Do a GET to /api/v1/users (see description),"# Success


   { 'success': true,
      'users': 
        
                     {   'id': 1,
                          'username': 'user1',
                          'role': 'account_admin',
                          'email': 'user1@example.com',
                          'auth_id': 'auth|xxxxxxxxxxxxx',
                          'created_at': '2017-12-01T22:02:23.000Z',
                          'updated_at': '2017-12-01T18:25:34.000Z' 
                     },
        
                     {   'id': 2,
                          'username': 'user2',
                          'role': 'account_viewer',
                          'email': 'user2@example.com',
                          'auth_id': 'auth|xxxxxxxxxxxxx',
                          'created_at': '2017-12-01T22:02:23.000Z',
                          'updated_at': '2017-12-01T18:25:34.000Z' 
                     }
                  
   }




#No Success:

  * `{ 'success': false, 'reason': 'Missing credentials' }` | When one or both credentials are missing.
  
  * `{ 'success': false, 'reason': 'Invalid credentials' }` | When credentials don't match.","","","",REST API > Users,53840,""
3493655,As a Client I want to create Users,56660,1,7,2,"","GATE-63,GATE-195",24,1520531639,9,1523989195,"","",4401,0,"See instructions for postman here: https://intouchhealth.atlassian.net/wiki/spaces/TS/pages/260997532/API+Docs

Path
POST /api/v1/users

Headers

- ITH-API-Key-ID: LzQc560jReJr0iYXumQAGCSCQiJOwj
- ITH-API-Secret-Key: Xea7crLP6LLM4NnGX8deGQDsc9Gd1
- Content-Type: application/json


Input Body
Role values: 'account_admin', 'account_viewer' (Because the request is made by credentials that belong to an Account, those are the ONLY roles available via API for now).

{ 

      'username': 'user1',
      'email': 'user1@example.com',
      'role': 'account_admin',
      'auth_id': 'xxxxxxxxxxxxx'
 
}","",1. Do a POST to /api/v1/users (see description),"# Success:

- { 'success': true }


# No Success:

- { 'success': false, 'reason': 'Missing credentials' } | When one or both credentials are missing.

- { 'success': false, 'reason': 'Invalid credentials' } | When credentials don't match.

- { 'success': false, 'reason': 'Missing Parameters' } | When one or more input parameters are missing.

- { 'success': false, 'reason': 'Validation failed: Username|Email|auth has already been taken' } | When the inputted username|email|auth_id has already been taken.","","","",REST API > Users,53840,""
3493656,As a Client I want to update Users,56660,1,7,2,"","GATE-63,GATE-195",24,1520531647,9,1523989195,"","",4401,0,"See instructions for postman here: https://intouchhealth.atlassian.net/wiki/spaces/TS/pages/260997532/API+Docs

Path
PATCH /api/v1/users/:username

Headers

- ITH-API-Key-ID: LzQc560jReJr0iYXumQAGCSCQiJOwj
- ITH-API-Secret-Key: Xea7crLP6LLM4NnGX8deGQDsc9Gd1
- Content-Type: application/json

Input Body
One or more of the following parameters. 
Role values: 'account_admin', 'account_viewer' (Because the request is made by credentials that belong to an Account, those are the ONLY roles available via API for now).

{
 
      'username': 'user1',
      'email': 'user1@example.com',
      'role': 'account_admin',
      'auth_id': 'xxxxxxxxxxxxx' 

}
","",1. Do a PATCH to /api/v1/device/:username (see description),"# Success:

- { 'success': true }


# No Success:

- { 'success': false, 'reason': 'Missing credentials' } | When one or both credentials are missing.

- { 'success': false, 'reason': 'Invalid credentials' } | When credentials don't match.

- { 'success': false, 'reason': 'User not found' } | When the username provided in the url does not match an existing user.

- { 'success': false, 'reason': 'Validation failed: Username|Email|auth has already been taken' } | When the inputted username|email|auth_id has already been taken.
","","","",REST API > Users,53840,""
3493657,As a Client I want to delete Users,56660,1,7,2,"","GATE-63,GATE-195",24,1520531671,9,1523989195,"","",4401,0,"See instructions for postman here: https://intouchhealth.atlassian.net/wiki/spaces/TS/pages/260997532/API+Docs


Path
DELETE /api/v1/users/:username

Headers

- ITH-API-Key-ID: LzQc560jReJr0iYXumQAGCSCQiJOwj
- ITH-API-Secret-Key: Xea7crLP6LLM4NnGX8deGQDsc9Gd1
- Content-Type: application/json


Input Body: No body content","",1. Do a DELETE to /api/v1/device/:device_uid (see description),"# Success:

- { 'success': true }


# No Success:

- { 'success': false, 'reason': 'Missing credentials' } | When one or both credentials are missing.

- { 'success': false, 'reason': 'Invalid credentials' } | When credentials don't match.

- { 'success': false, 'reason': 'User not found' } | When the username provided in the url does not match an existing user.","","","",REST API > Users,53840,""
3410332,As a client I want to post to the metrics API,56661,1,7,2,"","GATE-115, GATE-114",24,1516651296,24,1533076484,"","",4401,0,"There are two type of fields/values to post:
* device field with the corresponding device field values: Device Field is a static one time thing. Like 'Operating System' for example {NOT YET IMPLEMENTED}
* metric field with the corresponding metric field values: Metric Field is something that has multiple values over time. e.g. 'Remaining Memory'
","1. Generate API key id/secret via the /credentials/new page and save them for later use.

2. Create an account: 
`a  = Account.create(name: 'Awesome Account')`

3. Create a Device Category: _Device Categories are associated to an account_
`dc = a.device_categories.create(name: 'Awesome Device Category')`

4. Create a Device Type:  _Device Types belongs to Device Category_
`dt = dc.device_types.create(name: 'Awesome Device Type', account_id: 1) >> account_id MUST MATCH dc’s`

5. Create a Device: _Devices corresponds to a Device Type_
`d = dt.devices.create(name: 'Awesome Device’, device_uid: ‘Awesome UID’)`

6. Create Metric Fields (in this case one of each data type).  _Matric Fields are associated to a Device Type (in this case we only have 1 device type hence all device fields correspond to the same device type)_
`mf_s = dt.metric_fields.create(key: 'awesome_string',   data_type: 0)`
`mf_t = dt.metric_fields.create(key: 'awesome_text',     data_type: 1)`
`mf_i = dt.metric_fields.create(key: 'awesome_integer',  data_type: 2)`
`mf_f = dt.metric_fields.create(key: 'awesome_float',    data_type: 3)`
`mf_b = dt.metric_fields.create(key: 'awesome_boolean',  data_type: 4)`
`mf_d = dt.metric_fields.create(key: 'awesome_datetime', data_type: 5)`","POST /api/v1/metrics

Headers:

* ITH-API-Key-ID: LzQc560jReJr0iYXumQAGCSCQiJOwj
* ITH-API-Secret-Key: Xea7crLP6LLM4NnGX8deGQDsc9Gd1
* content type: application/json

Body:

	{ 'device_uid': 'AAT402',
           'metrics': { 'cpu': { 'name': 'core 1 cpu',
                                  'value': '20',
                                  'timestamp': '2011-10-05T22:26:12' },
                                { 'name': 'core 2 cpu',
                                   'value': '21',
                                   'timestamp': '2011-10-05T22:26:12' },
                       'disk_space': { 'value': '50',
                                       'timestamp': '2011-10-05T22:26:12' } } }



**Note: 'cpu' and 'disk_space' are the fields that appear on the Device detailed page (on the Metrics table), but the correct way of writing those fields names can be taken from the corresponding Device Type's edit page. Writing a metric field name incorrectly will generate a 'Metric fields not found' response.**","Output on Success

* { 'success': true }



Output on Failure

* { 'success': false,
  'reason': 'Missing credentials' } | When one or both credentials are missing.

* { 'success': false,
  'reason': 'Invalid credentials' } | When credentials don't match.

* { 'success': false,
  'reason': 'Missing parameters' } | When the device|metrics|metric key are not present in the input body.

* { 'success': false,
  'reason': 'The timestamp is invalid' } | When the timestamp has an incorrect format.

* { 'success': false,
  'reason': 'Device not found' } | When the inputted device_uid doesn't match an existing device.

* { 'success': false,
  'reason': 'Metric fields not found' } | When one or more of the inputted metric fields don't exist.

* { 'success': false,
  'reason': 'The value is of an invalid data type' } | When the inputted value for a metric field is of the wrong type.","","","",REST API > Metrics,53840,""
3525478,As a DM user I want to be able to create/update device field values via the API,56661,1,7,2,"","GATE-290, GATE-291",24,1522015832,9,1523992456,"","",4401,0,"The GM API should provide an API route for creating/updating device field values.

See instructions for postman in DM-slate.

Path
POST `/api/v1/device_field_values`

Headers

* ITH-API-Key-ID:  pre-generated api key
* ITH-API-Secret-Key: pre-generated api secret key
* Content-Type: application/json

Input Body: 

{ 'device_uid': 'AAT402',
  'device_field_values': { 'operating system': { 'value': 'Ubuntu' } } }","1. Have a pair of credentials created
2. Have a Device created in the same account the above credentials belong to.
3. Have Device Fields created for that Device.","1. Do a POST to `/api/v1/device_field_values` (see description)

2. Repeat with different values.","1. Expected Outputs

# Success

* { 'success': true }


#No Success

* { 'success': false,
  'reason': 'Missing credentials' } | When one or both credentials are missing.

* { 'success': false,
  'reason': 'Invalid credentials' } | When credentials don't match.

* { 'success': false,
  'reason': 'Missing parameters' } | When some input body item is missing.

* { 'success': false,
  'reason': 'Device not found' } | When the inputted Device doesn't exist in the (credential's) Account.

* { 'success': false,
  'reason': 'Device fields not found' } | When at least one of the inputted Device Fields that you are trying to post values to, don't exist for the provided Device.

* { 'success': false,
  'reason': 'The value is of an invalid data type' } | When at least one of the inputted values don't match the corresponding Device Field Value type.


2. Expected Behaviour:

* You can post values more than once to the same Device and Device Field. That's the way a value is 'updated'.","","","",REST API > Metrics,53840,""
3567815,As a DM user I should be able to GET values for a specific device field,56661,1,7,2,"","GATE-448, GATE-450",23,1523923401,23,1523924258,"","",4401,0,"There should be an API route to allow users to get the values for a particular field. The user should be able to specify a Device Type or Device that they want to receive this field's values for.

An API route is provided to get the value for a given device field. If 'device_type' is provided as a query parameter the response will provide an array of objects containing device uid and field values for each device of that device type. If 'device_uid' param is provided, the value for that device and device field will be returned.","**Headers**

* `ITH-API-Key-ID: LzQc560jReJr0iYXumQAGCSCQiJOwj` (example)
* `ITH-API-Secret-Key: Xea7crLP6LLM4NnGX8deGQDsc9Gd1` (example)
* `Content-Type: application/json`","**To get a field's value for a specific device:**
`GET /api/v1/device_field_values/{field_name}?device_uid={device_uid}`

**To get a field's values for each device of a specific device type:**
`GET /api/v1/device_field_values/{field_name}?device_type={device_type_name}`","**Success:**


     Query by device:

     { 'success': true,
      'field_value': 'Ubuntu' }

     Query by device type:

     { 'success': true,
       'field_value': 
         { 'device_uid': 'Tc90krb5'
            'value': 'Ubuntu'
         },
         { 'device_uid': 'R7hg8ax1'
           'value': 'Mac OS' }  }



**Failure:**



    { 'success': false,
      'reason': 'Missing credentials' }
    
    { 'success': false,
      'reason': 'Invalid credentials' }
    
    { 'success': false,
      'reason': 'Missing parameters' }
    
    { 'success': false,
      'reason': 'Device field not found' }
    
    { 'success': false,
      'reason': 'Device not found' }
    
    { 'success': false,
      'reason': 'Device type not found' }","","","",REST API > Metrics,53840,""
3410561,As a Client I want to index devices,62307,1,7,2,"","GATE-103,GATE-107",24,1516655307,24,1520540948,"","",4401,0,"See instructions for postman here: https://intouchhealth.atlassian.net/wiki/spaces/TS/pages/260997532/API+Docs

Path
GET `/api/v1/device`

Headers

* ITH-API-Key-ID
* ITH-API-Secret-Key
* Content-Type: application/json

Input Body: No body content","",1. Do a GET to `/api/v1/device` (see description),"# Success:


	{
		'success': true,
		'devices': 
			{
				'id': 1,
				'name': 'AAT402',
				'device_uid': 'C1kn9i8PT35arQ',
				'device_type': 'AAT',
				'created_at': '2017-12-01T22:02:23.000Z',
				'updated_at': '2017-12-01T18:25:34.000Z'
			},
			...
		
	}

# No success:

  * `{ 'success': false, 'reason': 'Missing credentials' }` | When one or both credentials are missing.
  
  * `{ 'success': false, 'reason': 'Invalid credentials' }` | When credentials don't match.","","","",REST API > Devices,53840,""
3410562,As a Client I want to create devices,62307,1,7,2,"","GATE-103,GATE-107",24,1516655319,9,1518441696,"","",4401,0,"See instructions for postman here: https://intouchhealth.atlassian.net/wiki/spaces/TS/pages/260997532/API+Docs

Path
POST `/api/v1/device`

Headers

* ITH-API-Key-ID
* ITH-API-Secret-Key
* Content-Type: application/json

Input Body
Note: device_uid is optional, if it is not provided a randomly generated 16 character alphanumeric UID will be assigned to the device.

	{ 
		'name': 'AAT402',
		'device_uid': 'Tc90krb5',
		'device_type': 'AAT'
	}","",1. Do a POST to `/api/v1/device` (see description),"* Success:
    * `{ 'success': 'true' }`

* No success:

    * `{ 'success': false, 'reason': 'Missing credentials' }` | When one or both credentials are missing.

    * `{ 'success': false, 'reason': 'Invalid credentials' }` | When credentials don't match.

    * `{ 'success': false, 'reason': 'Missing parameters' }` | When the name|device_type is not present in the input body.

    * `{ 'success': false, 'reason': 'Device type not found' }` | When the inputted device_type doesn't exist.

    * `{ 'success': false, 'reason': 'Validation failed: Name|Device UID has already been taken' }` | When the inputted name|device_uid has already been taken.
","","","",REST API > Devices,53840,""
3410563,As a Client I want to update devices,62307,1,7,2,"","GATE-103,GATE-107",24,1516655343,9,1518441696,"","",4401,0,"See instructions for postman here: https://intouchhealth.atlassian.net/wiki/spaces/TS/pages/260997532/API+Docs

Path
PATCH `/api/v1/device/:device_uid`

Headers

* ITH-API-Key-ID
* ITH-API-Secret-Key
* Content-Type: application/json

Input Body
One or more of the following parameters.

	{ 
		'name': 'AAT402',
		'device_uid': 'Tc90krb5',
		'device_type': 'AAT'
	}","",1. Do a PATCH to `/api/v1/device/:device_uid` (see description),"* Success:
    * `{ 'success': 'true' }`

* No success:

    * `{ 'success': false, 'reason': 'Missing credentials' }` | When one or both credentials are missing.

    * `{ 'success': false, 'reason': 'Invalid credentials' }` | When credentials don't match.

    * `{ 'success': false, 'reason': 'Missing parameters' }` | When the name|device_type is not present in the input body.

    * `{ 'success': false, 'reason': 'Device type not found' }` | When the inputted device_type doesn't exist.

    * `{ 'success': false, 'reason': 'Device not found' }` | When the device_uid provided in the url does not match an existing user.

    * `{ 'success': false, 'reason': 'Validation failed: Name|Device UID has already been taken' }` | When the inputted name|device_uid has already been taken.
","","","",REST API > Devices,53840,""
3410564,As a Client I want to delete devices,62307,1,7,2,"","GATE-103,GATE-107",24,1516655364,9,1518441696,"","",4401,0,"See instructions for postman here: https://intouchhealth.atlassian.net/wiki/spaces/TS/pages/260997532/API+Docs

Path
DELETE `/api/v1/device/:device_uid`

Headers

* ITH-API-Key-ID
* ITH-API-Secret-Key
* Content-Type: application/json

Input Body
(no body content)","",1. Do a DELETE to `/api/v1/device/:device_uid` (see description),"* Success:
    * `{ 'success': 'true' }`

* No success:

    * `{ 'success': false, 'reason': 'Missing credentials' }` | When one or both credentials are missing.

    * `{ 'success': false, 'reason': 'Invalid credentials' }` | When credentials don't match.

    * `{ 'success': false, 'reason': 'Device not found' }` | When the device_uid provided in the url does not match an existing user.","","","",REST API > Devices,53840,""
3508709,As a DM user I want to be able query for devices by device type via the API,62307,1,7,2,"","GATE-287, GATE-289",23,1521232884,23,1523991532,"","",4401,0,The DM API should allow the user to provide a device type and return all of the devices that belong to that device type.,"GET REQUEST

URL: <Base URL>/api/v1/devices

HEADERS:

- ITH-API-Key-ID: pre-generated api key
- ITH-API-Secret-Key: pre-generated api secret key
- Content-Type: application/json
- ITH-API-Device-Type:  your device type name","1. Send a GET request to the DM API to /devices.
2. Repeat, but this time send with a header ITH-API-Device-Type: 'your device type name'. 
3. Repeat step 2, but try with a _device type_ from a different account","- Verify you receive a list of all devices for the account that the API credentials belong to.
- Verify you only get devices of the type specified in ITH-API-Device-Type: 'your device type name'.
- Verify you get a 'device type not found error' when trying to browse devices with a type that belongs to another account.","","","",REST API > Devices,53840,""
3525476,API shall allow for retrieving in depth info of a device,62307,1,7,2,"","GATE-317, GATE-321",24,1521986632,9,1521988788,"","",4401,0,"There should be an API route that returns properties of a device and all of its field values when provided with a device UID.

See instructions for postman in DM-slate.

Path
GET `/api/v1/devices:device_UID`

Headers

* ITH-API-Key-ID:  pre-generated api key
* ITH-API-Secret-Key: pre-generated api secret key


Input Body: No body content","1. Have a pair of credentials created
2. Have a Device created in the same account the above credentials belong to.
",1. Do a GET to `/api/v1/devices/:device_UID` (see description),"# Success

	{
		'success': true,
		'device_info': {
			'id': 1,
			'name': 'Gateway Test',
			'created_at': '2018-03-15T19:31:51.000Z',
			'updated_at': '2018-03-20T21:56:51.000Z',
			'device_uid': 'Tc90krb5',
			'device_type': 'Gateway Host',
			'device_fields': {
				'Operating System': 'Ubuntu',
				'Number of Cores': 2
			},
			'metrics': {
				'CPU': 
					{
						'name': 'core 1 cpu',
						'value': '20',
						'timestamp': '2011-10-05T22:26:12'
					},
					{
						'name': 'core 2 cpu',
						'value': '21',
						'timestamp': '2011-10-05T22:26:12'
					}
				,
				'Disk Space': 
					{
						'value': '50',
						'timestamp': '2011-10-05T22:26:12'
					}
				
			}
		}
	}

# No success

* { 'success': false,
  'reason': 'Missing credentials' } | when one or both credentials are missing.

* { 'success': false,
  'reason': 'Invalid credentials' } | when credentials don't match.

* { 'success': false,
  'reason': 'Device not found' } | when the provided Device (UID) doesn't exist in the (credential's) Account.","","","",REST API > Devices,53840,""
3448500,As a Client I want to index device categories,62308,1,7,2,"","GATE-103,GATE-104",9,1518440463,9,1518441938,"","",4401,0,"See instructions for postman here: https://intouchhealth.atlassian.net/wiki/spaces/TS/pages/260997532/API+Docs

Path
GET `/api/v1/device_categories`

Headers

* ITH-API-Key-ID
* ITH-API-Secret-Key
* Content-Type: application/json

Input Body: No body content","",1. Do a GET to `/api/v1/device_categories` (see description),"# Success:


	{
		'success': true,
		'device_categories': 
			{
				'id': 1,
				'name': 'Gateway',,
				'created_at': '2017-12-01T22:02:23.000Z',
				'updated_at': '2017-12-01T18:25:34.000Z'
			},
			...
		
	}

# No success:

  * `{ 'success': false, 'reason': 'Missing credentials' }` | When one or both credentials are missing.
  
  * `{ 'success': false, 'reason': 'Invalid credentials' }` | When credentials don't match.","","","",REST API > Device Categories,53840,""
3448501,As a Client I want to create device categories,62308,1,7,2,"","GATE-103,GATE-104",9,1518440463,9,1518441938,"","",4401,0,"See instructions for postman here: https://intouchhealth.atlassian.net/wiki/spaces/TS/pages/260997532/API+Docs

Path
POST `/api/v1/device_categories `

Headers

* ITH-API-Key-ID
* ITH-API-Secret-Key
* Content-Type: application/json

Input Body
Note: device_uid is optional, if it is not provided a randomly generated 16 character alphanumeric UID will be assigned to the device.

	{ 
		'name': 'Gateway'
	}","",1. Do a POST to `/api/v1/device_categories ` (see description),"* Success:
    * `{ 'success': 'true' }`

* No success:

    * `{ 'success': false, 'reason': 'Missing credentials' }` | When one or both credentials are missing.

    * `{ 'success': false, 'reason': 'Invalid credentials' }` | When credentials don't match.

    * `{ 'success': false, 'reason': 'Missing parameters' }` | When the name|device_type is not present in the input body.

    * `{ 'success': false, 'reason': 'Validation failed: Name has already been taken' }` | When the inputted name has already been taken.
","","","",REST API > Device Categories,53840,""
3448502,As a Client I want to update device categories,62308,1,7,2,"","GATE-103,GATE-104",9,1518440463,9,1518441938,"","",4401,0,"See instructions for postman here: https://intouchhealth.atlassian.net/wiki/spaces/TS/pages/260997532/API+Docs

Path
PATCH `/api/v1/device_categories/:name`

Headers

* ITH-API-Key-ID
* ITH-API-Secret-Key
* Content-Type: application/json

Input Body

	{ 
		'name': 'Gateway'
	}","",1. Do a PATCH to `/api/v1/device_categories/:name` (see description),"* Success:
    * `{ 'success': 'true' }`

* No success:

    * `{ 'success': false, 'reason': 'Missing credentials' }` | When one or both credentials are missing.

    * `{ 'success': false, 'reason': 'Invalid credentials' }` | When credentials don't match.

    * `{ 'success': false, 'reason': 'Missing parameters' }` | When the name|device_type is not present in the input body.

    * `{ 'success': false, 'reason': 'Device category not found' }` | When the name provided in the url does not match an existing user.

    * `{ 'success': false, 'reason': 'Validation failed: Name has already been taken' }` | When the inputted name has already been taken.

","","","",REST API > Device Categories,53840,""
3448503,As a Client I want to delete device categories,62308,1,7,2,"","GATE-103,GATE-104",9,1518440463,9,1518441938,"","",4401,0,"See instructions for postman here: https://intouchhealth.atlassian.net/wiki/spaces/TS/pages/260997532/API+Docs

Path
DELETE `/api/v1/device_categories/:name`

Headers

* ITH-API-Key-ID
* ITH-API-Secret-Key
* Content-Type: application/json

Input Body
(no body content)","",1. Do a DELETE to `/api/v1/device_categories/:name` (see description),"* Success:
    * `{ 'success': 'true' }`

* No success:

    * `{ 'success': false, 'reason': 'Missing credentials' }` | When one or both credentials are missing.

    * `{ 'success': false, 'reason': 'Invalid credentials' }` | When credentials don't match.

    * `{ 'success': false, 'reason': 'Device category not found' }` | When the name provided in the url does not match an existing user.","","","",REST API > Device Categories,53840,""
3679814,Devices can fetch script runs,94242,1,7,2,"","GATE-524, GATE-556",24,1530907651,9,1533063767,"","",4401,0,"Devices can use their 'Device credentials' to fetch 'Active' script runs. What does 'active' mean, you ask? This means that the script run's 'activate at' time is before the time you called the API and the 'deactivate at' time is after the time you called the API.
If results have been Posted to the script run, then that script run either 'FAILED' or 'SUCCEEDED' and is no longer considered 'Active'.","1. Have a script created
2. Have 2 script runs created:
- One `Active`
- The other `Inactive`
- Take both runs on the same device
3. Have `Device credentials` created for the device selected for the script runs.
4. Have a regular set of credentials created (NOT `Device credentials`).","1. Do a  `GET <root>/api/v1/scripts`

*(API Docs: http://docs.intouchutil.com:3000/#get-scripts )*","- Verify that the response contains all scripts for script runs that are `Active`.
- Verify that you do not receive scripts for cancelled script runs.
- Verify that you cannot use non-device credentials to fetch scripts.
- Verify proper auth/auth error messages, etc.","","","",REST API > Scripts,53840,""
3679815,Devices can post results of script runs,94242,1,7,2,"","GATE-524, GATE-557",24,1530907666,9,1533063767,"","",4401,0,"","1. have a script run created
_(The script run can be 'Active' or not. It only matters that results haven't been posted to it yet.)_
","1. Using a device credential, make the following API request:

POST <root>/api/v1/scripts/results

_Body:_
{
      `'script_run_uid': '7515f76e-6067-4afd-b641-d650a473ecf7',`
`     'exit_code': 0,`
`     'output': 'base64 encode some text and place it here'`
}

_Note: for a base64 encoded text example you can use this encoded 'Hello World': 'aGVsbG8gd29ybGQ='_

_(API Docs: http://docs.intouchutil.com:3000/#post-script-results )_","- Verify that you get a successful response and that the results are reflected in the script runs table (Verify on Web UI).
- Verify that providing exit code 0 changes the the state to 'Succeeded' and any other number changes the state to 'Failed' (Verify on Web UI).
- Verify that output is an optional field.","","","",REST API > Scripts,53840,""
3679823,Device or account level credentials can be created via an API,94245,1,7,2,"","GATE-535, GATE-553",24,1531244722,9,1531261587,"","",4401,0,There is a second type of credentials called `Device credentials`. Both these credentials and 'regular credentials' can now be created via an API call.,1. Have a pair of *Regular credentials* to make the API call.,"1. Make a POST to `/api/v1/credentials`

_(Additional info on this API call:  http://docs.intouchutil.com:3000/#create-credential )_","- Verify credentials can be created with and without specifying a `device UID`
_(Note: When 'device UID' is not provided, the credentials created are 'regular credentials' instead of 'device credentials')_

- Verify that device credentials can't have the same name (on different devices). When user attempts to duplicate a device credential name on the same device, the app will overwrite the old pair and generate a new pair, maintaining the name.

Note: When removing the device_UID parameter from the body, That's not necessary a problem, since the call is taken as a 'create regular credentials' call. Nevertheless, since you are still creating a pair of `Regular credentials`, it could still trigger a `'Validation failed: Name has already been taken'` error, if the specified name already exists.","","","",REST API > Credentials,53840,""
3506519,As a DM user I should see a display of the device hierarchy on the device index page,71395,1,7,2,"","GATE-206, GATE-293",24,1521137078,23,1533060207,"","",4401,0,"Device index page provides an accordion panel on the left side, to show device hierarchy. 
","","1. Login as a super_admin (Devices page is the home page by default)
2. Expand and explore Device hierarchy panel
3. Repeat previous steps as a: super_viewer, account_admin, and account_viewer.","1. Device hierarchy panel is present
2. Device hierarchy panel shows is organized by Accounts. Under each Account, the corresponding Device Categories are present. Under each Device Category, the corresponding Device Types are present. ","","","",Monitoring and Management of Gateway Devices,"",""
3521307,"View device fields, metric charts, and notification on 'Device Detailed Status Page'",71395,1,7,2,"","GATE-67, GATE-215",24,1521775520,23,1533060302,"","",4401,0,"The 'Device Detailed Status' page should:

* display graphs for metrics of the device and the panel should link to a full metric page
* display notifications for the device
* show a list of device fields and values","1. Have a Device created.
2. Have Alerts created for that Device.
3. Post metrics that would trigger that Alert and generate Notifications.","1. Login to GM
2. On the home page, select a device by clicking on it or going to /devices/:device_id
","1. You should be redirected to the Device's detail page
2. The Device detail page should 
  * display a metrics table and a button to access the graphics.
  * display Notifications for the device (if any)
  * show a list of Device Fields and Values
  * Make sure that the device detail page displays a row for each field from it's device type.","","","",Monitoring and Management of Gateway Devices,"",""
3678631,Post Imaging Viewer connectivity information to Device Manager,71395,1,7,2,"","GATE-71, GATE-561",23,1529945588,23,1533060399,"","",4401,0,"Post 'Imaging Viewer' specific information to Device Manager. This should include PACS connection latencies.

Tap into the database of eUnity to fetch the PACS information.","","1. Login to DM as a super admin.
2. Go to devices page.
3. Click on an eUnity viewer device.","You should be redirected to the Device's detail page

The Device detail page should display metrics and a button to access the graphs. Make sure you can see PACS latency
","","","",Monitoring and Management of Gateway Devices,"",""
3679130,Improve metric panel display,71395,1,7,2,"","GATE-537, GATE-562",23,1529953960,23,1533060519,"","",4401,0,"Show chartable metrics in both chart and table.
Improve label formatting for 'named' charted metrics.","","1. Login to DM
2. Go to devices page.
3. Open a device with metrics data.","Verify you see a table for latest metrics.

Verify you see a button to access the graphs.

Verify the name of the metric fields and graphs is well formatted. (you should read 'PACS LATENCY' instead of 'pacs_latency')","","","",Monitoring and Management of Gateway Devices,"",""
3679131,View Imaging Viewer specific information in Device Manager,71395,1,7,2,"","GATE-72, GATE-538, GATE-543",23,1529958285,23,1529958569,"","",4401,0,View Imaging Viewer specific information in Device Manager,"1. Login to DM.
2. Go to the Devices page.
3. Open an eUnity Viewer device.
","Verify you can view Pacs Latency information for an InTouch Imaging device via the Device Detail page (via table display and metric graph display) and via the Metric page.

For the graphis check that you can enable/disable the different PACS latency info by clicking in their color at the top of the graphic.","","","","",Monitoring and Management of Gateway Devices,"",""
3682149,Metrics should be fetched in batches for populating graphs,71395,1,7,2,"","GATE-623, GATE-632",23,1532977958,23,1532979173,"","",4401,0,Metrics should be fetched in batches for populating graphs so as not to overload the servers.,"Have a device with lots of metrics data, this can be accomplished by running DA for posting to the device.
","1. Login to DM
2. Go to the **devices** page
3. Open the **device detailed page** by clicking on the device (this device should have metrics data)
4. Open the **metrics graphs page** by clicking in the View graphs button.
5. Click the week button in one of the graphs.
6. Click the month button in one of the graphs.
5. Click the year button in one of the graphs.","For 4: Graph should populate with data only 24hs old.
For 5: Graphs should populate with data a week old.
For 6: Graphs should populate with data a month old.
For 7: Graphs should populate with data a year old.

For all cases verify data is loaded in batches, you should experience a brief delay when the server is fetching the data from the db when you click the day, week, month and year buttons. To verify this you can also check the logs in splunk, you should see something like this whenever you click one of the buttons:

 `Processing by DevicesController#more_metrics as */*`
 `Parameters: {'account'=>'InTouch Health', 'time_range'=>'year', 'metric_field'=>'cpu_usage', 'device_uid'=>'100'}`

","","","",Monitoring and Management of Gateway Devices,"",""
3685340,API allows for base64 encoded strings to be received and sent for fields with data type of file,71395,1,7,2,"","GATE-639, GATE-681",24,1536094327,24,1536098309,"","",4401,0,API allows for base64 encoded strings to be received and sent for fields with data type of file. The base64 string is decoded for POST requests and the file is uploaded to S3. The file is retrieved from S3 and encoded into base64 for GET requests.,"1. Have a Device Type created.

2. Have a Device of the above Device Type created. 

3. Edit .bashrc file to include the following:

# AWS credentials required for DM file upload to S3
export AWS_ACCESS_KEY_ID='<your_access_key>'
export AWS_SECRET_ACCESS_KEY='<your_secret_access_key>'","File data type only affect 2 API requests:

***Create Device Field Value***  and  ***Show Device Field Value***

See documentation here: https://intouchhealth.github.io/DM-slate/#device-field-values 

1. Update a base64 encoded file smaller than 128mb, with 'create device field value'
2. Retrieve it with 'show device field value'
3. Try ti Upload a bigger file. Postman doesn't respond well on big files (since they are huge text files). For this test, use the following code:

FILE=$(base64 -w0 ~/<your_file_location_and_name>)
echo '{ \'device_uid\': \'<device_uid>\', \'device_field_values\': { \'<name_of_the_field>\': { \'value\': \'<your_file_name>\', \'file_contents\': \'$FILE\' } } }' > test.json
curl -H ITH-API-Key-ID:<your_key> -H ITH-API-Secret-Key:<your_secret_key> -H 'Content-Type: application/json' -X POST -d '@test.json' <IP_address>:3003/api/v1/device_field_values


1. With the above code, create a file:  sendFile.sh and make sure to replace all the <place_holders> with your real info.
2. open 2 terminal windows:  on one, have your DM running. On the other one run: 'bash sendFile.sh'","When the file uploaded is not over the size limit, you should get a {success: true} response.
When the file is greater than 128mb, you should get a {success: false, reason....} response, indicating the file is too big.

_(Note: when running the script, the API response is shown on that same terminal window where the script was ran.)_","","","",Monitoring and Management of Gateway Devices,"",""
3685341,File data type allowed as data type option for Device fields,71395,1,7,2,"","GATE-639, GATE-668",24,1536094356,24,1536097283,"","",4401,0,File data type allowed as data type option for Device fields. Metric fields cannot be of data type file.,"1. Have a Device Type created.

2. Have a Device of the above Device Type created. 

3. Edit .bashrc file to include the following:

# AWS credentials required for DM file upload to S3
export AWS_ACCESS_KEY_ID='<your_access_key>'
export AWS_SECRET_ACCESS_KEY='<your_secret_access_key>'
","1. Login to DM
2. Go to Device_type page
3. Select a Device Type and add a field with 'file data type' to it.
4. Go to the Device dashboard and select a Device with that Device Type. 
5. Click the up arrow button for that field and select a file to upload. Make sure the file has a format and that is bigger than 128mb.
6. Without closing the page, upload a new file. This time upload a file smaller than 128mb.

_(Note: If the file being uploaded has not a specific format such as .zip , .png, etc , it may be compressed precious to upload, and you'll see the modal with:  your_file.zip )_","For 4.:  On the Device's detailed view, you should see the new file-type field, and next to it there should be an 'UP ARROW' that enables you to upload a file.

For 5.: A modal should pop up showing you a status bar of the upload. You should get an error message if you try to upload a file that is greater than 128 MB. Once the error message shows the bar should turn red and a 'X' button should show to close the modal.

For 6.: The file upload should be successful and you shouldn't see any remnants of the old failed upload. Besides, you should now see a 'DOWN ARROW' button for that field. Clicking it should download the file.","","","",Monitoring and Management of Gateway Devices,"",""
3521308,As a DM user I should be able to set notifications/alerts based on the metrics of my account's devices,73569,1,7,2,"","GATE-240, GATE-263",24,1521811900,23,1533312127,"","",4401,0,"DM users will be provided with a UI to select notifications/alerts that they would like to receive based on the metrics of their account's devices.
As for now, the only Alerts/Notifications that can be created are for Integer_metrics and float_metrics.

How to Post metrics to the DM API:

POST /api/v1/metrics

Headers:

* ITH-API-Key-ID: LzQc560jReJr0iYXumQAGCSCQiJOwj
* ITH-API-Secret-Key: Xea7crLP6LLM4NnGX8deGQDsc9Gd1
* content type: application/json

Body:

	{ 'device_uid': 'AAT402',
           'metrics': { 'cpu': { 'name': 'core 1 cpu',
                                          'value': '20',
                                          'timestamp': '2011-10-05T22:26:12' }}}","- Have a Device created.
- Have one or both of this metric fields: integer_metric and float_metric.
- Have at least 1 user created.","1. Create the Alert:

     * Login to DM.
     * Go to Alerts page ('alarm clock' icon)
     * Fill in the form with the correct info and remember the metric_field selected (we will be posting metrics of that type later)
     * Set Comparison Operator = equal_to 
     * Set Value THRESHOLD = 2
     * Set Streak THRESHOLD = 1
       (This 3 items above establish that the Alert will be triggered by a metric with value equal_to 2 and atleast 1 time in a row.)
     * Click on Create Alert to submit it.
     * Back in Alerts page, set the Alert ON.

2. Post metric values:
    
     * Using Postman, make 2 POSTs to DM API that meet the following specifications:
         
          ** The first one won't meet the Alert threshold (set the value not equal_to 2)
          **After this, go back to the web and check for Notifications.
     * Go back to Postman and POST another value for the metric.
         
          ** This one will meet the Alert threshold (set the value equal_to 2):
          ** After this, go back to the web and check for Notifications.


3. Go back to the web app and set the Alert OFF

4. Repeat step 2. ","1. After posting metrics with the Alert ON:

     * If the posted metrics meet the Alert threshold:
          ** The bell icon on the navbar should have a '1' indicating that you have 1 new notification. Press the 'X' button to dismiss this notification.

     * If the posted metrics don't meet the Alert threshold: 
          ** Notifications should not be created.

2. After posting metrics with the Alert OFF:

     * It doesn't matter wether the metrics meet the threshold or not, Notifications should not be created.

3. All users from the account where the alert was created and all super users will be able to toggle on and off this alert. 

4. Make sure that any users with the alert enabled when the metric is posted get the notification. 

5. Make sure that dismissing the notification with the 'X' only dismisses the notification for that user.","","","",Notifications and Alerts for Device Manager,"",""
3522442,As a user I want to be able to see all of my notifications,73569,1,7,2,"","GATE-258,GATE-453",24,1521843197,23,1533312103,"","",4401,0,"There should be a page with all notifications and I should be able to remove them one-by-one or all of them.


How to Post metrics to the GM API:

POST /api/v1/metrics

Headers:

* ITH-API-Key-ID: LzQc560jReJr0iYXumQAGCSCQiJOwj
* ITH-API-Secret-Key: Xea7crLP6LLM4NnGX8deGQDsc9Gd1
* content type: application/json

Body:

	{ 'device_uid': 'AAT402',
           'metrics': { 'cpu': { 'name': 'core 1 cpu',
                                          'value': '20',
                                          'timestamp': '2011-10-05T22:26:12' }}}","1. Have two Devices created with the same device type.
2. The device type should have some fields to post at.

","Post metrics that would trigger the Alert generating Notifications:

1. Create the Alert:

     * Login to GM.
     * Go to Alerts page ('alarm clock' icon)
     * Fill in the form with the correct info and remember the metric_field selected (we will be posting metrics of that type later)
     * Set the device type of the created devices.
     * Set Comparison Operator = greater_than 
     * Set Value THRESHOLD = 10
     * Set Streak THRESHOLD = 1
       (This 3 items above establish that the Alert will be triggered by a metric with value greater_than 10 and at least 1 time in a row.)
     * Click on Create Alert to submit it.
     * Back in Alerts page, set the Alert ON.
     * Set MAX. FREQUENCY (Min) to 1.

2. Post metric values that meet the Alert threshold (set the values greater_than 10) for one of the created devices. POST a couple of them in less than 1 minute.
3. Post metric values that meet the Alert threshold (set the values greater_than 10) for the other device created. POST a couple of them in less than 1 minute.
                 
4. After this, go back to the web and check for Notifications.","1. You should see a red number on the bell-icon on home page's nav bar, indicating the count of unseen Notifications;
1.2 When clicking on the bell-icon, a dropdown menu populated with all Notifications should be displayed.
1.3 Notifications can be dismissed 1 by 1 by clicking on the red cross next en them. Each time a Notification is dismissed, the notification should be removed from the nav dropdown and the red counter should be decremented by 1. It will also change its status on Notifications page (See expected results 2).

2. You should see one notification for each device. (/notifications)
2.2 You can also get to the Notifications page by clicking on the 'See all notifications' link under the bell-icon on the nav bar.
2.3. Notifications should be ordered primarily by 'dismissed = 'false' ' , secondarily by 'time reported', and lastly by 'name'.
2.4. If you dismiss one notification, the corresponding 'dismissed' column should change to 'true', the notification should be removed from the nav dropdown, and the red counter should be decremented by 1.
2.5. If you press the dismiss all button, all notifications should be dismissed (page will reload). Dismissed column should all be true to and the nav notification dropdown should be cleared. Also red counter should disappear.

3. On the Device detail page you should see all Notifications related to that Device.
3.2 If you dismiss a notification the red counter should decrement by one, the notification should be removed from the device detail page, from the nav dropdown and It will also change its status on Notifications page (See expected results 2).","","","",Notifications and Alerts for Device Manager,"",""
3679155,A health alert is created by default when a Device Type is created,73569,1,7,2,"","GATE-387, GATE-530",23,1530566695,9,1530574579,"","",4401,0,Creating a device type should automatically create a 'health alert' for that device type and should create 'user alerts' for all super users/users from the corresponding account. The alert will be disabled by default.,"","1. Login to DM
2. Go to the `/device_types` page and create a **new device type**
2. Set a `Maximum allowable downtime`, `Name`, `Account` fields and submit
3. Then go to the `/alerts` page","* There should be a new alert for the created device type. 
  * The alert name should be **Device Health Status** and description `'For each device, check that any metrics or field values have been posted within the maximum allowable downtime'`
* The alert should be disabled by default and the edit button should be also disabled.
* The threshold should be the `Maximum allowable downtime` value you entered while creating the device type.","","","",Notifications and Alerts for Device Manager,"",""
3685031,As a user I want to be able to filter and sort alerts,73569,1,7,2,"","GATE-649, GATE-669",23,1534362239,9,1534875531,"","",4401,0,As a user I want to have a way to sort and filter alerts so that I can see/edit/enable/disable them more easily.,"","1. Login to DM.
2. Go to the Alerts tab.
3. Resize the window, make it smaller and/or larger.
4. Repeat steps 1-2 with all roles.","* Alerts table should display as a sortable, responsive table (just like devices or device types).
* Threshold and description should be collapsed by default for all screen sizes.
* Enabled, settings and Max frequency column headers should not have the up/down arrows for sorting.
* Settings row should not show for super viewers or account viewers.","","","",Notifications and Alerts for Device Manager,"",""
3685057,Limit the number of notifications being shown,73569,1,7,2,"","GATE-637, GATE-692",23,1534545537,9,1534868955,"","",4401,0,"* Notification retrieval on the index page should be limited so as not to overload the db or server memory
* Notifications shown in dropdown should be limited and the counter should show 9+ if the number of active notifications is greater than 9","You need to generate a bunch of alerts, I found postman useful for this purpose. Just configure an alert in DM, set frequency to '0' and activate it, then use postman to send API calls to trigger that alert. The Runner of postman can automate this process, ask Andres if you need help.","1. Login to DM.
2. Generate 100 alerts somehow (see preconditions for tips)
3. Refresh, you should now see a **9+** in red in the bell icon at the top right corner.
4. Click the bell icon and check there are exactly 50 alerts shown there.
5. Click the **see all alerts** link and check you can see all 100 alerts there.
5. Start erasing a couple of alerts clicking the **X** button.
5. The go to the device detail page for the device those alerts are triggered.
6. Click the **X** button a couple of times in the alerts displayed there as well.
7. Keep erasing alerts until there are no more alerts.","* If the number of active notifications for your user is greater than 9 the badge should show 9+.
* Clicking the **X** should dismiss the notification but still show 9+ until the number of notifications shown in the dropdown is 9 or less. At that point the number should decrement as notifications are removed.
* Using the **X** on the device dashboard or on the notification index should result in this same 'decrement' behavior as described in the previous step.
* Dropdown should show a maximum of the 50 most recent notifications even if you have more active notifications than that .","","","",Notifications and Alerts for Device Manager,"",""
3679873,"Super admin users can index, create, and update Accounts",94246,1,7,2,"","GATE-582, GATE-587",23,1531866414,9,1531939037,"","",4401,0,"Super admin users can index, create, and update Accounts. Accounts cannot be deleted, but they can be disabled.","","1. Login as Super Admin to DM.
2. Go to the Accounts tab.
3. Click the **New Account** button.
4. Enter a name and submit.
5. Click on the pencil icon for an account.
6. Edit its name and submit.
7. Disable an account by clicking in its enable/disable slider.","* Verify a new account is added to the list once you submit on step 4.
* Verify the name of the account changes in the list when you edit it in step 6.
* Verify the slider turn red when the account is disabled in step 7.","","","",Accounts,"",""
3679875,Disabled Accounts lock out users and disable credentials,94246,1,7,2,"","GATE-582, GATE-589",23,1531866733,23,1531867199,"","",4401,0,"* Users can not log in if the Account they belong to is disabled.
* Credentials cannot be used if their associated account is disabled.","You will require:

 * An account with one account admin user and one account viewer user.
 * A device that belongs to that account, as well as its device type.
 * API credentials for the account admin users, and for the device mentioned.
 * To disable the account with a super admin user.","1. Try to login with the Account Admin user.
2. Try to login with the Account Viewer user.
3. Do any API call with the account admin API credentials.
4. Do a show device field API call with the device credentials.","Verify for steps 1 & 2 that you are not logged in and redirected to the homepage, and that you see an error message stating: **Sorry, the account you belong to is currently disabled. Please contact support at 1-805-450-3582 for help.** 

Verify you get this response for steps 3 & 4:

    {
        'success': false,
         'reason': 'Sorry, the account you belong to is currently disabled'
    }","","","",Accounts,"",""
